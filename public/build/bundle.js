var clio=function(exports,toml){"use strict";var global=void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},lookup$1=[],revLookup$1=[],Arr$1="undefined"!=typeof Uint8Array?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)lookup$1[t]=e[t],revLookup$1[e.charCodeAt(t)]=t;revLookup$1["-".charCodeAt(0)]=62,revLookup$1["_".charCodeAt(0)]=63}function toByteArray$1(e){var t,r,n,o,s,i;inited||init();var a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===e[a-2]?2:"="===e[a-1]?1:0,i=new Arr$1(3*a/4-s),n=s>0?a-4:a;var l=0;for(t=0,r=0;t<n;t+=4,r+=3)o=revLookup$1[e.charCodeAt(t)]<<18|revLookup$1[e.charCodeAt(t+1)]<<12|revLookup$1[e.charCodeAt(t+2)]<<6|revLookup$1[e.charCodeAt(t+3)],i[l++]=o>>16&255,i[l++]=o>>8&255,i[l++]=255&o;return 2===s?(o=revLookup$1[e.charCodeAt(t)]<<2|revLookup$1[e.charCodeAt(t+1)]>>4,i[l++]=255&o):1===s&&(o=revLookup$1[e.charCodeAt(t)]<<10|revLookup$1[e.charCodeAt(t+1)]<<4|revLookup$1[e.charCodeAt(t+2)]>>2,i[l++]=o>>8&255,i[l++]=255&o),i}function tripletToBase64$1(e){return lookup$1[e>>18&63]+lookup$1[e>>12&63]+lookup$1[e>>6&63]+lookup$1[63&e]}function encodeChunk$1(e,t,r){for(var n,o=[],s=t;s<r;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(tripletToBase64$1(n));return o.join("")}function fromByteArray$1(e){var t;inited||init();for(var r=e.length,n=r%3,o="",s=[],i=16383,a=0,l=r-n;a<l;a+=i)s.push(encodeChunk$1(e,a,a+i>l?l:a+i));return 1===n?(t=e[r-1],o+=lookup$1[t>>2],o+=lookup$1[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=lookup$1[t>>10],o+=lookup$1[t>>4&63],o+=lookup$1[t<<2&63],o+="="),s.push(o),s.join("")}function read(e,t,r,n,o){var s,i,a=8*o-n-1,l=(1<<a)-1,c=l>>1,u=-7,p=r?o-1:0,f=r?-1:1,h=e[t+p];for(p+=f,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=256*s+e[t+p],p+=f,u-=8);for(i=s&(1<<-u)-1,s>>=-u,u+=n;u>0;i=256*i+e[t+p],p+=f,u-=8);if(0===s)s=1-c;else{if(s===l)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,n),s-=c}return(h?-1:1)*i*Math.pow(2,s-n)}function write(e,t,r,n,o,s){var i,a,l,c=8*s-o-1,u=(1<<c)-1,p=u>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,d=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+p>=1?f/l:f*Math.pow(2,1-p))*l>=2&&(i++,l/=2),i+p>=u?(a=0,i=u):i+p>=1?(a=(t*l-1)*Math.pow(2,o),i+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),i=0));o>=8;e[r+h]=255&a,h+=d,a/=256,o-=8);for(i=i<<o|a,c+=o;c>0;e[r+h]=255&i,h+=d,i/=256,c-=8);e[r+h-d]|=128*g}var toString={}.toString,isArray$2=Array.isArray||function(e){return"[object Array]"==toString.call(e)},INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=void 0===global.TYPED_ARRAY_SUPPORT||global.TYPED_ARRAY_SUPPORT;var _kMaxLength=kMaxLength();function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,r)}function from(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,r,n):"string"==typeof t?fromString(e,t,r):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,r,n){return assertSize(t),t<=0?createBuffer(e,t):void 0!==r?"string"==typeof n?createBuffer(e,t).fill(r,n):createBuffer(e,t).fill(r):createBuffer(e,t)}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function fromString(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|byteLength$1(t,r),o=(e=createBuffer(e,n)).write(t,r);return o!==n&&(e=e.slice(0,o)),e}function fromArrayLike(e,t){var r=t.length<0?0:0|checked(t.length);e=createBuffer(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function fromArrayBuffer(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),Buffer.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer.prototype:e=fromArrayLike(e,t),e}function fromObject(e,t){if(internalIsBuffer(t)){var r=0|checked(t.length);return 0===(e=createBuffer(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&isArray$2(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer.alloc(+e)}function internalIsBuffer(e){return!(null==e||!e._isBuffer)}function byteLength$1(e,t){if(internalIsBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(n)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),n=!0}}function slowToString(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function bidirectionalIndexOf(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,n)),internalIsBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,n,o);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,n,o){var s,i=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,a/=2,l/=2,r/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var u=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*i}else-1!==u&&(s-=s-u),u=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){for(var p=!0,f=0;f<l;f++)if(c(e,s+f)!==c(t,f)){p=!1;break}if(p)return s}return-1}function hexWrite(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var i=0;i<n;++i){var a=parseInt(t.substr(2*i,2),16);if(isNaN(a))return i;e[r+i]=a}return i}function utf8Write(e,t,r,n){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,n)}function asciiWrite(e,t,r,n){return blitBuffer(asciiToBytes(t),e,r,n)}function latin1Write(e,t,r,n){return asciiWrite(e,t,r,n)}function base64Write(e,t,r,n){return blitBuffer(base64ToBytes(t),e,r,n)}function ucs2Write(e,t,r,n){return blitBuffer(utf16leToBytes(t,e.length-r),e,r,n)}function base64Slice(e,t,r){return 0===t&&r===e.length?fromByteArray$1(e):fromByteArray$1(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var s,i,a,l,c=e[o],u=null,p=c>239?4:c>223?3:c>191?2:1;if(o+p<=r)switch(p){case 1:c<128&&(u=c);break;case 2:128==(192&(s=e[o+1]))&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=e[o+1],i=e[o+2],128==(192&s)&&128==(192&i)&&(l=(15&c)<<12|(63&s)<<6|63&i)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[o+1],i=e[o+2],a=e[o+3],128==(192&s)&&128==(192&i)&&128==(192&a)&&(l=(15&c)<<18|(63&s)<<12|(63&i)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,p=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),o+=p}return decodeCodePointsArray(n)}Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,r){return from(null,e,t,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array),Buffer.alloc=function(e,t,r){return alloc(null,e,t,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=isBuffer,Buffer.compare=function(e,t){if(!internalIsBuffer(e)||!internalIsBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,s=Math.min(r,n);o<s;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!isArray$2(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=Buffer.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!internalIsBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},Buffer.byteLength=byteLength$1,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",t=INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function(e,t,r,n,o){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(o>>>=0)-(n>>>=0),i=(r>>>=0)-(t>>>=0),a=Math.min(s,i),l=this.slice(n,o),c=e.slice(t,r),u=0;u<a;++u)if(l[u]!==c[u]){s=l[u],i=c[u];break}return s<i?-1:i<s?1:0},Buffer.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function latin1Slice(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function hexSlice(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",s=t;s<r;++s)o+=toHex(e[s]);return o}function utf16leSlice(e,t,r){for(var n=e.slice(t,r),o="",s=0;s<n.length;s+=2)o+=String.fromCharCode(n[s]+256*n[s+1]);return o}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,n,o,s){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,s=Math.min(e.length-r,2);o<s;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function objectWriteUInt32(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,s=Math.min(e.length-r,4);o<s;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function checkIEEE754(e,t,r,n,o,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,n,o){return o||checkIEEE754(e,t,r,4),write(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,o){return o||checkIEEE754(e,t,r,8),write(e,t,r,n,52,8),r+8}Buffer.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),Buffer.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Buffer.prototype;else{var o=t-e;r=new Buffer(o,void 0);for(var s=0;s<o;++s)r[s]=this[s+e]}return r},Buffer.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n},Buffer.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},Buffer.prototype.readUInt8=function(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},Buffer.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=t,o=1,s=this[e+--n];n>0&&(o*=256);)s+=this[e+--n]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*t)),s},Buffer.prototype.readInt8=function(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,t){return t||checkOffset(e,4,this.length),read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return t||checkOffset(e,4,this.length),read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return t||checkOffset(e,8,this.length),read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return t||checkOffset(e,8,this.length),read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,s=0;for(this[t]=255&e;++s<r&&(o*=256);)this[t+s]=e/o&255;return t+r},Buffer.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+r},Buffer.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);checkInt(this,e,t,r,o-1,-o)}var s=0,i=1,a=0;for(this[t]=255&e;++s<r&&(i*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+r},Buffer.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);checkInt(this,e,t,r,o-1,-o)}var s=r-1,i=1,a=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+r},Buffer.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,s=n-r;if(this===e&&r<t&&t<n)for(o=s-1;o>=0;--o)e[o+t]=this[o+r];else if(s<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},Buffer.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var i=internalIsBuffer(e)?e:utf8ToBytes(new Buffer(e,n).toString()),a=i.length;for(s=0;s<r-t;++s)this[s+t]=i[s%a]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if((e=stringtrim(e).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var r;t=t||1/0;for(var n=e.length,o=null,s=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e,t){for(var r,n,o,s=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o=r%256,s.push(o),s.push(n);return s}function base64ToBytes(e){return toByteArray$1(base64clean(e))}function blitBuffer(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function isnan(e){return e!=e}function isBuffer(e){return null!=e&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isFastBuffer(e.slice(0,0))}var _polyfillNode_buffer=Object.freeze({__proto__:null,Buffer:Buffer,INSPECT_MAX_BYTES:INSPECT_MAX_BYTES,SlowBuffer:SlowBuffer,isBuffer:isBuffer,kMaxLength:_kMaxLength});const TYPES={PACKET:0,PAYLOAD:1,REGISTER:2,GET:3,PATH:4,CALL:5,RESULT:6,EVENT:7};function getAugmentedNamespace(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}Object.fromEntries(Object.entries(TYPES).map((([e,t])=>[e,15+t])));var buffer={},base64Js={};base64Js.byteLength=byteLength,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function byteLength(e){var t=getLens(e),r=t[0],n=t[1];return 3*(r+n)/4-n}function _byteLength(e,t,r){return 3*(t+r)/4-r}function toByteArray(e){var t,r,n=getLens(e),o=n[0],s=n[1],i=new Arr(_byteLength(e,o,s)),a=0,l=s>0?o-4:o;for(r=0;r<l;r+=4)t=revLookup[e.charCodeAt(r)]<<18|revLookup[e.charCodeAt(r+1)]<<12|revLookup[e.charCodeAt(r+2)]<<6|revLookup[e.charCodeAt(r+3)],i[a++]=t>>16&255,i[a++]=t>>8&255,i[a++]=255&t;return 2===s&&(t=revLookup[e.charCodeAt(r)]<<2|revLookup[e.charCodeAt(r+1)]>>4,i[a++]=255&t),1===s&&(t=revLookup[e.charCodeAt(r)]<<10|revLookup[e.charCodeAt(r+1)]<<4|revLookup[e.charCodeAt(r+2)]>>2,i[a++]=t>>8&255,i[a++]=255&t),i}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,r){for(var n,o=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(tripletToBase64(n));return o.join("")}function fromByteArray(e){for(var t,r=e.length,n=r%3,o=[],s=16383,i=0,a=r-n;i<a;i+=s)o.push(encodeChunk(e,i,i+s>a?a:i+s));return 1===n?(t=e[r-1],o.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),o.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var ieee754={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,r,n,o){var s,i,a=8*o-n-1,l=(1<<a)-1,c=l>>1,u=-7,p=r?o-1:0,f=r?-1:1,h=e[t+p];for(p+=f,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=256*s+e[t+p],p+=f,u-=8);for(i=s&(1<<-u)-1,s>>=-u,u+=n;u>0;i=256*i+e[t+p],p+=f,u-=8);if(0===s)s=1-c;else{if(s===l)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,n),s-=c}return(h?-1:1)*i*Math.pow(2,s-n)},write:function(e,t,r,n,o,s){var i,a,l,c=8*s-o-1,u=(1<<c)-1,p=u>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,d=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+p>=1?f/l:f*Math.pow(2,1-p))*l>=2&&(i++,l/=2),i+p>=u?(a=0,i=u):i+p>=1?(a=(t*l-1)*Math.pow(2,o),i+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),i=0));o>=8;e[r+h]=255&a,h+=d,a/=256,o-=8);for(i=i<<o|a,c+=o;c>0;e[r+h]=255&i,h+=d,i/=256,c-=8);e[r+h-d]|=128*g}};
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   */
!function(e){var t=base64Js,r=ieee754,n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=i,e.SlowBuffer=function(e){+e!=e&&(e=0);return i.alloc(+e)},e.INSPECT_MAX_BYTES=50;var o=2147483647;function s(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,i.prototype),t}function i(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return a(e,t,r)}function a(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!i.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|h(e,t),n=s(r),o=n.write(e,t);o!==r&&(n=n.slice(0,o));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(j(e,Uint8Array)){var t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return u(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return i.from(n,t,r);var o=function(e){if(i.isBuffer(e)){var t=0|f(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||F(e.length)?s(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),s(e<0?0:0|f(e))}function u(e){for(var t=e.length<0?0:0|f(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,i.prototype),n}function f(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function h(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return N(e).length;default:if(o)return n?-1:R(e).length;t=(""+t).toLowerCase(),o=!0}}function d(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return B(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return C(this,t,r);case"base64":return $(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),F(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,o){var s,i=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,a/=2,l/=2,r/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var u=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*i}else-1!==u&&(s-=s-u),u=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){for(var p=!0,f=0;f<l;f++)if(c(e,s+f)!==c(t,f)){p=!1;break}if(p)return s}return-1}function w(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var s=t.length;n>s/2&&(n=s/2);for(var i=0;i<n;++i){var a=parseInt(t.substr(2*i,2),16);if(F(a))return i;e[r+i]=a}return i}function b(e,t,r,n){return U(R(t,e.length-r),e,r,n)}function _(e,t,r,n){return U(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function v(e,t,r,n){return U(N(t),e,r,n)}function S(e,t,r,n){return U(function(e,t){for(var r,n,o,s=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o=r%256,s.push(o),s.push(n);return s}(t,e.length-r),e,r,n)}function $(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function E(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var s,i,a,l,c=e[o],u=null,p=c>239?4:c>223?3:c>191?2:1;if(o+p<=r)switch(p){case 1:c<128&&(u=c);break;case 2:128==(192&(s=e[o+1]))&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=e[o+1],i=e[o+2],128==(192&s)&&128==(192&i)&&(l=(15&c)<<12|(63&s)<<6|63&i)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[o+1],i=e[o+2],a=e[o+3],128==(192&s)&&128==(192&i)&&128==(192&a)&&(l=(15&c)<<18|(63&s)<<12|(63&i)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,p=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),o+=p}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=k));return r}(n)}e.kMaxLength=o,i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(e,t,r){return a(e,t,r)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},i.allocUnsafe=function(e){return c(e)},i.allocUnsafeSlow=function(e){return c(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,t){if(j(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,s=Math.min(r,n);o<s;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=i.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(j(s,Uint8Array))o+s.length>n.length?i.from(s).copy(n,o):Uint8Array.prototype.set.call(n,s,o);else{if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o)}o+=s.length}return n},i.byteLength=h,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):d.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},n&&(i.prototype[n]=i.prototype.inspect),i.prototype.compare=function(e,t,r,n,o){if(j(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),l=Math.min(s,a),c=this.slice(n,o),u=e.slice(t,r),p=0;p<l;++p)if(c[p]!==u[p]){s=c[p],a=u[p];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},i.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return v(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function A(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function C(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function B(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",s=t;s<r;++s)o+=D[e[s]];return o}function I(e,t,r){for(var n=e.slice(t,r),o="",s=0;s<n.length-1;s+=2)o+=String.fromCharCode(n[s]+256*n[s+1]);return o}function T(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,o,s){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function P(e,t,r,n,o,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,n,o,s){return t=+t,n>>>=0,s||P(e,0,n,4),r.write(e,t,n,o,23,4),n+4}function O(e,t,n,o,s){return t=+t,n>>>=0,s||P(e,0,n,8),r.write(e,t,n,o,52,8),n+8}i.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,i.prototype),n},i.prototype.readUintLE=i.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},i.prototype.readUint8=i.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=t,o=1,s=this[e+--n];n>0&&(o*=256);)s+=this[e+--n]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*t)),s},i.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),r.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),r.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),r.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),r.read(this,e,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,s=0;for(this[t]=255&e;++s<r&&(o*=256);)this[t+s]=e/o&255;return t+r},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+r},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);x(this,e,t,r,o-1,-o)}var s=0,i=1,a=0;for(this[t]=255&e;++s<r&&(i*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);x(this,e,t,r,o-1,-o)}var s=r-1,i=1,a=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return O(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return O(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var o=e.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=i.isBuffer(e)?e:i.from(e,n),l=a.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=a[s%l]}return this};var L=/[^+/0-9A-Za-z-_]/g;function R(e,t){var r;t=t||1/0;for(var n=e.length,o=null,s=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function N(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function F(e){return e!=e}var D=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,o=0;o<16;++o)t[n+o]=e[r]+e[o];return t}()}(buffer);const BufferClass$1=void 0===Buffer?buffer.Buffer:Buffer,AsyncResource=null,createHook=null,fork=null,Worker$1=null,createServer=null,connect=null,fileURLToPath=e=>e.replace(/^.*?:\/\//,""),readFileSync=null,writeFileSync=null,existsSync=null,rmSync=null,execSync=null,parse$1=null,spawn=null,mkdirSync=null,statSync=null,json=null;var shim=Object.freeze({__proto__:null,AsyncResource:AsyncResource,createHook:createHook,fork:fork,Worker:Worker$1,createServer:createServer,connect:connect,fileURLToPath:fileURLToPath,readFileSync:readFileSync,writeFileSync:writeFileSync,existsSync:existsSync,rmSync:rmSync,execSync:execSync,parse:parse$1,spawn:spawn,mkdirSync:mkdirSync,statSync:statSync,json:json});const randomId$1=e=>[...Array(e)].map((()=>(~~(36*Math.random())).toString(36))).join(""),isRegExp=e=>"[object RegExp]"===Object.prototype.toString.call(e);class EventEmitter{constructor(e){this.id=e||"emitter."+randomId$1(64),this.resource=null,this.listeners={},this.regexListeners={}}emit(event,...args){this.listeners[event]=this.listeners[event]||[],this.listeners[event].forEach((e=>e(...args)));for(const[pattern,fns]of Object.entries(this.regexListeners)){const regex=eval(pattern);event.match(regex)&&fns.forEach((e=>e(event,...args)))}return this}emitUnless(callback,event,...args){this.listeners[event]=this.listeners[event]||[],this.listeners[event].filter((e=>e!==callback)).forEach((e=>e(...args)));for(const[pattern,fns]of Object.entries(this.regexListeners)){const regex=eval(pattern);event.match(regex)&&fns.filter((e=>e!==callback)).forEach((e=>e(event,...args)))}return this}on(e,t){const r=isRegExp(e)?this.regexListeners:this.listeners;return r[e]=r[e]||[],r[e].push(t),this}off(e,t){const r=isRegExp(e)?this.regexListeners:this.listeners;return r[e]=r[e]||[],r[e]=r[e].filter((e=>e!==t)),this}}function emitter(){return new EventEmitter}class Range{constructor(e=0,t=1/0,r,n){this.start=e,this.end=t,this.step=r||(t>e?1:-1),this.mapfn=n,this.index=0}get length(){return Math.floor((this.end-this.start)/this.step)}map(e){const t=this.mapfn?(t,r,n)=>e(this.mapfn(t,r,n),r,n):e;return new Range(this.start,this.end,this.step,t)}get(e){const t=this.start+this.step*e;if(!(t>this.end))return this.mapfn?this.mapfn(t,e,this):t}take(e){return new Range(this.start,this.start+e*this.step,this.step,this.mapfn)}skip(e){return new Range(this.start+e*this.step,this.end,this.step,this.mapfn)}slice(e,t){return this.skip(e).take(t-e)}toArray(){return[...this]}toString(){return`[${this.start}:${this.end}:${this.step}]`}next(){const e=this.start+this.step*this.index,t=e>=this.end,r=this.mapfn?this.mapfn(e,this.index,this):e;return t?this.index=0:this.index++,{value:r,done:t}}[Symbol.iterator](){return this}}const range=(e,t,r)=>new Range(e,t,r),getIndex=(e,t)=>{const r=e instanceof Range;return t=t>=0?t:e.length-t,r?e.get(t):e[t]},numberSlice=(e,t)=>getIndex(e,t),rangeSlice=(e,t)=>{const r=[];for(const n of t){if(n>e.length)return r;r.push(getIndex(e,n))}return r},arraySlice=(e,t)=>t.map(((t,r)=>isNumber(t)?getIndex(e,t):slice(e[r],t))),checkType$1=e=>Object.prototype.toString.call(e).replace(/\[|object\s|\]/g,"").toLowerCase(),isNumber=e=>"number"===checkType$1(e),isRange=e=>e instanceof Range,slice=(e,t)=>isRange(t)?rangeSlice(e,t):1===t.length&&isNumber(t[0])?numberSlice(e,t[0]):arraySlice(e,t),parseCloudLocation=e=>{const[t,r,n,o]=e.match(/([a-z]+):\/\/([^\/]+)\/(.*)/);return{protocol:r,host:n,path:o}},supported=["tcp","ipc","ws"],remote$1=async(e,t)=>{const{protocol:r,host:n,path:o}=parseCloudLocation(t);if(!supported.includes(r))throw new Error(`Protocol "${r}" is not supported.`);const s=await e.distributed.getExecutor(r,n),i=await s.getFunctions(o),a={};for(const e in i)a[e.slice(o.length+1)]=i[e];return a};var format=(...e)=>e.map((e=>`${e}`)).join("");const Any=Symbol("Any"),help=e=>console.log(e.__doc__),describe=(e,t)=>(t.__doc__=e,t),returns=(e,t)=>(t.__returns__=e,t),params=(...e)=>{const t=e.pop();return t.__accepts__=e,t},checkType=(e,t)=>Array.isArray(t)?!!Array.isArray(e)&&e.every((e=>checkType(e,t[0]))):t===Number?"number"==typeof e||e instanceof Number:t===String?"string"==typeof e||e instanceof String:e instanceof t,nameOfType=e=>Array.isArray(e)?`Array[${nameOfType(e[0])}]`:e?.constructor?.name||Object.prototype.toString.call(e).slice(8,-1),typeName$1=e=>Array.isArray(e)?`Array[${typeName$1(e[0])}]`:e?.name||Object.prototype.toString.call(e).slice(8,-1),check=e=>{const t=(...r)=>{if(t.__accepts__)for(let e=0;e<r.length;e++){const n=r[e],o=t.__accepts__[e];if(!checkType(n,o)){const t=nameOfType(n),r=typeName$1(o);throw new Error(`Argument of type ${t} at position ${e} does not satisfy parameter of type ${r}`)}}const n=e(...r);if(t.__returns__){if(!checkType(n,t.__returns__)){const e=typeName$1(t.__returns__),r=nameOfType(n);throw new Error(`Returned value ${n} with type ${r} does not satisfy return type of ${e}`)}}return n};return t.__accepts__=e.__accepts__,t.__doc__=e.__doc__,t.__returns__=e.__returns__,t};var builtins=Object.freeze({__proto__:null,EventEmitter:EventEmitter,emitter:emitter,slice:slice,remote:remote$1,randomId:randomId$1,f:format,Any:Any,range:range,help:help,describe:describe,returns:returns,check:check,params:params});function randomId(){return Math.floor(4294967295*Math.random())}class PacketParser extends EventEmitter{constructor(e){super(),this.socket=e,this.size=0,this.data=null,this.socket.on("data",(e=>{for(this.data=this.data?Buffer.concat([this.data,e]):e,0===this.size&&this.data.length>=2&&(this.size=this.data.readUInt16LE(),this.data=this.data.slice(2));this.size&&this.data.length>=this.size;){const e=this.data.slice(0,this.size);if(this.emit("message",e),this.data.length>=this.size+2){const e=this.data.readUInt16LE(this.size);this.data=this.data.slice(this.size+2),this.size=e}else this.data=this.data.slice(this.size),this.size=0}}))}}var constructors$1=[{constructor:RegExp,code:0,args:e=>[e.source,e.flags],build:(e,t)=>new RegExp(e,t)},{constructor:Date,code:1,args:e=>[e.valueOf()],build:e=>new Date(e)}];const typeNames=["null","undefined","uint8","uint16","uint32","uint64","uint128","uintn","int8","int16","int32","int64","int128","intn","float8","float16","float32","float64","float128","floatn","record","ref8","ref16","ref32","ref64","ref128","refn","utfz","string8","string16","string32","string64","string128","stringn","bin8","bin16","bin32","bin64","bin128","binN","true","false","date","date64","constructor8","constructor16","constructor32","array8","array16","array32","array64","array128","objectStart","objectEnd","setStart","setEnd","mapStart","mapEnd"],types$2=Object.fromEntries(typeNames.map(((e,t)=>[e,t])));var types_1=types$2,utfzLib={},generator={};const chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",getChar=e=>{if(e>=chars.length){const t=Math.floor(e/chars.length);return"_".repeat(t)+chars[e-t*chars.length]}return chars[e]},getChars=e=>new Array(e).fill().map(((e,t)=>getChar(t))),generate=(e,t=0)=>2==e?`\n      let ${getChar(t++)} = buf[offset++];\n      if (offset > end) {\n        ${getChar(t-1)} += high;\n        return String.fromCharCode(${getChars(t-1)});\n      }\n      if (${getChar(t-1)} === 0) {\n        return String.fromCharCode(${getChars(t-1)}, high);\n      }\n      ${getChar(t-1)} += high;\n      let ${getChar(t++)} = buf[offset++] + high;\n      return String.fromCharCode(${getChars(t)});\n    `:`\n    let ${getChar(t)} = buf[offset++];\n    if (offset > end) {\n      ${getChar(t)} += high;\n      return String.fromCharCode(${getChars(t)});\n    }\n    if (${getChar(t)} === 0) {\n      next = buf[offset++];\n      if (next === highCode) {\n        ${getChar(t)} = high;\n      } else {\n        highCode = next;\n        high = next << 8;\n        ${getChar(t)} = buf[offset++];\n        if (${getChar(t)} === 0) {\n          ${getChar(t)} = high;\n          offset++\n        } else {\n          ${getChar(t)} += high;\n        }\n        if (offset > end) {\n          return String.fromCharCode(${getChars(t)});\n        }\n      }\n    } else {\n      ${getChar(t)} += high;\n    }\n    ${generate(e-1,t+1)}\n  `,makefn$1=e=>{const t=generate(e);return new Function("buf","length","offset",`let highCode = 0; let high = 0; let next; end = offset + length; ${t}`)};generator.makefn=makefn$1;const{makefn:makefn}=generator,pack=(e,t,r,n)=>{const o=n;let s=0;for(let o=0;o<t;o++){const t=e.charCodeAt(o),i=t>>8;i!==s&&(r[o+n++]=0,r[o+n++]=i,s=i);const a=255&t;r[o+n]=a,a||(r[o+ ++n]=s)}return t+n-o},fromCharCode=String.fromCharCode,fns=new Array(66).fill(null).map(((e,t)=>t>=3?makefn(t):e)),unpack=(e,t,r)=>{if(0===t)return"";if(1===t)return fromCharCode(e[r]);if(2===t){const t=e[r++];return 0===t?"\0":fromCharCode(t,e[r])}if(t<=65)return fns[t](e,t,r);const n=r+t;let o=0,s=0;const i=[];for(let t=r;t<n;t++){const r=e[t];if(r)i.push(r+s);else{const n=e[t+1];t+=1,n===o?i.push(r+s):(o=n,s=n<<8)}}return fromCharCode.apply(null,i)};utfzLib.pack=pack,utfzLib.unpack=unpack;var require$$3=getAugmentedNamespace(_polyfillNode_buffer);const builtinConstructors=constructors$1,SIA_TYPES=types_1,utfz=utfzLib,{Buffer:BufferShim}=require$$3,BufferClass=void 0===Buffer?BufferShim:Buffer;class Sia{constructor({size:e=33554432,constructors:t=builtinConstructors}={}){this.map=new Map,this.buffer=BufferClass.alloc(e),this.offset=0,this.constructors=t,this.strings=0}reset(){this.offset=0,this.strings=0,this.map=new Map}writeString(e,t){return this.buffer.write(e,t)}writeUInt8(e){this.buffer[this.offset]=e,this.offset+=1}writeUInt16(e){this.buffer[this.offset]=255&e,this.buffer[this.offset+1]=e>>8,this.offset+=2}writeUInt32(e){this.buffer.writeUInt32LE(e,this.offset),this.offset+=4}writeInt8(e){this.buffer.writeInt8(e,this.offset),this.offset+=1}writeInt16(e){this.buffer.writeInt16LE(e,this.offset),this.offset+=2}writeInt32(e){this.buffer.writeInt32LE(e,this.offset),this.offset+=4}writeDouble(e){this.buffer.writeDoubleLE(e,this.offset),this.offset+=8}addString(e){const{length:t}=e;if(t<60){this.writeUInt8(SIA_TYPES.utfz);const r=utfz.pack(e,t,this.buffer,this.offset+1);return this.buffer.writeUInt8(r,this.offset),void(this.offset+=r+1)}const r=3*t;if(r<256){this.writeUInt8(SIA_TYPES.string8);const t=this.writeString(e,this.offset+1);this.buffer.writeUInt8(t,this.offset),this.offset+=t+1}else if(r<65536){this.writeUInt8(SIA_TYPES.string16);const t=this.writeString(e,this.offset+2);this.buffer.writeUInt16LE(t,this.offset),this.offset+=t+2}else{this.writeUInt8(SIA_TYPES.string32);const t=this.writeString(e,this.offset+4);this.buffer.writeUInt32LE(t,this.offset),this.offset+=t+4}}addRef(e){if(e<256)this.writeUInt8(SIA_TYPES.ref8),this.writeUInt8(e);else if(e<65536)this.writeUInt8(SIA_TYPES.ref16),this.writeUInt16(e);else{if(!(e<4294967296))throw`Ref size ${e} is too big`;this.writeUInt8(SIA_TYPES.ref32),this.writeUInt32(e)}}addNumber(e){return Number.isInteger(e)?this.addInteger(e):this.addFloat(e)}addInteger(e){e<0?e>=-128?(this.writeUInt8(SIA_TYPES.int8),this.writeInt8(e)):e>=-32768?(this.writeUInt8(SIA_TYPES.int16),this.writeInt16(e)):e>=-2147483648?(this.writeUInt8(SIA_TYPES.int32),this.writeInt32(e)):this.addFloat(e):e<256?(this.writeUInt8(SIA_TYPES.uint8),this.writeUInt8(e)):e<65536?(this.writeUInt8(SIA_TYPES.uint16),this.writeUInt16(e)):e<4294967296?(this.writeUInt8(SIA_TYPES.uint32),this.writeUInt32(e)):this.addFloat(e)}addFloat(e){this.writeUInt8(SIA_TYPES.float64),this.writeDouble(e)}startArray(e){if(e<256)this.writeUInt8(SIA_TYPES.array8),this.writeUInt8(e);else if(e<65536)this.writeUInt8(SIA_TYPES.array16),this.writeUInt16(e);else{if(!(e<4294967296))throw`Array of size ${e} is too big to serialize`;this.writeUInt8(SIA_TYPES.array32),this.writeUInt32(e)}}startObject(){this.writeUInt8(SIA_TYPES.objectStart)}endObject(){this.writeUInt8(SIA_TYPES.objectEnd)}startMap(){this.writeUInt8(SIA_TYPES.mapStart)}endMap(){this.writeUInt8(SIA_TYPES.mapEnd)}startSet(){this.writeUInt8(SIA_TYPES.setStart)}endSet(){this.writeUInt8(SIA_TYPES.setEnd)}addBoolean(e){const t=e?SIA_TYPES.true:SIA_TYPES.false;this.writeUInt8(t)}addNull(){this.writeUInt8(SIA_TYPES.null)}addUndefined(){this.writeUInt8(SIA_TYPES.undefined)}addCustomType(e,t){const{args:r,code:n}=this.itemToSia(e,t);if(n<256)this.writeUInt8(SIA_TYPES.constructor8),this.writeUInt8(n);else if(n<65536)this.writeUInt8(SIA_TYPES.constructor16),this.writeUInt16(n);else{if(!(n<4294967296))throw`Code ${n} too big for a constructor`;this.writeUInt8(SIA_TYPES.constructor32),this.writeUInt32(n)}this.serializeItem(r)}serializeItem(e){switch(typeof e){case"string":return void this.addString(e);case"undefined":return void this.addUndefined(e);case"number":return void this.addNumber(e);case"boolean":return void this.addBoolean(e);case"object":{if(null===e)return void this.addNull(e);const{constructor:t}=e;switch(t){case Object:this.startObject();for(const t in e){const r=this.map.get(t);r?this.addRef(r):(this.map.set(t,this.strings++),this.addString(t)),this.serializeItem(e[t])}return void this.endObject();case Array:this.startArray(e.length);for(const t of e)this.serializeItem(t);return;case Set:this.startSet();for(const t of e)this.serializeItem(t);return void this.endSet();case Map:this.startMap();for(const[t,r]of e)this.serializeItem(t),this.serializeItem(r);return void this.endMap();case Buffer:{const{length:t}=e;if(e.length<256)this.writeUInt8(SIA_TYPES.bin8),this.writeUInt8(t),e.copy(this.buffer,this.offset),this.offset+=t;else if(e.length<65536)this.writeUInt8(SIA_TYPES.bin16),this.writeUInt16(t),e.copy(this.buffer,this.offset),this.offset+=t;else{if(!(e.length<4294967296))throw`Buffer of size ${t} is too big to serialize`;this.writeUInt8(SIA_TYPES.bin32),this.writeUInt32(t),e.copy(this.buffer,this.offset),this.offset+=t}return}default:return void this.addCustomType(e,t)}}}}itemToSia(e,t){for(const r of this.constructors)if(r.constructor===t)return{code:r.code,args:r.args(e)};throw`Serialization of item ${e} is not supported`}serialize(e){return this.data=e,this.reset(),this.serializeItem(this.data),this.buffer.slice(0,this.offset)}}class DeSia{constructor({constructors:e=builtinConstructors,mapSize:t=256e3}={}){this.constructors=new Array(256);for(const t of e)this.constructors[t.code]=t;this.map=new Array(t),this.offset=0,this.strings=0}reset(){this.offset=0,this.strings=0}readKey(e){switch(e){case SIA_TYPES.ref8:{const e=this.readUInt8();return this.map[e]}case SIA_TYPES.ref16:{const e=this.readUInt16();return this.map[e]}case SIA_TYPES.ref32:{const e=this.readUInt32();return this.map[e]}case SIA_TYPES.utfz:{const e=this.readUInt8(),t=utfz.unpack(this.buffer,e,this.offset);return this.offset+=e,this.map[this.strings++]=t,t}case SIA_TYPES.string8:{const e=this.readUInt8(),t=this.readString(e);return this.map[this.strings++]=t,t}case SIA_TYPES.string16:{const e=this.readUInt16(),t=this.readString(e);return this.map[this.strings++]=t,t}case SIA_TYPES.string32:{const e=this.readUInt32(),t=this.readString(e);return this.map[this.strings++]=t,t}default:throw`Key of type ${e} is invalid.`}}readBlock(){const e=this.readUInt8();switch(e){case SIA_TYPES.utfz:{const e=this.readUInt8(),t=utfz.unpack(this.buffer,e,this.offset);return this.offset+=e,t}case SIA_TYPES.string8:{const e=this.readUInt8();return this.readString(e)}case SIA_TYPES.string16:{const e=this.readUInt16();return this.readString(e)}case SIA_TYPES.string32:{const e=this.readUInt32();return this.readString(e)}case SIA_TYPES.bin8:{const e=this.readUInt8(),t=BufferClass.allocUnsafeSlow(e);return this.buffer.copy(t,0,this.offset,this.offset+e),this.offset+=e,t}case SIA_TYPES.bin16:{const e=this.readUInt16(),t=BufferClass.allocUnsafeSlow(e);return this.buffer.copy(t,0,this.offset,this.offset+e),this.offset+=e,t}case SIA_TYPES.bin32:{const e=this.readUInt32(),t=BufferClass.allocUnsafeSlow(e);return this.buffer.copy(t,0,this.offset,this.offset+e),this.offset+=e,t}case SIA_TYPES.int8:return this.readInt8();case SIA_TYPES.int16:return this.readInt16();case SIA_TYPES.int32:return this.readInt32();case SIA_TYPES.uint8:return this.readUInt8();case SIA_TYPES.uint16:return this.readUInt16();case SIA_TYPES.uint32:return this.readUInt32();case SIA_TYPES.float64:return this.readDouble();case SIA_TYPES.constructor8:{const e=this.readUInt8(),t=this.readBlock(),r=this.constructors[e];if(r)return r.build(...t);throw`Constructor ${e} is unknown`}case SIA_TYPES.constructor16:{const e=this.readUInt16(),t=this.readBlock(),r=this.constructors[e];if(r)return r.build(...t);throw`Constructor ${e} is unknown`}case SIA_TYPES.constructor32:{const e=this.readUInt32(),t=this.readBlock(),r=this.constructors[e];if(r)return r.build(...t);throw`Constructor ${e} is unknown`}case SIA_TYPES.false:return!1;case SIA_TYPES.true:return!0;case SIA_TYPES.null:return null;case SIA_TYPES.undefined:return;case SIA_TYPES.objectStart:{const e={};let t=this.buffer[this.offset++];for(;t!==SIA_TYPES.objectEnd;)e[this.readKey(t)]=this.readBlock(),t=this.buffer[this.offset++];return e}case SIA_TYPES.mapStart:{const e=new Map;let t=this.buffer[this.offset];for(;t!==SIA_TYPES.mapEnd;)e.set(this.readBlock(),this.readBlock()),t=this.buffer[this.offset];return e}case SIA_TYPES.setStart:{const e=new Set;let t=this.buffer[this.offset];for(;t!==SIA_TYPES.setEnd;)e.add(this.readBlock()),t=this.buffer[this.offset];return e}case SIA_TYPES.array8:{const e=this.readUInt8(),t=new Array(e);for(let r=0;r<e;r++)t[r]=this.readBlock();return t}case SIA_TYPES.array16:{const e=this.readUInt16(),t=new Array(e);for(let r=0;r<e;r++)t[r]=this.readBlock();return t}case SIA_TYPES.array32:{const e=this.readUInt32(),t=new Array(e);for(let r=0;r<e;r++)t[r]=this.readBlock();return t}default:throw`Unsupported type: ${e}`}}readUInt8(){return this.buffer[this.offset++]}readUInt16(){return this.buffer[this.offset++]+(this.buffer[this.offset++]<<8)}readUInt32(){const e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readInt8(){return this.buffer.readInt8(this.offset++)}readInt16(){const e=this.buffer.readInt16LE(this.offset);return this.offset+=2,e}readInt32(){const e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readDouble(){const e=this.buffer.readDoubleLE(this.offset);return this.offset+=8,e}readString(e){const t=this.buffer.toString("utf8",this.offset,this.offset+e);return this.offset+=e,t}deserialize(e){return this.buffer=e,this.reset(),this.readBlock()}}const _Sia=new Sia,_Desia=new DeSia,sia=e=>_Sia.serialize(e),desia=e=>_Desia.deserialize(e);var sia_1=sia,desia_1=desia,Sia_1=Sia,DeSia_1=DeSia,constructors=builtinConstructors;const{GET:GET$1,REGISTER:REGISTER,PATH:PATH}=TYPES;class Dispatcher extends EventEmitter{constructor(){super(),this.workers=new Map,this.clients=new Map,this.jobs=new Map,this.connectedWorkers=[],this.transports=[],this.index=0,this.setupSia()}setupSia(){this.desia=new DeSia_1}deserialize(e){return desia_1(e)}serialize(e){return BufferClass$1.from(sia_1(e))}kill(){for(const e of this.transports)e.kill&&e.kill()}addTransport(e){this.transports.push(e),e.on("message",((e,t)=>this.onMessage(e,t))),e.start()}getRouteInfo(e){this.desia.reset(),this.desia.buffer=e,this.desia.readInt8(),this.desia.readInt8();return[this.desia.readBlock(),this.desia.readBlock()]}getPayload(){return this.desia.readBlock()}onMessage(e,t){const[r,n]=this.getRouteInfo(t);this.clients.set(r,e),n?n.startsWith("worker://")||n.startsWith("executor://")?this.routeToSocket(n,t):this.routePath(n,t):this.routeSelf(e,r,this.getPayload())}routeToSocket(e,t){const r=this.clients.get(e);r&&r.send(t)}routePath(e,t){const r=this.getWorker(e);r?r.send(t):this.addJob(e,t)}routeSelf(e,t,r){const[n,o,s]=this.deserialize(r);if(o===GET$1){const r=[...this.workers.keys()].filter((e=>e.startsWith(s))),o=this.serialize([n,PATH,r]),i=this.serialize([null,t,o]);e.send(i)}else if(o===REGISTER){if(!s.length)return;for(const t of s){const r=this.workers.get(t)||[];this.workers.set(t,[...r,e])}for(const e of s){const t=this.jobs.get(e)||[];this.jobs.set(e,[]);for(const e of t)this.routePath(...e)}this.connectedWorkers.push(e);(this.listeners.workerConnected||[]).forEach((t=>t.call(this,e)))}}addJob(...e){const t=this.jobs.get(path)||[];this.jobs.set(path,[...t,e])}schedule(e){return this.index=this.index+1>=e?0:this.index+1,this.index}getWorker(e){const t=this.workers.get(e);if(!t)return;return t[this.schedule(t.length)]}expectWorkers(e){return new Promise((t=>{this.connectedWorkers.length>=e&&t();const r=()=>{const{length:n}=this.connectedWorkers;n>=e&&(this.off("workerConnected",r),t())};this.on("workerConnected",r)}))}}const{EVENT:EVENT,CALL:CALL,GET:GET}=TYPES;class Executor{constructor(e){this.transport=e,this.isConnected=!1,this.connect(),this.promises=new Map,this.emitters=new Map,this.id="executor://"+randomId(),this.packets=0,this.setupSia(),this.transport.register(this.id,this)}setupSia(){const e=[...constructors,{constructor:EventEmitter,code:17,args:e=>{const{destination:t}=this,r=(r,...n)=>{const o=this.serialize([e.id,EVENT,r,n]),s=this.serialize([this.id,t,o]);this.send(s)};return e.on(/.*/,r),this.emitters.set(e.id,{emitter:e,send:r}),[e.id,this.id]},build:(e,t)=>{if(this.emitters.has(e))return this.emitters.get(e);const r=new EventEmitter(e),n=(r,...n)=>{const o=this.serialize([e,EVENT,r,n]),s=this.serialize([this.id,t,o]);this.send(s)};return r.on(/.*/,n),this.emitters.set(e,{emitter:r,send:n}),r}}];this.sia=new Sia_1({constructors:e}),this.desia=new DeSia_1({constructors:e})}connect(){this.transport.on("message",(e=>this.onPacket(e))),this.transport.on("connect",(()=>this.onConnect())),this.transport.connect()}onConnect(){this.isConnected=!0}serialize(e){return BufferClass$1.from(this.sia.serialize(e))}deserialize(e){return this.desia.deserialize(e)}onPacket(e){const t=this.deserialize(e[2]),[r,n]=t;if(n===EVENT){const{emitter:e,send:n}=this.emitters.get(r);e.emitUnless(n,t[2],...t[3])}else this.promises.get(r).resolve(t[2])}call(e,t){const r=this.packets++,n=new Promise((e=>{this.promises.set(r,{resolve:e})})),o=this.serialize([r,CALL,t]),s=this.serialize([this.id,e,o]);return this.send(s),n}getFunction(e){return(...t)=>this.call(e,t)}async getFunctions(e){const t=this.packets++,r=new Promise((e=>{this.promises.set(t,{resolve:e})})),n=this.serialize([t,GET,e]),o=this.serialize([this.id,null,n]);this.send(o);const s=await r,i={};for(const e of s)i[e]=this.getFunction(e);return i}send(e){this.isConnected?this.transport.send(e):this.transport.on("connect",(()=>this.transport.send(e)))}}class WebWorkerSocket extends EventEmitter{constructor(e){super(),this.worker=e,this.connect()}kill(){this.worker.terminate()}connect(){this.worker.onmessage=e=>this.handleWorkerMessage(e.data),this.emit("connect")}handleWorkerMessage(e){this.emit("message",e)}send(e){this.worker.postMessage(e,[e.buffer])}}class inSocket{constructor(e){this.socket=e}send(e){this.socket.emit("message",desia_1(e))}}class Socket extends EventEmitter{constructor(e){super(),this.server=e,this.inSocket=new inSocket(this)}register(){}connect(){this.emit("connect")}send(e){this.server.handleIncoming(this.inSocket,e)}}class Server$3 extends EventEmitter{constructor(){super(),this.workers=[],this.ready=!1}kill(){for(const e of this.workers)e.kill()}start(){this.emit("listening"),this.ready=!0}addWorker(e){const t=new WebWorkerSocket(e);this.workers.push(t),t.on("message",(e=>this.handleIncoming(t,e)))}getTransport(){return new Socket(this)}handleIncoming(e,t){this.emit("message",e,Buffer.from(t))}}const cpu={},workerFn=function(){self.addEventListener("message",(()=>{const e=Date.now(),t=e+4;self.postMessage({st:e,et:t})}))},blobUrl=()=>URL.createObjectURL(new Blob(["(",workerFn.toString(),")()"],{type:"application/javascript"}));function sample(e,t,r){return new Promise((n=>{if(0===t){const t=Math.floor(e.reduce((function(e,t){return e+t}),0)/e.length);return n(Math.max(1,t))}map$1(r,(async function(o,s){e.push(reduce(r,s)),n(await sample(e,t-1,r))}))}))}function map$1(e,t){const r=[],n=[];for(let o=0;o<e;++o){const o=new Worker(blobUrl());o.addEventListener("message",(function(o){if(n.push(o.data),n.length===e){for(let t=0;t<e;++t)r[t].terminate();t(null,n)}})),r.push(o)}for(let t=0;t<e;++t)r[t].postMessage(t)}function reduce(e,t){const r=[];for(let n=0;n<e;++n){const o=t[n],s=r[n]=[];for(let r=0;r<e;++r){if(n===r)continue;let e=t[r];(o.st>e.st&&o.st<e.et||e.st>o.st&&e.st<o.et)&&s.push(r)}}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}async function getCPUCount(){return cpu.count||(cpu.count=window.navigator.hardwareConcurrency||await sample([],10,16)),cpu.count}const getModule=async e=>{const t=URL.createObjectURL(new Blob([e],{type:"text/javascript"}));return await import(t)};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}"function"==typeof global.setTimeout&&(cachedSetTimeout=setTimeout),"function"==typeof global.clearTimeout&&(cachedClearTimeout=clearTimeout);var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)}function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser$2=!0,env={},argv=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=global.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function hrtime(e){var t=.001*performanceNow.call(performance),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]}var startTime=new Date;function uptime(){return(new Date-startTime)/1e3}var browser$1$1={nextTick:nextTick,title:title,browser:browser$2,env:env,argv:argv,version:version,versions:versions,on:on,addListener:addListener,once:once,off:off,removeListener:removeListener,removeAllListeners:removeAllListeners,emit:emit,binding:binding,cwd:cwd,chdir:chdir,umask:umask,hrtime:hrtime,platform:platform,release:release,config:config,uptime:uptime};function normalizeArray(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(e){return splitPathRe.exec(e).slice(1)};function resolve(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:"/";if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,t="/"===n.charAt(0))}return(t?"/":"")+(e=normalizeArray(filter(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."}function normalize(e){var t=isAbsolute(e),r="/"===substr(e,-1);return(e=normalizeArray(filter(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e}function isAbsolute(e){return"/"===e.charAt(0)}function join$1(){var e=Array.prototype.slice.call(arguments,0);return normalize(filter(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))}function relative(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=resolve(e).substr(1),t=resolve(t).substr(1);for(var n=r(e.split("/")),o=r(t.split("/")),s=Math.min(n.length,o.length),i=s,a=0;a<s;a++)if(n[a]!==o[a]){i=a;break}var l=[];for(a=i;a<n.length;a++)l.push("..");return(l=l.concat(o.slice(i))).join("/")}var sep="/",delimiter=":";function dirname(e){var t=splitPath(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."}function basename(e,t){var r=splitPath(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r}function extname(e){return splitPath(e)[3]}var _polyfillNode_path={extname:extname,basename:basename,dirname:dirname,sep:sep,delimiter:delimiter,relative:relative,join:join$1,isAbsolute:isAbsolute,normalize:normalize,resolve:resolve};function filter(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var substr="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)},_polyfillNode_path$1=Object.freeze({__proto__:null,resolve:resolve,normalize:normalize,isAbsolute:isAbsolute,join:join$1,relative:relative,sep:sep,delimiter:delimiter,dirname:dirname,basename:basename,extname:extname,default:_polyfillNode_path});const header$3=BufferClass$1.alloc(2);class IPCSocket extends EventEmitter{constructor(e){super(),this.socket=e}send(e){header$3.writeUInt16LE(e.length,0),this.socket.write(BufferClass$1.from(header$3)),this.socket.write(e)}}class Server$2 extends EventEmitter{constructor(e){super(),this.ipcConfig=e||Server$2.defaultIPCConfig(),this.ready=!1}static getIPCPath({name:e}){const t=[browser$1$1?.cwd()||".",e];return"win32"==browser$1$1?.platform&&t.unshift("\\\\?\\pipe"),join$1(...t)}static defaultIPCConfig(){return{path:Server$2.getIPCPath({name:"ipc.sock"})}}createIPCServer(){if(!this.ipcConfig)return;const{path:e}=this.ipcConfig;this.ipcServer=createServer(),this.ipcServer.on("listening",(()=>this.onListening())),this.ipcServer.listen(e),this.ipcServer.on("connection",(e=>this.onIPCConnect(e)))}onListening(){this.ready=!0,this.emit("listening")}onIPCConnect(e){const t=new PacketParser(e),r=new IPCSocket(e);t.on("message",(e=>this.handleIncoming(r,e)))}handleIncoming(e,t){this.emit("message",e,t)}start(){return this.createIPCServer()}}const header$2=BufferClass$1.alloc(2);class Client$2 extends EventEmitter{constructor(e){super(),this.ipcConfig=e||Server$2.defaultIPCConfig(),this.map=new Map}register(e,t){this.map.set(e,t)}connect(){this.socket=connect(this.ipcConfig.path),this.parser=new PacketParser(this.socket),this.parser.on("message",(e=>this.onMessage(e))),this.socket.on("connect",(()=>this.emit("connect"))),this.socket.on("error",(e=>this.emit("error",e)))}send(e){header$2.writeUInt16LE(e.length,0),this.socket.write(BufferClass$1.from(header$2)),this.socket.write(e)}deserialize(e){return desia_1(e)}onMessage(e){const t=this.deserialize(e);this.map.get(t[1]).onPacket(t)}}async function ipc(e,t,r){const n=new Client$2({path:r});n.connect(),await new Promise((e=>n.on("connect",e)));const o=new Executor(n);return this.executors.set(e,o),o}const header$1=BufferClass$1.alloc(2);class TCPSocket extends EventEmitter{constructor(e){super(),this.socket=e}send(e){header$1.writeUInt16LE(e.length,0),this.socket.write(BufferClass$1.from(header$1)),this.socket.write(e)}}class Server$1 extends EventEmitter{constructor(e){super(),this.tcpConfig=e||Server$1.defaultTCPConfig(),this.ready=!1}static defaultTCPConfig(){return{port:4444,host:"0.0.0.0"}}createTCPServer(){if(!this.tcpConfig)return;const{port:e,host:t}=this.tcpConfig;this.tcpServer=createServer(),this.tcpServer.on("listening",(()=>this.onListening())),this.tcpServer.listen(e,t),this.tcpServer.on("connection",(e=>this.onTCPConnect(e)))}onListening(){this.ready=!0,this.emit("listening")}onTCPConnect(e){const t=new PacketParser(e),r=new TCPSocket(e);t.on("message",(e=>this.handleIncoming(r,e)))}handleIncoming(e,t){this.emit("message",e,t)}start(){return this.createTCPServer()}}const header=BufferClass$1.alloc(2);class Client$1 extends EventEmitter{constructor(e){super(),this.tcpConfig=e||Server$1.defaultTCPConfig(),this.map=new Map}register(e,t){this.map.set(e,t)}connect(){const{port:e,host:t}=this.tcpConfig;this.socket=connect(e,t),this.parser=new PacketParser(this.socket),this.parser.on("message",(e=>this.onMessage(e))),this.socket.on("connect",(()=>this.emit("connect"))),this.socket.on("error",(e=>this.emit("error",e)))}send(e){header.writeUInt16LE(e.length,0),this.socket.write(BufferClass$1.from(header)),this.socket.write(e)}deserialize(e){return desia_1(e)}onMessage(e){const t=this.deserialize(e);this.map.get(t[1]).onPacket(t)}}async function tcp(e,t,r){const[n,o]=r.split(":"),s=new Client$1({host:n,port:o});s.connect(),await new Promise((e=>s.on("connect",e)));const i=new Executor(s);return this.executors.set(e,i),i}class WSSocket extends EventEmitter{constructor(e){super(),this.socket=e}send(e){this.socket.send(e)}}class WebSocketWrap{constructor(e){this.socket=new WebSocket(e),this.listeners={},this.socket.onopen=e=>this.emit("open",e),this.socket.onclose=e=>this.emit("close",e),this.socket.onerror=e=>this.emit("error",e),this.socket.onmessage=async e=>this.emit("message",await e.data.arrayBuffer())}send(e){return this.socket.send(e)}emit(e,...t){return this.listeners[e]=this.listeners[e]||[],this.listeners[e].forEach((e=>e(...t))),this}on(e,t){return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t),this}off(e,t){return this.listeners[e]=this.listeners[e]||[],this.listeners[e]=this.listeners[e].filter((e=>e!==t)),this}}var ws$1=WebSocketWrap;class Server extends EventEmitter{constructor(e){super(),this.wsConfig=e||Server.defaultWSConfig(),this.ready=!1}static defaultWSConfig(){return{port:8080,url:"ws://localhost:8080"}}createWSServer(){if(!this.wsConfig)return;const{port:e}=this.wsConfig;this.wsServer=new ws$1.Server({port:e}),this.wsServer.on("listening",(()=>this.onListening())),this.wsServer.on("connection",(e=>this.onWSConnect(e)))}onListening(){this.ready=!0,this.emit("listening")}onWSConnect(e){const t=new WSSocket(e);e.on("message",(e=>this.handleIncoming(t,e)))}handleIncoming(e,t){this.emit("message",e,t)}start(){return this.createWSServer()}}class Client extends EventEmitter{constructor(e){super(),this.wsConfig=e||Server.defaultWSConfig(),this.map=new Map}register(e,t){this.map.set(e,t)}connect(){const{url:e}=this.wsConfig;this.socket=new ws$1(e),this.socket.on("open",(()=>this.emit("connect"))),this.socket.on("error",(e=>this.emit("error",e))),this.socket.on("message",(e=>this.onData(e)))}deserialize(e){return desia_1(e)}send(e){this.socket.send(e)}onData(e){const t=this.deserialize(BufferClass$1.from(e));this.map.get(t[1]).onPacket(t)}}async function ws(e,t,r){const n=new Client({url:`${t}://${r}`});n.connect(),await new Promise((e=>n.on("connect",e)));const o=new Executor(n);return this.executors.set(e,o),o}const executors={ws:ws,ipc:ipc,tcp:tcp};class Distributed{constructor(e,t){this.map=new Map,this.isWorker=e,this.connection=t,this.executors=new Map}set(e,t){this.map.set(e,t),this.isWorker&&this.connection.register(e,t)}get(e){return this.connection.getFunction(e)}async getExecutor(e,t){const r=`${e}:${t}`;return this.executors.has(r)?this.executors.get(r):await executors[e].call(this,r,e,t)}}const workerDist=(e,t)=>new Distributed(!0,{register:(e,r)=>t.register({path:e,fn:r}),getFunction:t=>e.getFunction(t),getFunctions:t=>e.getFunctions(t)}),mainDist=e=>new Distributed(!1,{getFunction:t=>e.getFunction(t),getFunctions:t=>e.getFunctions(t)}),run=async(e,{worker:t,executor:r},{noMain:n=!1}={})=>{const o={distributed:t?workerDist(r,t):mainDist(r),isWorker:!!t,isMain:!t,exports:{},...builtins};o.register=(e,t)=>(o.distributed.set(e,t),t.parallel=o.distributed.get(e),t);const{main:s}=await e.default(o),i=browser$1$1?.argv||[];if(!t&&!n){const e=await s(i);return Array.isArray(e)?await Promise.all(e):await e}};function parseDependencies(e){return Object.entries(e).map((e=>({name:e[0],version:e[1]})))}function getPackageConfig(e){const t=readFileSync(e),r=toml.parse(t),n={...r.npm};delete n.dependencies,delete n.devDependencies;const o={title:r.title,description:r.description,version:r.version,license:r.license,main:r.main,authors:r.authors,keywords:r.keywords,build:r.build,target:r.target,git_repository:r.git_repository,documentation:r.documentation,scripts:r.scripts,servers:r.servers,workers:r.workers,executor:r.executor,dependencies:[],npm:{dependencies:[],devDependencies:[]},npmOverride:n};return r.dependencies&&(o.dependencies=parseDependencies(r.dependencies)),r.npm?.dependencies&&(o.npm.dependencies=parseDependencies(r.npm.dependencies)),r.npm?.devDependencies&&(o.npm.devDependencies=parseDependencies(r.npm.devDependencies)),o}function getDestinationFromConfig(e,t){if(!t)throw new Error('You must pass the location of the "clio.toml" file.');if(!t.build)throw new Error(`No build configuration has been found. Please add a [build] section to your "${e}" file.`);if(!t.build.destination)throw new Error(`The build directory is missing on your "${e}".\n\nExample:\n\n[build]\ndestination = "build"\n`);return t.build.destination}function getSourceFromConfig(e,t){if(!t.build)throw new Error(`No build configuration has been found. It is a "[build]" section on your "${e}" file.`);if(!t.build.source)throw new Error(`Could not find a source directory for build in your ${e} file.`);return t.build.source}function getParsedNpmDependencies(e){const t={},r=getPackageConfig(e).npm.dependencies;return r&&r.forEach((e=>{t[e.name]=e.version})),t}function getParsedNpmDevDependencies(e){const t={},r=getPackageConfig(e).npm.devDependencies;return r&&r.forEach((e=>{t[e.name]=e.version})),t}class Node{constructor(e){this.item=e}setNext(e){this.next=e,e.prev=this}unlink(){this.next&&(this.next.prev=this.prev),this.prev.next=this.next}}class List{constructor(e){if(!e.length)return;const[t,...r]=e;this.current=new Node(t),this.first=this.current,this.last=this.current;let n=this.current;for(const e of r){const t=new Node(e);n.setNext(t),n=t}this.last=n}next(){this.current=this.current.next}prev(){this.current=this.current.prev}unlinkNext(){this.current.next.unlink()}push(e){const t=new Node(e);if(!this.current)return this.current=t,this.last=this.current,void(this.first=this.current);this.last.setNext(t),this.last=t}}const beanPriority=(e,t,r)=>{for(;;){const{current:n}=e,{next:o}=n;if(!o)break;const{next:s}=o,i=t[n.item.type]?.[o.item.type];if(i){if(s){const r=t[o.item.type]?.[s.item.type];if(r&&r.priority>i.priority){e.next();continue}}n.item=i.value(n.item,o.item,r),e.unlinkNext(),e.current=n.prev||n}else e.current=o}return e},beanNoPriority=(e,t,r)=>{for(;;){const{current:n}=e,{next:o}=n;if(!o)break;const s=t[n.item.type]?.[o.item.type];s?(n.item=s.value(n.item,o.item,r),e.unlinkNext(),e.current=n.prev||n):e.current=o}return e},bean=(e,t,r=!0,n={})=>r?beanPriority(e,t,n):beanNoPriority(e,t,n),rule=(e,t=1)=>({value:e,priority:t}),map=(e,t)=>Object.fromEntries(e.map((e=>[e,t]))),mapfn=(e,t)=>Object.fromEntries(e.map(t)),list$1=e=>new List(e),lPluck=e=>e,merge=(...e)=>{const t={};for(const r of e)for(const[e,n]of Object.entries(r))t[e]?t[e]={...t[e],...n}:t[e]=n;return t};var rule_1=rule,map_1=map,mapfn_1=mapfn,bean_1=bean,list_1=list$1,lPluck_1=lPluck,merge_1=merge,sourceMapGenerator={},base64Vlq={},base64$1={};const intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");base64$1.encode=function(e){if(0<=e&&e<intToCharMap.length)return intToCharMap[e];throw new TypeError("Must be between 0 and 63: "+e)};const base64=base64$1,VLQ_BASE_SHIFT=5,VLQ_BASE=1<<VLQ_BASE_SHIFT,VLQ_BASE_MASK=VLQ_BASE-1,VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(e){return e<0?1+(-e<<1):0+(e<<1)}base64Vlq.encode=function(e){let t,r="",n=toVLQSigned(e);do{t=n&VLQ_BASE_MASK,n>>>=VLQ_BASE_SHIFT,n>0&&(t|=VLQ_CONTINUATION_BIT),r+=base64.encode(t)}while(n>0);return r};var util$6={};!function(e){e.getArg=function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')};const t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function n(e){const r=e.match(t);return r?{scheme:r[1],auth:r[2],host:r[3],port:r[4],path:r[5]}:null}function o(e){let t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}e.urlParse=n,e.urlGenerate=o;const s=function(e){const t=[];return function(r){for(let e=0;e<t.length;e++)if(t[e].input===r){const r=t[0];return t[0]=t[e],t[e]=r,t[0].result}const n=e(r);return t.unshift({input:r,result:n}),t.length>32&&t.pop(),n}}((function(t){let r=t;const s=n(t);if(s){if(!s.path)return t;r=s.path}const i=e.isAbsolute(r),a=[];let l=0,c=0;for(;;){if(l=c,c=r.indexOf("/",l),-1===c){a.push(r.slice(l));break}for(a.push(r.slice(l,c));c<r.length&&"/"===r[c];)c++}let u=0;for(c=a.length-1;c>=0;c--){const e=a[c];"."===e?a.splice(c,1):".."===e?u++:u>0&&(""===e?(a.splice(c+1,u),u=0):(a.splice(c,2),u--))}return r=a.join("/"),""===r&&(r=i?"/":"."),s?(s.path=r,o(s)):r}));function i(e,t){""===e&&(e="."),""===t&&(t=".");const i=n(t),a=n(e);if(a&&(e=a.path||"/"),i&&!i.scheme)return a&&(i.scheme=a.scheme),o(i);if(i||t.match(r))return t;if(a&&!a.host&&!a.path)return a.host=t,o(a);const l="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=l,o(a)):l}e.normalize=s,e.join=i,e.isAbsolute=function(e){return"/"===e.charAt(0)||t.test(e)},e.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");let r=0;for(;0!==t.indexOf(e+"/");){const n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)};const a=!("__proto__"in Object.create(null));function l(e){return e}function c(e){if(!e)return!1;const t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(let r=t-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function u(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}e.toSetString=a?l:function(e){return c(e)?"$"+e:e},e.fromSetString=a?l:function(e){return c(e)?e.slice(1):e},e.compareByOriginalPositions=function(e,t,r){let n=u(e.source,t.source);return 0!==n?n:(n=e.originalLine-t.originalLine,0!==n?n:(n=e.originalColumn-t.originalColumn,0!==n||r?n:(n=e.generatedColumn-t.generatedColumn,0!==n?n:(n=e.generatedLine-t.generatedLine,0!==n?n:u(e.name,t.name)))))},e.compareByGeneratedPositionsDeflated=function(e,t,r){let n=e.generatedLine-t.generatedLine;return 0!==n?n:(n=e.generatedColumn-t.generatedColumn,0!==n||r?n:(n=u(e.source,t.source),0!==n?n:(n=e.originalLine-t.originalLine,0!==n?n:(n=e.originalColumn-t.originalColumn,0!==n?n:u(e.name,t.name)))))},e.compareByGeneratedPositionsInflated=function(e,t){let r=e.generatedLine-t.generatedLine;return 0!==r?r:(r=e.generatedColumn-t.generatedColumn,0!==r?r:(r=u(e.source,t.source),0!==r?r:(r=e.originalLine-t.originalLine,0!==r?r:(r=e.originalColumn-t.originalColumn,0!==r?r:u(e.name,t.name)))))},e.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},e.computeSourceURL=function(e,t,r){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),r){const e=n(r);if(!e)throw new Error("sourceMapURL could not be parsed");if(e.path){const t=e.path.lastIndexOf("/");t>=0&&(e.path=e.path.substring(0,t+1))}t=i(o(e),t)}return s(t)}}(util$6);var arraySet={};class ArraySet$2{constructor(){this._array=[],this._set=new Map}static fromArray(e,t){const r=new ArraySet$2;for(let n=0,o=e.length;n<o;n++)r.add(e[n],t);return r}size(){return this._set.size}add(e,t){const r=this.has(e),n=this._array.length;r&&!t||this._array.push(e),r||this._set.set(e,n)}has(e){return this._set.has(e)}indexOf(e){const t=this._set.get(e);if(t>=0)return t;throw new Error('"'+e+'" is not in the set.')}at(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)}toArray(){return this._array.slice()}}arraySet.ArraySet=ArraySet$2;var mappingList={};const util$5=util$6;function generatedPositionAfter(e,t){const r=e.generatedLine,n=t.generatedLine,o=e.generatedColumn,s=t.generatedColumn;return n>r||n==r&&s>=o||util$5.compareByGeneratedPositionsInflated(e,t)<=0}class MappingList$1{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(e,t){this._array.forEach(e,t)}add(e){generatedPositionAfter(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))}toArray(){return this._sorted||(this._array.sort(util$5.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}mappingList.MappingList=MappingList$1;const base64VLQ=base64Vlq,util$4=util$6,ArraySet$1=arraySet.ArraySet,MappingList=mappingList.MappingList;class SourceMapGenerator$1{constructor(e){e||(e={}),this._file=util$4.getArg(e,"file",null),this._sourceRoot=util$4.getArg(e,"sourceRoot",null),this._skipValidation=util$4.getArg(e,"skipValidation",!1),this._sources=new ArraySet$1,this._names=new ArraySet$1,this._mappings=new MappingList,this._sourcesContents=null}static fromSourceMap(e){const t=e.sourceRoot,r=new SourceMapGenerator$1({file:e.file,sourceRoot:t});return e.eachMapping((function(e){const n={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(n.source=e.source,null!=t&&(n.source=util$4.relative(t,n.source)),n.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(n.name=e.name)),r.addMapping(n)})),e.sources.forEach((function(n){let o=n;null!==t&&(o=util$4.relative(t,n)),r._sources.has(o)||r._sources.add(o);const s=e.sourceContentFor(n);null!=s&&r.setSourceContent(n,s)})),r}addMapping(e){const t=util$4.getArg(e,"generated"),r=util$4.getArg(e,"original",null);let n=util$4.getArg(e,"source",null),o=util$4.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,n,o),null!=n&&(n=String(n),this._sources.has(n)||this._sources.add(n)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:n,name:o})}setSourceContent(e,t){let r=e;null!=this._sourceRoot&&(r=util$4.relative(this._sourceRoot,r)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[util$4.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[util$4.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))}applySourceMap(e,t,r){let n=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');n=e.file}const o=this._sourceRoot;null!=o&&(n=util$4.relative(o,n));const s=this._mappings.toArray().length>0?new ArraySet$1:this._sources,i=new ArraySet$1;this._mappings.unsortedForEach((function(t){if(t.source===n&&null!=t.originalLine){const n=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=n.source&&(t.source=n.source,null!=r&&(t.source=util$4.join(r,t.source)),null!=o&&(t.source=util$4.relative(o,t.source)),t.originalLine=n.line,t.originalColumn=n.column,null!=n.name&&(t.name=n.name))}const a=t.source;null==a||s.has(a)||s.add(a);const l=t.name;null==l||i.has(l)||i.add(l)}),this),this._sources=s,this._names=i,e.sources.forEach((function(t){const n=e.sourceContentFor(t);null!=n&&(null!=r&&(t=util$4.join(r,t)),null!=o&&(t=util$4.relative(o,t)),this.setSourceContent(t,n))}),this)}_validateMapping(e,t,r,n){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!r&&!n);else if(!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))}_serializeMappings(){let e,t,r,n,o=0,s=1,i=0,a=0,l=0,c=0,u="";const p=this._mappings.toArray();for(let f=0,h=p.length;f<h;f++){if(t=p[f],e="",t.generatedLine!==s)for(o=0;t.generatedLine!==s;)e+=";",s++;else if(f>0){if(!util$4.compareByGeneratedPositionsInflated(t,p[f-1]))continue;e+=","}e+=base64VLQ.encode(t.generatedColumn-o),o=t.generatedColumn,null!=t.source&&(n=this._sources.indexOf(t.source),e+=base64VLQ.encode(n-c),c=n,e+=base64VLQ.encode(t.originalLine-1-a),a=t.originalLine-1,e+=base64VLQ.encode(t.originalColumn-i),i=t.originalColumn,null!=t.name&&(r=this._names.indexOf(t.name),e+=base64VLQ.encode(r-l),l=r)),u+=e}return u}_generateSourcesContent(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=util$4.relative(t,e));const r=util$4.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null}),this)}toJSON(){const e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e}toString(){return JSON.stringify(this.toJSON())}}SourceMapGenerator$1.prototype._version=3,sourceMapGenerator.SourceMapGenerator=SourceMapGenerator$1;var binarySearch$1={};!function(e){function t(r,n,o,s,i,a){const l=Math.floor((n-r)/2)+r,c=i(o,s[l],!0);return 0===c?l:c>0?n-l>1?t(l,n,o,s,i,a):a==e.LEAST_UPPER_BOUND?n<s.length?n:-1:l:l-r>1?t(r,l,o,s,i,a):a==e.LEAST_UPPER_BOUND?l:r<0?-1:r}e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(r,n,o,s){if(0===n.length)return-1;let i=t(-1,n.length,r,n,o,s||e.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&0===o(n[i],n[i-1],!0);)--i;return i}}(binarySearch$1);var __dirname="/:DevWorkcliopackagesplayground",readWasm$2={exports:{}},require$$0=getAugmentedNamespace(shim),require$$1=getAugmentedNamespace(_polyfillNode_path$1);if("function"==typeof fetch){let e=null;readWasm$2.exports=function(){if("string"!=typeof e)throw new Error("You must provide the URL of lib/mappings.wasm by calling SourceMapConsumer.initialize({ 'lib/mappings.wasm': ... }) before using SourceMapConsumer");return fetch(e).then((e=>e.arrayBuffer()))},readWasm$2.exports.initialize=t=>e=t}else{const e=require$$0,t=require$$1;readWasm$2.exports=function(){return new Promise(((r,n)=>{const o=t.join(__dirname,"mappings.wasm");e.readFile(o,null,((e,t)=>{e?n(e):r(t.buffer)}))}))},readWasm$2.exports.initialize=e=>{console.debug("SourceMapConsumer.initialize is a no-op when running in node.js")}}const readWasm$1=readWasm$2.exports;function Mapping(){this.generatedLine=0,this.generatedColumn=0,this.lastGeneratedColumn=null,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}let cachedWasm=null;var wasm$1=function(){if(cachedWasm)return cachedWasm;const e=[];return cachedWasm=readWasm$1().then((t=>WebAssembly.instantiate(t,{env:{mapping_callback(t,r,n,o,s,i,a,l,c,u){const p=new Mapping;p.generatedLine=t+1,p.generatedColumn=r,n&&(p.lastGeneratedColumn=o-1),s&&(p.source=i,p.originalLine=a+1,p.originalColumn=l,c&&(p.name=u)),e[e.length-1](p)},start_all_generated_locations_for(){console.time("all_generated_locations_for")},end_all_generated_locations_for(){console.timeEnd("all_generated_locations_for")},start_compute_column_spans(){console.time("compute_column_spans")},end_compute_column_spans(){console.timeEnd("compute_column_spans")},start_generated_location_for(){console.time("generated_location_for")},end_generated_location_for(){console.timeEnd("generated_location_for")},start_original_location_for(){console.time("original_location_for")},end_original_location_for(){console.timeEnd("original_location_for")},start_parse_mappings(){console.time("parse_mappings")},end_parse_mappings(){console.timeEnd("parse_mappings")},start_sort_by_generated_location(){console.time("sort_by_generated_location")},end_sort_by_generated_location(){console.timeEnd("sort_by_generated_location")},start_sort_by_original_location(){console.time("sort_by_original_location")},end_sort_by_original_location(){console.timeEnd("sort_by_original_location")}}}))).then((t=>({exports:t.instance.exports,withMappingCallback:(t,r)=>{e.push(t);try{r()}finally{e.pop()}}}))).then(null,(e=>{throw cachedWasm=null,e})),cachedWasm};const util$3=util$6,binarySearch=binarySearch$1,ArraySet=arraySet.ArraySet,readWasm=readWasm$2.exports,wasm=wasm$1,INTERNAL=Symbol("smcInternal");class SourceMapConsumer{constructor(e,t){return e==INTERNAL?Promise.resolve(this):_factory(e,t)}static initialize(e){readWasm.initialize(e["lib/mappings.wasm"])}static fromSourceMap(e,t){return _factoryBSM(e,t)}static with(e,t,r){let n=null;return new SourceMapConsumer(e,t).then((e=>(n=e,r(e)))).then((e=>(n&&n.destroy(),e)),(e=>{throw n&&n.destroy(),e}))}_parseMappings(e,t){throw new Error("Subclasses must implement _parseMappings")}eachMapping(e,t,r){throw new Error("Subclasses must implement eachMapping")}allGeneratedPositionsFor(e){throw new Error("Subclasses must implement allGeneratedPositionsFor")}destroy(){throw new Error("Subclasses must implement destroy")}}SourceMapConsumer.prototype._version=3,SourceMapConsumer.GENERATED_ORDER=1,SourceMapConsumer.ORIGINAL_ORDER=2,SourceMapConsumer.GREATEST_LOWER_BOUND=1,SourceMapConsumer.LEAST_UPPER_BOUND=2;class BasicSourceMapConsumer extends SourceMapConsumer{constructor(e,t){return super(INTERNAL).then((r=>{let n=e;"string"==typeof e&&(n=util$3.parseSourceMapInput(e));const o=util$3.getArg(n,"version");let s=util$3.getArg(n,"sources");const i=util$3.getArg(n,"names",[]);let a=util$3.getArg(n,"sourceRoot",null);const l=util$3.getArg(n,"sourcesContent",null),c=util$3.getArg(n,"mappings"),u=util$3.getArg(n,"file",null);if(o!=r._version)throw new Error("Unsupported version: "+o);return a&&(a=util$3.normalize(a)),s=s.map(String).map(util$3.normalize).map((function(e){return a&&util$3.isAbsolute(a)&&util$3.isAbsolute(e)?util$3.relative(a,e):e})),r._names=ArraySet.fromArray(i.map(String),!0),r._sources=ArraySet.fromArray(s,!0),r._absoluteSources=r._sources.toArray().map((function(e){return util$3.computeSourceURL(a,e,t)})),r.sourceRoot=a,r.sourcesContent=l,r._mappings=c,r._sourceMapURL=t,r.file=u,r._computedColumnSpans=!1,r._mappingsPtr=0,r._wasm=null,wasm().then((e=>(r._wasm=e,r)))}))}_findSourceIndex(e){let t=e;if(null!=this.sourceRoot&&(t=util$3.relative(this.sourceRoot,t)),this._sources.has(t))return this._sources.indexOf(t);for(let t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1}static fromSourceMap(e,t){return new BasicSourceMapConsumer(e.toString())}get sources(){return this._absoluteSources.slice()}_getMappingsPtr(){return 0===this._mappingsPtr&&this._parseMappings(this._mappings,this.sourceRoot),this._mappingsPtr}_parseMappings(e,t){const r=e.length,n=this._wasm.exports.allocate_mappings(r),o=new Uint8Array(this._wasm.exports.memory.buffer,n,r);for(let t=0;t<r;t++)o[t]=e.charCodeAt(t);const s=this._wasm.exports.parse_mappings(n);if(!s){const e=this._wasm.exports.get_last_error();let t=`Error parsing mappings (code ${e}): `;switch(e){case 1:t+="the mappings contained a negative line, column, source index, or name index";break;case 2:t+="the mappings contained a number larger than 2**32";break;case 3:t+="reached EOF while in the middle of parsing a VLQ";break;case 4:t+="invalid base 64 character while parsing a VLQ";break;default:t+="unknown error code"}throw new Error(t)}this._mappingsPtr=s}eachMapping(e,t,r){const n=t||null,o=r||SourceMapConsumer.GENERATED_ORDER,s=this.sourceRoot;this._wasm.withMappingCallback((t=>{null!==t.source&&(t.source=this._sources.at(t.source),t.source=util$3.computeSourceURL(s,t.source,this._sourceMapURL),null!==t.name&&(t.name=this._names.at(t.name))),e.call(n,t)}),(()=>{switch(o){case SourceMapConsumer.GENERATED_ORDER:this._wasm.exports.by_generated_location(this._getMappingsPtr());break;case SourceMapConsumer.ORIGINAL_ORDER:this._wasm.exports.by_original_location(this._getMappingsPtr());break;default:throw new Error("Unknown order of iteration.")}}))}allGeneratedPositionsFor(e){let t=util$3.getArg(e,"source");const r=util$3.getArg(e,"line"),n=e.column||0;if(t=this._findSourceIndex(t),t<0)return[];if(r<1)throw new Error("Line numbers must be >= 1");if(n<0)throw new Error("Column numbers must be >= 0");const o=[];return this._wasm.withMappingCallback((e=>{let t=e.lastGeneratedColumn;this._computedColumnSpans&&null===t&&(t=1/0),o.push({line:e.generatedLine,column:e.generatedColumn,lastColumn:t})}),(()=>{this._wasm.exports.all_generated_locations_for(this._getMappingsPtr(),t,r-1,"column"in e,n)})),o}destroy(){0!==this._mappingsPtr&&(this._wasm.exports.free_mappings(this._mappingsPtr),this._mappingsPtr=0)}computeColumnSpans(){this._computedColumnSpans||(this._wasm.exports.compute_column_spans(this._getMappingsPtr()),this._computedColumnSpans=!0)}originalPositionFor(e){const t={generatedLine:util$3.getArg(e,"line"),generatedColumn:util$3.getArg(e,"column")};if(t.generatedLine<1)throw new Error("Line numbers must be >= 1");if(t.generatedColumn<0)throw new Error("Column numbers must be >= 0");let r,n=util$3.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND);if(null==n&&(n=SourceMapConsumer.GREATEST_LOWER_BOUND),this._wasm.withMappingCallback((e=>r=e),(()=>{this._wasm.exports.original_location_for(this._getMappingsPtr(),t.generatedLine-1,t.generatedColumn,n)})),r&&r.generatedLine===t.generatedLine){let e=util$3.getArg(r,"source",null);null!==e&&(e=this._sources.at(e),e=util$3.computeSourceURL(this.sourceRoot,e,this._sourceMapURL));let t=util$3.getArg(r,"name",null);return null!==t&&(t=this._names.at(t)),{source:e,line:util$3.getArg(r,"originalLine",null),column:util$3.getArg(r,"originalColumn",null),name:t}}return{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e})))}sourceContentFor(e,t){if(!this.sourcesContent)return null;const r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];let n,o=e;if(null!=this.sourceRoot&&(o=util$3.relative(this.sourceRoot,o)),null!=this.sourceRoot&&(n=util$3.urlParse(this.sourceRoot))){const e=o.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];if((!n.path||"/"==n.path)&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(t)return null;throw new Error('"'+o+'" is not in the SourceMap.')}generatedPositionFor(e){let t=util$3.getArg(e,"source");if(t=this._findSourceIndex(t),t<0)return{line:null,column:null,lastColumn:null};const r={source:t,originalLine:util$3.getArg(e,"line"),originalColumn:util$3.getArg(e,"column")};if(r.originalLine<1)throw new Error("Line numbers must be >= 1");if(r.originalColumn<0)throw new Error("Column numbers must be >= 0");let n,o=util$3.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND);if(null==o&&(o=SourceMapConsumer.GREATEST_LOWER_BOUND),this._wasm.withMappingCallback((e=>n=e),(()=>{this._wasm.exports.generated_location_for(this._getMappingsPtr(),r.source,r.originalLine-1,r.originalColumn,o)})),n&&n.source===r.source){let e=n.lastGeneratedColumn;return this._computedColumnSpans&&null===e&&(e=1/0),{line:util$3.getArg(n,"generatedLine",null),column:util$3.getArg(n,"generatedColumn",null),lastColumn:e}}return{line:null,column:null,lastColumn:null}}}BasicSourceMapConsumer.prototype.consumer=SourceMapConsumer;class IndexedSourceMapConsumer extends SourceMapConsumer{constructor(e,t){return super(INTERNAL).then((r=>{let n=e;"string"==typeof e&&(n=util$3.parseSourceMapInput(e));const o=util$3.getArg(n,"version"),s=util$3.getArg(n,"sections");if(o!=r._version)throw new Error("Unsupported version: "+o);r._sources=new ArraySet,r._names=new ArraySet,r.__generatedMappings=null,r.__originalMappings=null,r.__generatedMappingsUnsorted=null,r.__originalMappingsUnsorted=null;let i={line:-1,column:0};return Promise.all(s.map((e=>{if(e.url)throw new Error("Support for url field in sections not implemented.");const r=util$3.getArg(e,"offset"),n=util$3.getArg(r,"line"),o=util$3.getArg(r,"column");if(n<i.line||n===i.line&&o<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");i=r;return new SourceMapConsumer(util$3.getArg(e,"map"),t).then((e=>({generatedOffset:{generatedLine:n+1,generatedColumn:o+1},consumer:e})))}))).then((e=>(r._sections=e,r)))}))}get _generatedMappings(){return this.__generatedMappings||this._sortGeneratedMappings(),this.__generatedMappings}get _originalMappings(){return this.__originalMappings||this._sortOriginalMappings(),this.__originalMappings}get _generatedMappingsUnsorted(){return this.__generatedMappingsUnsorted||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappingsUnsorted}get _originalMappingsUnsorted(){return this.__originalMappingsUnsorted||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappingsUnsorted}_sortGeneratedMappings(){const e=this._generatedMappingsUnsorted;e.sort(util$3.compareByGeneratedPositionsDeflated),this.__generatedMappings=e}_sortOriginalMappings(){const e=this._originalMappingsUnsorted;e.sort(util$3.compareByOriginalPositions),this.__originalMappings=e}get sources(){const e=[];for(let t=0;t<this._sections.length;t++)for(let r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}originalPositionFor(e){const t={generatedLine:util$3.getArg(e,"line"),generatedColumn:util$3.getArg(e,"column")},r=binarySearch.search(t,this._sections,(function(e,t){const r=e.generatedLine-t.generatedOffset.generatedLine;return r||e.generatedColumn-t.generatedOffset.generatedColumn})),n=this._sections[r];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))}sourceContentFor(e,t){for(let t=0;t<this._sections.length;t++){const r=this._sections[t].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')}generatedPositionFor(e){for(let t=0;t<this._sections.length;t++){const r=this._sections[t];if(-1===r.consumer._findSourceIndex(util$3.getArg(e,"source")))continue;const n=r.consumer.generatedPositionFor(e);if(n){return{line:n.line+(r.generatedOffset.generatedLine-1),column:n.column+(r.generatedOffset.generatedLine===n.line?r.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}}_parseMappings(e,t){const r=this.__generatedMappingsUnsorted=[],n=this.__originalMappingsUnsorted=[];for(let e=0;e<this._sections.length;e++){const t=this._sections[e],o=[];t.consumer.eachMapping((e=>o.push(e)));for(let e=0;e<o.length;e++){const s=o[e];let i=util$3.computeSourceURL(t.consumer.sourceRoot,null,this._sourceMapURL);this._sources.add(i),i=this._sources.indexOf(i);let a=null;s.name&&(this._names.add(s.name),a=this._names.indexOf(s.name));const l={source:i,generatedLine:s.generatedLine+(t.generatedOffset.generatedLine-1),generatedColumn:s.generatedColumn+(t.generatedOffset.generatedLine===s.generatedLine?t.generatedOffset.generatedColumn-1:0),originalLine:s.originalLine,originalColumn:s.originalColumn,name:a};r.push(l),"number"==typeof l.originalLine&&n.push(l)}}}eachMapping(e,t,r){const n=t||null;let o;switch(r||SourceMapConsumer.GENERATED_ORDER){case SourceMapConsumer.GENERATED_ORDER:o=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}const s=this.sourceRoot;o.map((function(e){let t=null;return null!==e.source&&(t=this._sources.at(e.source),t=util$3.computeSourceURL(s,t,this._sourceMapURL)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}}),this).forEach(e,n)}_findMapping(e,t,r,n,o,s){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return binarySearch.search(e,t,o,s)}allGeneratedPositionsFor(e){const t=util$3.getArg(e,"line"),r={source:util$3.getArg(e,"source"),originalLine:t,originalColumn:util$3.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];if(r.originalLine<1)throw new Error("Line numbers must be >= 1");if(r.originalColumn<0)throw new Error("Column numbers must be >= 0");const n=[];let o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",util$3.compareByOriginalPositions,binarySearch.LEAST_UPPER_BOUND);if(o>=0){let r=this._originalMappings[o];if(void 0===e.column){const e=r.originalLine;for(;r&&r.originalLine===e;){let e=r.lastGeneratedColumn;this._computedColumnSpans&&null===e&&(e=1/0),n.push({line:util$3.getArg(r,"generatedLine",null),column:util$3.getArg(r,"generatedColumn",null),lastColumn:e}),r=this._originalMappings[++o]}}else{const e=r.originalColumn;for(;r&&r.originalLine===t&&r.originalColumn==e;){let e=r.lastGeneratedColumn;this._computedColumnSpans&&null===e&&(e=1/0),n.push({line:util$3.getArg(r,"generatedLine",null),column:util$3.getArg(r,"generatedColumn",null),lastColumn:e}),r=this._originalMappings[++o]}}}return n}destroy(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.destroy()}}function _factory(e,t){let r=e;"string"==typeof e&&(r=util$3.parseSourceMapInput(e));const n=null!=r.sections?new IndexedSourceMapConsumer(r,t):new BasicSourceMapConsumer(r,t);return Promise.resolve(n)}function _factoryBSM(e,t){return BasicSourceMapConsumer.fromSourceMap(e,t)}var sourceNode={};const SourceMapGenerator=sourceMapGenerator.SourceMapGenerator,util$2=util$6,REGEX_NEWLINE=/(\r?\n)/,NEWLINE_CODE=10,isSourceNode="$$$isSourceNode$$$";class SourceNode$1{constructor(e,t,r,n,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==o?null:o,this[isSourceNode]=!0,null!=n&&this.add(n)}static fromStringWithSourceMap(e,t,r){const n=new SourceNode$1,o=e.split(REGEX_NEWLINE);let s=0;const i=function(){return e()+(e()||"");function e(){return s<o.length?o[s++]:void 0}};let a,l=1,c=0,u=null;return t.eachMapping((function(e){if(null!==u){if(!(l<e.generatedLine)){a=o[s]||"";const t=a.substr(0,e.generatedColumn-c);return o[s]=a.substr(e.generatedColumn-c),c=e.generatedColumn,p(u,t),void(u=e)}p(u,i()),l++,c=0}for(;l<e.generatedLine;)n.add(i()),l++;c<e.generatedColumn&&(a=o[s]||"",n.add(a.substr(0,e.generatedColumn)),o[s]=a.substr(e.generatedColumn),c=e.generatedColumn),u=e}),this),s<o.length&&(u&&p(u,i()),n.add(o.splice(s).join(""))),t.sources.forEach((function(e){const o=t.sourceContentFor(e);null!=o&&(null!=r&&(e=util$2.join(r,e)),n.setSourceContent(e,o))})),n;function p(e,t){if(null===e||void 0===e.source)n.add(t);else{const o=r?util$2.join(r,e.source):e.source;n.add(new SourceNode$1(e.originalLine,e.originalColumn,o,t,e.name))}}}add(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[isSourceNode]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this}prepend(e){if(Array.isArray(e))for(let t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[isSourceNode]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this}walk(e){let t;for(let r=0,n=this.children.length;r<n;r++)t=this.children[r],t[isSourceNode]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})}join(e){let t,r;const n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this}replaceRight(e,t){const r=this.children[this.children.length-1];return r[isSourceNode]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this}setSourceContent(e,t){this.sourceContents[util$2.toSetString(e)]=t}walkSourceContents(e){for(let t=0,r=this.children.length;t<r;t++)this.children[t][isSourceNode]&&this.children[t].walkSourceContents(e);const t=Object.keys(this.sourceContents);for(let r=0,n=t.length;r<n;r++)e(util$2.fromSetString(t[r]),this.sourceContents[t[r]])}toString(){let e="";return this.walk((function(t){e+=t})),e}toStringWithSourceMap(e){const t={code:"",line:1,column:0},r=new SourceMapGenerator(e);let n=!1,o=null,s=null,i=null,a=null;return this.walk((function(e,l){t.code+=e,null!==l.source&&null!==l.line&&null!==l.column?(o===l.source&&s===l.line&&i===l.column&&a===l.name||r.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:t.line,column:t.column},name:l.name}),o=l.source,s=l.line,i=l.column,a=l.name,n=!0):n&&(r.addMapping({generated:{line:t.line,column:t.column}}),o=null,n=!1);for(let s=0,i=e.length;s<i;s++)e.charCodeAt(s)===NEWLINE_CODE?(t.line++,t.column=0,s+1===i?(o=null,n=!1):n&&r.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:t.line,column:t.column},name:l.name})):t.column++})),this.walkSourceContents((function(e,t){r.setSourceContent(e,t)})),{code:t.code,map:r}}}sourceNode.SourceNode=SourceNode$1;var SourceNode=sourceNode.SourceNode,ansiStyles$3={exports:{}},colorName$1={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const cssKeywords$1=colorName$1,reverseKeywords$1={};for(const e of Object.keys(cssKeywords$1))reverseKeywords$1[cssKeywords$1[e]]=e;const convert$3={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var conversions$5=convert$3;for(const e of Object.keys(convert$3)){if(!("channels"in convert$3[e]))throw new Error("missing channels property: "+e);if(!("labels"in convert$3[e]))throw new Error("missing channel labels property: "+e);if(convert$3[e].labels.length!==convert$3[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:r}=convert$3[e];delete convert$3[e].channels,delete convert$3[e].labels,Object.defineProperty(convert$3[e],"channels",{value:t}),Object.defineProperty(convert$3[e],"labels",{value:r})}function comparativeDistance$1(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}convert$3.rgb.hsl=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,o=Math.min(t,r,n),s=Math.max(t,r,n),i=s-o;let a,l;s===o?a=0:t===s?a=(r-n)/i:r===s?a=2+(n-t)/i:n===s&&(a=4+(t-r)/i),a=Math.min(60*a,360),a<0&&(a+=360);const c=(o+s)/2;return l=s===o?0:c<=.5?i/(s+o):i/(2-s-o),[a,100*l,100*c]},convert$3.rgb.hsv=function(e){let t,r,n,o,s;const i=e[0]/255,a=e[1]/255,l=e[2]/255,c=Math.max(i,a,l),u=c-Math.min(i,a,l),p=function(e){return(c-e)/6/u+.5};return 0===u?(o=0,s=0):(s=u/c,t=p(i),r=p(a),n=p(l),i===c?o=n-r:a===c?o=1/3+t-n:l===c&&(o=2/3+r-t),o<0?o+=1:o>1&&(o-=1)),[360*o,100*s,100*c]},convert$3.rgb.hwb=function(e){const t=e[0],r=e[1];let n=e[2];const o=convert$3.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[o,100*s,100*n]},convert$3.rgb.cmyk=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,o=Math.min(1-t,1-r,1-n);return[100*((1-t-o)/(1-o)||0),100*((1-r-o)/(1-o)||0),100*((1-n-o)/(1-o)||0),100*o]},convert$3.rgb.keyword=function(e){const t=reverseKeywords$1[e];if(t)return t;let r,n=1/0;for(const t of Object.keys(cssKeywords$1)){const o=comparativeDistance$1(e,cssKeywords$1[t]);o<n&&(n=o,r=t)}return r},convert$3.keyword.rgb=function(e){return cssKeywords$1[e]},convert$3.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;return[100*(.4124*t+.3576*r+.1805*n),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},convert$3.rgb.lab=function(e){const t=convert$3.rgb.xyz(e);let r=t[0],n=t[1],o=t[2];r/=95.047,n/=100,o/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;return[116*n-16,500*(r-n),200*(n-o)]},convert$3.hsl.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;let o,s,i;if(0===r)return i=255*n,[i,i,i];o=n<.5?n*(1+r):n+r-n*r;const a=2*n-o,l=[0,0,0];for(let e=0;e<3;e++)s=t+1/3*-(e-1),s<0&&s++,s>1&&s--,i=6*s<1?a+6*(o-a)*s:2*s<1?o:3*s<2?a+(o-a)*(2/3-s)*6:a,l[e]=255*i;return l},convert$3.hsl.hsv=function(e){const t=e[0];let r=e[1]/100,n=e[2]/100,o=r;const s=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,o*=s<=1?s:2-s;return[t,100*(0===n?2*o/(s+o):2*r/(n+r)),100*((n+r)/2)]},convert$3.hsv.rgb=function(e){const t=e[0]/60,r=e[1]/100;let n=e[2]/100;const o=Math.floor(t)%6,s=t-Math.floor(t),i=255*n*(1-r),a=255*n*(1-r*s),l=255*n*(1-r*(1-s));switch(n*=255,o){case 0:return[n,l,i];case 1:return[a,n,i];case 2:return[i,n,l];case 3:return[i,a,n];case 4:return[l,i,n];case 5:return[n,i,a]}},convert$3.hsv.hsl=function(e){const t=e[0],r=e[1]/100,n=e[2]/100,o=Math.max(n,.01);let s,i;i=(2-r)*n;const a=(2-r)*o;return s=r*o,s/=a<=1?a:2-a,s=s||0,i/=2,[t,100*s,100*i]},convert$3.hwb.rgb=function(e){const t=e[0]/360;let r=e[1]/100,n=e[2]/100;const o=r+n;let s;o>1&&(r/=o,n/=o);const i=Math.floor(6*t),a=1-n;s=6*t-i,0!=(1&i)&&(s=1-s);const l=r+s*(a-r);let c,u,p;switch(i){default:case 6:case 0:c=a,u=l,p=r;break;case 1:c=l,u=a,p=r;break;case 2:c=r,u=a,p=l;break;case 3:c=r,u=l,p=a;break;case 4:c=l,u=r,p=a;break;case 5:c=a,u=r,p=l}return[255*c,255*u,255*p]},convert$3.cmyk.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},convert$3.xyz.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100;let o,s,i;return o=3.2406*t+-1.5372*r+-.4986*n,s=-.9689*t+1.8758*r+.0415*n,i=.0557*t+-.204*r+1.057*n,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),i=Math.min(Math.max(0,i),1),[255*o,255*s,255*i]},convert$3.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];t/=95.047,r/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;return[116*r-16,500*(t-r),200*(r-n)]},convert$3.lab.xyz=function(e){let t,r,n;r=(e[0]+16)/116,t=e[1]/500+r,n=r-e[2]/200;const o=r**3,s=t**3,i=n**3;return r=o>.008856?o:(r-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,n=i>.008856?i:(n-16/116)/7.787,t*=95.047,r*=100,n*=108.883,[t,r,n]},convert$3.lab.lch=function(e){const t=e[0],r=e[1],n=e[2];let o;o=360*Math.atan2(n,r)/2/Math.PI,o<0&&(o+=360);return[t,Math.sqrt(r*r+n*n),o]},convert$3.lch.lab=function(e){const t=e[0],r=e[1],n=e[2]/360*2*Math.PI;return[t,r*Math.cos(n),r*Math.sin(n)]},convert$3.rgb.ansi16=function(e,t=null){const[r,n,o]=e;let s=null===t?convert$3.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),0===s)return 30;let i=30+(Math.round(o/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return 2===s&&(i+=60),i},convert$3.hsv.ansi16=function(e){return convert$3.rgb.ansi16(convert$3.hsv.rgb(e),e[2])},convert$3.rgb.ansi256=function(e){const t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},convert$3.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},convert$3.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},convert$3.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},convert$3.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];3===t[0].length&&(r=r.split("").map((e=>e+e)).join(""));const n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},convert$3.rgb.hcg=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,o=Math.max(Math.max(t,r),n),s=Math.min(Math.min(t,r),n),i=o-s;let a,l;return a=i<1?s/(1-i):0,l=i<=0?0:o===t?(r-n)/i%6:o===r?2+(n-t)/i:4+(t-r)/i,l/=6,l%=1,[360*l,100*i,100*a]},convert$3.hsl.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r);let o=0;return n<1&&(o=(r-.5*n)/(1-n)),[e[0],100*n,100*o]},convert$3.hsv.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=t*r;let o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],100*n,100*o]},convert$3.hcg.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];const o=[0,0,0],s=t%1*6,i=s%1,a=1-i;let l=0;switch(Math.floor(s)){case 0:o[0]=1,o[1]=i,o[2]=0;break;case 1:o[0]=a,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=i;break;case 3:o[0]=0,o[1]=a,o[2]=1;break;case 4:o[0]=i,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=a}return l=(1-r)*n,[255*(r*o[0]+l),255*(r*o[1]+l),255*(r*o[2]+l)]},convert$3.hcg.hsv=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);let n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},convert$3.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},convert$3.hcg.hwb=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},convert$3.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,n=r-t;let o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],100*n,100*o]},convert$3.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},convert$3.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},convert$3.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},convert$3.gray.hsl=function(e){return[0,0,e[0]]},convert$3.gray.hsv=convert$3.gray.hsl,convert$3.gray.hwb=function(e){return[0,100,e[0]]},convert$3.gray.cmyk=function(e){return[0,0,0,e[0]]},convert$3.gray.lab=function(e){return[e[0],0,0]},convert$3.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},convert$3.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const conversions$4=conversions$5;function buildGraph$1(){const e={},t=Object.keys(conversions$4);for(let r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function deriveBFS$1(e){const t=buildGraph$1(),r=[e];for(t[e].distance=0;r.length;){const e=r.pop(),n=Object.keys(conversions$4[e]);for(let o=n.length,s=0;s<o;s++){const o=n[s],i=t[o];-1===i.distance&&(i.distance=t[e].distance+1,i.parent=e,r.unshift(o))}}return t}function link$1(e,t){return function(r){return t(e(r))}}function wrapConversion$1(e,t){const r=[t[e].parent,e];let n=conversions$4[t[e].parent][e],o=t[e].parent;for(;t[o].parent;)r.unshift(t[o].parent),n=link$1(conversions$4[t[o].parent][o],n),o=t[o].parent;return n.conversion=r,n}var route$3=function(e){const t=deriveBFS$1(e),r={},n=Object.keys(t);for(let e=n.length,o=0;o<e;o++){const e=n[o];null!==t[e].parent&&(r[e]=wrapConversion$1(e,t))}return r};const conversions$3=conversions$5,route$2=route$3,convert$2={},models$1=Object.keys(conversions$3);function wrapRaw$1(e){const t=function(...t){const r=t[0];return null==r?r:(r.length>1&&(t=r),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}function wrapRounded$1(e){const t=function(...t){const r=t[0];if(null==r)return r;r.length>1&&(t=r);const n=e(t);if("object"==typeof n)for(let e=n.length,t=0;t<e;t++)n[t]=Math.round(n[t]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}models$1.forEach((e=>{convert$2[e]={},Object.defineProperty(convert$2[e],"channels",{value:conversions$3[e].channels}),Object.defineProperty(convert$2[e],"labels",{value:conversions$3[e].labels});const t=route$2(e);Object.keys(t).forEach((r=>{const n=t[r];convert$2[e][r]=wrapRounded$1(n),convert$2[e][r].raw=wrapRaw$1(n)}))}));var colorConvert$1=convert$2;!function(e){const t=(e,t)=>(...r)=>`[${e(...r)+t}m`,r=(e,t)=>(...r)=>{const n=e(...r);return`[${38+t};5;${n}m`},n=(e,t)=>(...r)=>{const n=e(...r);return`[${38+t};2;${n[0]};${n[1]};${n[2]}m`},o=e=>e,s=(e,t,r)=>[e,t,r],i=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{const n=r();return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})};let a;const l=(e,t,r,n)=>{void 0===a&&(a=colorConvert$1);const o=n?10:0,s={};for(const[n,i]of Object.entries(a)){const a="ansi16"===n?"ansi":n;n===t?s[a]=e(r,o):"object"==typeof i&&(s[a]=e(i[t],o))}return s};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[t,r]of Object.entries(a)){for(const[t,n]of Object.entries(r))a[t]={open:`[${n[0]}m`,close:`[${n[1]}m`},r[t]=a[t],e.set(n[0],n[1]);Object.defineProperty(a,t,{value:r,enumerable:!1})}return Object.defineProperty(a,"codes",{value:e,enumerable:!1}),a.color.close="[39m",a.bgColor.close="[49m",i(a.color,"ansi",(()=>l(t,"ansi16",o,!1))),i(a.color,"ansi256",(()=>l(r,"ansi256",o,!1))),i(a.color,"ansi16m",(()=>l(n,"rgb",s,!1))),i(a.bgColor,"ansi",(()=>l(t,"ansi16",o,!0))),i(a.bgColor,"ansi256",(()=>l(r,"ansi256",o,!0))),i(a.bgColor,"ansi16m",(()=>l(n,"rgb",s,!0))),a}})}(ansiStyles$3);var browser$1={stdout:!1,stderr:!1};const stringReplaceAll$3=(e,t,r)=>{let n=e.indexOf(t);if(-1===n)return e;const o=t.length;let s=0,i="";do{i+=e.substr(s,n-s)+t+r,s=n+o,n=e.indexOf(t,s)}while(-1!==n);return i+=e.substr(s),i},stringEncaseCRLFWithFirstIndex$3=(e,t,r,n)=>{let o=0,s="";do{const i="\r"===e[n-1];s+=e.substr(o,(i?n-1:n)-o)+t+(i?"\r\n":"\n")+r,o=n+1,n=e.indexOf("\n",o)}while(-1!==n);return s+=e.substr(o),s};var util$1={stringReplaceAll:stringReplaceAll$3,stringEncaseCRLFWithFirstIndex:stringEncaseCRLFWithFirstIndex$3};const TEMPLATE_REGEX$1=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,STYLE_REGEX$1=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,STRING_REGEX$1=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,ESCAPE_REGEX$1=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,ESCAPES$1=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function unescape$1(e){const t="u"===e[0],r="{"===e[1];return t&&!r&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):t&&r?String.fromCodePoint(parseInt(e.slice(2,-1),16)):ESCAPES$1.get(e)||e}function parseArguments$1(e,t){const r=[],n=t.trim().split(/\s*,\s*/g);let o;for(const t of n){const n=Number(t);if(Number.isNaN(n)){if(!(o=t.match(STRING_REGEX$1)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);r.push(o[2].replace(ESCAPE_REGEX$1,((e,t,r)=>t?unescape$1(t):r)))}else r.push(n)}return r}function parseStyle$1(e){STYLE_REGEX$1.lastIndex=0;const t=[];let r;for(;null!==(r=STYLE_REGEX$1.exec(e));){const e=r[1];if(r[2]){const n=parseArguments$1(e,r[2]);t.push([e].concat(n))}else t.push([e])}return t}function buildStyle$1(e,t){const r={};for(const e of t)for(const t of e.styles)r[t[0]]=e.inverse?null:t.slice(1);let n=e;for(const[e,t]of Object.entries(r))if(Array.isArray(t)){if(!(e in n))throw new Error(`Unknown Chalk style: ${e}`);n=t.length>0?n[e](...t):n[e]}return n}var templates$1=(e,t)=>{const r=[],n=[];let o=[];if(t.replace(TEMPLATE_REGEX$1,((t,s,i,a,l,c)=>{if(s)o.push(unescape$1(s));else if(a){const t=o.join("");o=[],n.push(0===r.length?t:buildStyle$1(e,r)(t)),r.push({inverse:i,styles:parseStyle$1(a)})}else if(l){if(0===r.length)throw new Error("Found extraneous } in Chalk template literal");n.push(buildStyle$1(e,r)(o.join(""))),o=[],r.pop()}else o.push(c)})),n.push(o.join("")),r.length>0){const e=`Chalk template literal is missing ${r.length} closing bracket${1===r.length?"":"s"} (\`}\`)`;throw new Error(e)}return n.join("")};const ansiStyles$2=ansiStyles$3.exports,{stdout:stdoutColor$1,stderr:stderrColor$1}=browser$1,{stringReplaceAll:stringReplaceAll$2,stringEncaseCRLFWithFirstIndex:stringEncaseCRLFWithFirstIndex$2}=util$1,{isArray:isArray$1}=Array,levelMapping$1=["ansi","ansi","ansi256","ansi16m"],styles$1=Object.create(null),applyOptions$1=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const r=stdoutColor$1?stdoutColor$1.level:0;e.level=void 0===t.level?r:t.level};class ChalkClass$1{constructor(e){return chalkFactory$1(e)}}const chalkFactory$1=e=>{const t={};return applyOptions$1(t,e),t.template=(...e)=>chalkTag$1(t.template,...e),Object.setPrototypeOf(t,Chalk$1.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=ChalkClass$1,t.template};function Chalk$1(e){return chalkFactory$1(e)}for(const[e,t]of Object.entries(ansiStyles$2))styles$1[e]={get(){const r=createBuilder$1(this,createStyler$1(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:r}),r}};styles$1.visible={get(){const e=createBuilder$1(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};const usedModels$1=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const e of usedModels$1)styles$1[e]={get(){const{level:t}=this;return function(...r){const n=createStyler$1(ansiStyles$2.color[levelMapping$1[t]][e](...r),ansiStyles$2.color.close,this._styler);return createBuilder$1(this,n,this._isEmpty)}}};for(const e of usedModels$1){const t="bg"+e[0].toUpperCase()+e.slice(1);styles$1[t]={get(){const{level:t}=this;return function(...r){const n=createStyler$1(ansiStyles$2.bgColor[levelMapping$1[t]][e](...r),ansiStyles$2.bgColor.close,this._styler);return createBuilder$1(this,n,this._isEmpty)}}}}const proto$1=Object.defineProperties((()=>{}),{...styles$1,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),createStyler$1=(e,t,r)=>{let n,o;return void 0===r?(n=e,o=t):(n=r.openAll+e,o=t+r.closeAll),{open:e,close:t,openAll:n,closeAll:o,parent:r}},createBuilder$1=(e,t,r)=>{const n=(...e)=>isArray$1(e[0])&&isArray$1(e[0].raw)?applyStyle$1(n,chalkTag$1(n,...e)):applyStyle$1(n,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(n,proto$1),n._generator=e,n._styler=t,n._isEmpty=r,n},applyStyle$1=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let r=e._styler;if(void 0===r)return t;const{openAll:n,closeAll:o}=r;if(-1!==t.indexOf(""))for(;void 0!==r;)t=stringReplaceAll$2(t,r.close,r.open),r=r.parent;const s=t.indexOf("\n");return-1!==s&&(t=stringEncaseCRLFWithFirstIndex$2(t,o,n,s)),n+t+o};let template$1;const chalkTag$1=(e,...t)=>{const[r]=t;if(!isArray$1(r)||!isArray$1(r.raw))return t.join(" ");const n=t.slice(1),o=[r.raw[0]];for(let e=1;e<r.length;e++)o.push(String(n[e-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[e]));return void 0===template$1&&(template$1=templates$1),template$1(e,o.join(""))};Object.defineProperties(Chalk$1.prototype,styles$1);const chalk$1=Chalk$1();chalk$1.supportsColor=stdoutColor$1,chalk$1.stderr=Chalk$1({level:stderrColor$1?stderrColor$1.level:0}),chalk$1.stderr.supportsColor=stderrColor$1;var source$1=chalk$1,ansiStyles$1={exports:{}},colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const cssKeywords=colorName,reverseKeywords={};for(const e of Object.keys(cssKeywords))reverseKeywords[cssKeywords[e]]=e;const convert$1={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var conversions$2=convert$1;for(const e of Object.keys(convert$1)){if(!("channels"in convert$1[e]))throw new Error("missing channels property: "+e);if(!("labels"in convert$1[e]))throw new Error("missing channel labels property: "+e);if(convert$1[e].labels.length!==convert$1[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:r}=convert$1[e];delete convert$1[e].channels,delete convert$1[e].labels,Object.defineProperty(convert$1[e],"channels",{value:t}),Object.defineProperty(convert$1[e],"labels",{value:r})}function comparativeDistance(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}convert$1.rgb.hsl=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,o=Math.min(t,r,n),s=Math.max(t,r,n),i=s-o;let a,l;s===o?a=0:t===s?a=(r-n)/i:r===s?a=2+(n-t)/i:n===s&&(a=4+(t-r)/i),a=Math.min(60*a,360),a<0&&(a+=360);const c=(o+s)/2;return l=s===o?0:c<=.5?i/(s+o):i/(2-s-o),[a,100*l,100*c]},convert$1.rgb.hsv=function(e){let t,r,n,o,s;const i=e[0]/255,a=e[1]/255,l=e[2]/255,c=Math.max(i,a,l),u=c-Math.min(i,a,l),p=function(e){return(c-e)/6/u+.5};return 0===u?(o=0,s=0):(s=u/c,t=p(i),r=p(a),n=p(l),i===c?o=n-r:a===c?o=1/3+t-n:l===c&&(o=2/3+r-t),o<0?o+=1:o>1&&(o-=1)),[360*o,100*s,100*c]},convert$1.rgb.hwb=function(e){const t=e[0],r=e[1];let n=e[2];const o=convert$1.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[o,100*s,100*n]},convert$1.rgb.cmyk=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,o=Math.min(1-t,1-r,1-n);return[100*((1-t-o)/(1-o)||0),100*((1-r-o)/(1-o)||0),100*((1-n-o)/(1-o)||0),100*o]},convert$1.rgb.keyword=function(e){const t=reverseKeywords[e];if(t)return t;let r,n=1/0;for(const t of Object.keys(cssKeywords)){const o=comparativeDistance(e,cssKeywords[t]);o<n&&(n=o,r=t)}return r},convert$1.keyword.rgb=function(e){return cssKeywords[e]},convert$1.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;return[100*(.4124*t+.3576*r+.1805*n),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},convert$1.rgb.lab=function(e){const t=convert$1.rgb.xyz(e);let r=t[0],n=t[1],o=t[2];r/=95.047,n/=100,o/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;return[116*n-16,500*(r-n),200*(n-o)]},convert$1.hsl.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;let o,s,i;if(0===r)return i=255*n,[i,i,i];o=n<.5?n*(1+r):n+r-n*r;const a=2*n-o,l=[0,0,0];for(let e=0;e<3;e++)s=t+1/3*-(e-1),s<0&&s++,s>1&&s--,i=6*s<1?a+6*(o-a)*s:2*s<1?o:3*s<2?a+(o-a)*(2/3-s)*6:a,l[e]=255*i;return l},convert$1.hsl.hsv=function(e){const t=e[0];let r=e[1]/100,n=e[2]/100,o=r;const s=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,o*=s<=1?s:2-s;return[t,100*(0===n?2*o/(s+o):2*r/(n+r)),100*((n+r)/2)]},convert$1.hsv.rgb=function(e){const t=e[0]/60,r=e[1]/100;let n=e[2]/100;const o=Math.floor(t)%6,s=t-Math.floor(t),i=255*n*(1-r),a=255*n*(1-r*s),l=255*n*(1-r*(1-s));switch(n*=255,o){case 0:return[n,l,i];case 1:return[a,n,i];case 2:return[i,n,l];case 3:return[i,a,n];case 4:return[l,i,n];case 5:return[n,i,a]}},convert$1.hsv.hsl=function(e){const t=e[0],r=e[1]/100,n=e[2]/100,o=Math.max(n,.01);let s,i;i=(2-r)*n;const a=(2-r)*o;return s=r*o,s/=a<=1?a:2-a,s=s||0,i/=2,[t,100*s,100*i]},convert$1.hwb.rgb=function(e){const t=e[0]/360;let r=e[1]/100,n=e[2]/100;const o=r+n;let s;o>1&&(r/=o,n/=o);const i=Math.floor(6*t),a=1-n;s=6*t-i,0!=(1&i)&&(s=1-s);const l=r+s*(a-r);let c,u,p;switch(i){default:case 6:case 0:c=a,u=l,p=r;break;case 1:c=l,u=a,p=r;break;case 2:c=r,u=a,p=l;break;case 3:c=r,u=l,p=a;break;case 4:c=l,u=r,p=a;break;case 5:c=a,u=r,p=l}return[255*c,255*u,255*p]},convert$1.cmyk.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},convert$1.xyz.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100;let o,s,i;return o=3.2406*t+-1.5372*r+-.4986*n,s=-.9689*t+1.8758*r+.0415*n,i=.0557*t+-.204*r+1.057*n,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),i=Math.min(Math.max(0,i),1),[255*o,255*s,255*i]},convert$1.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];t/=95.047,r/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;return[116*r-16,500*(t-r),200*(r-n)]},convert$1.lab.xyz=function(e){let t,r,n;r=(e[0]+16)/116,t=e[1]/500+r,n=r-e[2]/200;const o=r**3,s=t**3,i=n**3;return r=o>.008856?o:(r-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,n=i>.008856?i:(n-16/116)/7.787,t*=95.047,r*=100,n*=108.883,[t,r,n]},convert$1.lab.lch=function(e){const t=e[0],r=e[1],n=e[2];let o;o=360*Math.atan2(n,r)/2/Math.PI,o<0&&(o+=360);return[t,Math.sqrt(r*r+n*n),o]},convert$1.lch.lab=function(e){const t=e[0],r=e[1],n=e[2]/360*2*Math.PI;return[t,r*Math.cos(n),r*Math.sin(n)]},convert$1.rgb.ansi16=function(e,t=null){const[r,n,o]=e;let s=null===t?convert$1.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),0===s)return 30;let i=30+(Math.round(o/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return 2===s&&(i+=60),i},convert$1.hsv.ansi16=function(e){return convert$1.rgb.ansi16(convert$1.hsv.rgb(e),e[2])},convert$1.rgb.ansi256=function(e){const t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},convert$1.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},convert$1.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},convert$1.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},convert$1.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];3===t[0].length&&(r=r.split("").map((e=>e+e)).join(""));const n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},convert$1.rgb.hcg=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,o=Math.max(Math.max(t,r),n),s=Math.min(Math.min(t,r),n),i=o-s;let a,l;return a=i<1?s/(1-i):0,l=i<=0?0:o===t?(r-n)/i%6:o===r?2+(n-t)/i:4+(t-r)/i,l/=6,l%=1,[360*l,100*i,100*a]},convert$1.hsl.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r);let o=0;return n<1&&(o=(r-.5*n)/(1-n)),[e[0],100*n,100*o]},convert$1.hsv.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=t*r;let o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],100*n,100*o]},convert$1.hcg.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];const o=[0,0,0],s=t%1*6,i=s%1,a=1-i;let l=0;switch(Math.floor(s)){case 0:o[0]=1,o[1]=i,o[2]=0;break;case 1:o[0]=a,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=i;break;case 3:o[0]=0,o[1]=a,o[2]=1;break;case 4:o[0]=i,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=a}return l=(1-r)*n,[255*(r*o[0]+l),255*(r*o[1]+l),255*(r*o[2]+l)]},convert$1.hcg.hsv=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);let n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},convert$1.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},convert$1.hcg.hwb=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},convert$1.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,n=r-t;let o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],100*n,100*o]},convert$1.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},convert$1.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},convert$1.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},convert$1.gray.hsl=function(e){return[0,0,e[0]]},convert$1.gray.hsv=convert$1.gray.hsl,convert$1.gray.hwb=function(e){return[0,100,e[0]]},convert$1.gray.cmyk=function(e){return[0,0,0,e[0]]},convert$1.gray.lab=function(e){return[e[0],0,0]},convert$1.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},convert$1.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const conversions$1=conversions$2;function buildGraph(){const e={},t=Object.keys(conversions$1);for(let r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function deriveBFS(e){const t=buildGraph(),r=[e];for(t[e].distance=0;r.length;){const e=r.pop(),n=Object.keys(conversions$1[e]);for(let o=n.length,s=0;s<o;s++){const o=n[s],i=t[o];-1===i.distance&&(i.distance=t[e].distance+1,i.parent=e,r.unshift(o))}}return t}function link(e,t){return function(r){return t(e(r))}}function wrapConversion(e,t){const r=[t[e].parent,e];let n=conversions$1[t[e].parent][e],o=t[e].parent;for(;t[o].parent;)r.unshift(t[o].parent),n=link(conversions$1[t[o].parent][o],n),o=t[o].parent;return n.conversion=r,n}var route$1=function(e){const t=deriveBFS(e),r={},n=Object.keys(t);for(let e=n.length,o=0;o<e;o++){const e=n[o];null!==t[e].parent&&(r[e]=wrapConversion(e,t))}return r};const conversions=conversions$2,route=route$1,convert={},models=Object.keys(conversions);function wrapRaw(e){const t=function(...t){const r=t[0];return null==r?r:(r.length>1&&(t=r),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}function wrapRounded(e){const t=function(...t){const r=t[0];if(null==r)return r;r.length>1&&(t=r);const n=e(t);if("object"==typeof n)for(let e=n.length,t=0;t<e;t++)n[t]=Math.round(n[t]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}models.forEach((e=>{convert[e]={},Object.defineProperty(convert[e],"channels",{value:conversions[e].channels}),Object.defineProperty(convert[e],"labels",{value:conversions[e].labels});const t=route(e);Object.keys(t).forEach((r=>{const n=t[r];convert[e][r]=wrapRounded(n),convert[e][r].raw=wrapRaw(n)}))}));var colorConvert=convert;!function(e){const t=(e,t)=>(...r)=>`[${e(...r)+t}m`,r=(e,t)=>(...r)=>{const n=e(...r);return`[${38+t};5;${n}m`},n=(e,t)=>(...r)=>{const n=e(...r);return`[${38+t};2;${n[0]};${n[1]};${n[2]}m`},o=e=>e,s=(e,t,r)=>[e,t,r],i=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{const n=r();return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})};let a;const l=(e,t,r,n)=>{void 0===a&&(a=colorConvert);const o=n?10:0,s={};for(const[n,i]of Object.entries(a)){const a="ansi16"===n?"ansi":n;n===t?s[a]=e(r,o):"object"==typeof i&&(s[a]=e(i[t],o))}return s};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[t,r]of Object.entries(a)){for(const[t,n]of Object.entries(r))a[t]={open:`[${n[0]}m`,close:`[${n[1]}m`},r[t]=a[t],e.set(n[0],n[1]);Object.defineProperty(a,t,{value:r,enumerable:!1})}return Object.defineProperty(a,"codes",{value:e,enumerable:!1}),a.color.close="[39m",a.bgColor.close="[49m",i(a.color,"ansi",(()=>l(t,"ansi16",o,!1))),i(a.color,"ansi256",(()=>l(r,"ansi256",o,!1))),i(a.color,"ansi16m",(()=>l(n,"rgb",s,!1))),i(a.bgColor,"ansi",(()=>l(t,"ansi16",o,!0))),i(a.bgColor,"ansi256",(()=>l(r,"ansi256",o,!0))),i(a.bgColor,"ansi16m",(()=>l(n,"rgb",s,!0))),a}})}(ansiStyles$1);var browser={stdout:!1,stderr:!1};const stringReplaceAll$1=(e,t,r)=>{let n=e.indexOf(t);if(-1===n)return e;const o=t.length;let s=0,i="";do{i+=e.substr(s,n-s)+t+r,s=n+o,n=e.indexOf(t,s)}while(-1!==n);return i+=e.substr(s),i},stringEncaseCRLFWithFirstIndex$1=(e,t,r,n)=>{let o=0,s="";do{const i="\r"===e[n-1];s+=e.substr(o,(i?n-1:n)-o)+t+(i?"\r\n":"\n")+r,o=n+1,n=e.indexOf("\n",o)}while(-1!==n);return s+=e.substr(o),s};var util={stringReplaceAll:stringReplaceAll$1,stringEncaseCRLFWithFirstIndex:stringEncaseCRLFWithFirstIndex$1};const TEMPLATE_REGEX=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,STYLE_REGEX=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,STRING_REGEX=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,ESCAPE_REGEX=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,ESCAPES=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function unescape(e){const t="u"===e[0],r="{"===e[1];return t&&!r&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):t&&r?String.fromCodePoint(parseInt(e.slice(2,-1),16)):ESCAPES.get(e)||e}function parseArguments(e,t){const r=[],n=t.trim().split(/\s*,\s*/g);let o;for(const t of n){const n=Number(t);if(Number.isNaN(n)){if(!(o=t.match(STRING_REGEX)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);r.push(o[2].replace(ESCAPE_REGEX,((e,t,r)=>t?unescape(t):r)))}else r.push(n)}return r}function parseStyle(e){STYLE_REGEX.lastIndex=0;const t=[];let r;for(;null!==(r=STYLE_REGEX.exec(e));){const e=r[1];if(r[2]){const n=parseArguments(e,r[2]);t.push([e].concat(n))}else t.push([e])}return t}function buildStyle(e,t){const r={};for(const e of t)for(const t of e.styles)r[t[0]]=e.inverse?null:t.slice(1);let n=e;for(const[e,t]of Object.entries(r))if(Array.isArray(t)){if(!(e in n))throw new Error(`Unknown Chalk style: ${e}`);n=t.length>0?n[e](...t):n[e]}return n}var templates=(e,t)=>{const r=[],n=[];let o=[];if(t.replace(TEMPLATE_REGEX,((t,s,i,a,l,c)=>{if(s)o.push(unescape(s));else if(a){const t=o.join("");o=[],n.push(0===r.length?t:buildStyle(e,r)(t)),r.push({inverse:i,styles:parseStyle(a)})}else if(l){if(0===r.length)throw new Error("Found extraneous } in Chalk template literal");n.push(buildStyle(e,r)(o.join(""))),o=[],r.pop()}else o.push(c)})),n.push(o.join("")),r.length>0){const e=`Chalk template literal is missing ${r.length} closing bracket${1===r.length?"":"s"} (\`}\`)`;throw new Error(e)}return n.join("")};const ansiStyles=ansiStyles$1.exports,{stdout:stdoutColor,stderr:stderrColor}=browser,{stringReplaceAll:stringReplaceAll,stringEncaseCRLFWithFirstIndex:stringEncaseCRLFWithFirstIndex}=util,{isArray:isArray}=Array,levelMapping=["ansi","ansi","ansi256","ansi16m"],styles=Object.create(null),applyOptions=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const r=stdoutColor?stdoutColor.level:0;e.level=void 0===t.level?r:t.level};class ChalkClass{constructor(e){return chalkFactory(e)}}const chalkFactory=e=>{const t={};return applyOptions(t,e),t.template=(...e)=>chalkTag(t.template,...e),Object.setPrototypeOf(t,Chalk.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=ChalkClass,t.template};function Chalk(e){return chalkFactory(e)}for(const[e,t]of Object.entries(ansiStyles))styles[e]={get(){const r=createBuilder(this,createStyler(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:r}),r}};styles.visible={get(){const e=createBuilder(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};const usedModels=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const e of usedModels)styles[e]={get(){const{level:t}=this;return function(...r){const n=createStyler(ansiStyles.color[levelMapping[t]][e](...r),ansiStyles.color.close,this._styler);return createBuilder(this,n,this._isEmpty)}}};for(const e of usedModels){const t="bg"+e[0].toUpperCase()+e.slice(1);styles[t]={get(){const{level:t}=this;return function(...r){const n=createStyler(ansiStyles.bgColor[levelMapping[t]][e](...r),ansiStyles.bgColor.close,this._styler);return createBuilder(this,n,this._isEmpty)}}}}const proto=Object.defineProperties((()=>{}),{...styles,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),createStyler=(e,t,r)=>{let n,o;return void 0===r?(n=e,o=t):(n=r.openAll+e,o=t+r.closeAll),{open:e,close:t,openAll:n,closeAll:o,parent:r}},createBuilder=(e,t,r)=>{const n=(...e)=>isArray(e[0])&&isArray(e[0].raw)?applyStyle(n,chalkTag(n,...e)):applyStyle(n,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(n,proto),n._generator=e,n._styler=t,n._isEmpty=r,n},applyStyle=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let r=e._styler;if(void 0===r)return t;const{openAll:n,closeAll:o}=r;if(-1!==t.indexOf(""))for(;void 0!==r;)t=stringReplaceAll(t,r.close,r.open),r=r.parent;const s=t.indexOf("\n");return-1!==s&&(t=stringEncaseCRLFWithFirstIndex(t,o,n,s)),n+t+o};let template;const chalkTag=(e,...t)=>{const[r]=t;if(!isArray(r)||!isArray(r.raw))return t.join(" ");const n=t.slice(1),o=[r.raw[0]];for(let e=1;e<r.length;e++)o.push(String(n[e-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[e]));return void 0===template&&(template=templates),template(e,o.join(""))};Object.defineProperties(Chalk.prototype,styles);const chalk=Chalk();chalk.supportsColor=stdoutColor,chalk.stderr=Chalk({level:stderrColor?stderrColor.level:0}),chalk.stderr.supportsColor=stderrColor;var source=chalk;const{blue:blue,cyan:cyan,gray:gray,green:green,magenta:magenta,white:white,yellow:yellow}=source;function colorize(e){let t=[{pattern:/^fn +[a-z_][a-z_0-9]*/i,action:function(e,t){let r=e.slice(2).trim(" "),n=e.length-r.length-2;t.push(magenta("fn")),t.push(white(" ".repeat(n))),t.push(blue(r))}},{pattern:/^[-=]> +[a-z_][a-z_0-9]*/i,action:function(e,t){let r=e.slice(2).trim(" "),n=e.length-r.length-2;t.push(magenta(e.slice(0,2))),t.push(white(" ".repeat(n))),t.push(blue(r))}},{pattern:/^-> *\* *[a-z_][a-z_0-9]*/i,action:function(e,t){let r=e.match(/[a-z_][a-z_0-9]*/)[0],n=e.match(/-> *\*/)[0],o=e.length-r.length-n.length;t.push(magenta(n)),t.push(white(" ".repeat(o))),t.push(blue(r))}},{color:gray,pattern:/^--.*?($|\n)/},{color:green,pattern:/^#[^\[\] \r\n]+/i},{color:magenta,pattern:/^(export|fn|else|if|not|or|and|import|from|as)(?![a-zA-Z_-])/},{color:yellow,pattern:/^(true|false)/},{color:green,pattern:/^https?:[^ \r\n]+/},{color:cyan,pattern:/^(->|=>)/},{color:cyan,pattern:/^(!|!=|=|>|<|>=|<=)/},{color:cyan,pattern:/^([\[\]()])/},{color:cyan,pattern:/^[-+/*%^]/},{color:cyan,pattern:/^(([@][a-z][a-z0-9_]*)|[.:@])/i},{color:yellow,pattern:/^(0|-?[1-9][0-9']*)(\.[0-9']+)?/},{color:white,pattern:/^[a-z_][a-z_0-9]*('s? )?/i},{color:green,pattern:/^('([^\\]|\\.)*?'|:\S+)/},{color:white,pattern:/^\S+/},{color:white,pattern:/^(\r\n|[\r\n])/},{color:white,pattern:/\s+/}],r=[],n=0;for(;n<=e.length;){for(let o=0;o<t.length;o++){let s=e.slice(n).match(t[o].pattern);if(null!=s){null!=t[o].action?t[o].action(s[0],r):r.push(t[o].color(s[0])),n+=s[0].length-1;break}}n++}return r.join("")}const wrap=(e,t)=>rule_1(((t,r,n)=>{const o=e(t,r,n);o.lambda=o.lambda||[];for(const e of[t,r])"wrapped"!=e.type&&"decorators"!=e.type&&("parameter"==e.type&&"parameter"!==o.type?o.lambda.push(e):e.lambda?.length&&e!==o&&o.lambda.push(...e.lambda));return o.meta={location:t.meta?.location||{file:t.file,line:t.line,column:t.column}},o}),t),ignore=(...e)=>map_1(e,wrap(lPluck_1)),ranges$1=["range","rangeFull","rangeBy","byRange","ranger"],values=["symbol","parameter","number","array","string","formattedString","hashmap","propertyAccess",...ranges$1,"slice","set","wrapped","awaited","parallelFn","null","true","false","inCheck","group"],arrayLike=["array","symbol","propertyAccess","slice"],expressions=["math","comparison","logical","logicalNot","call","parameterCall","arrowAssignment"],controls=["conditional","fullConditional"],topLevels=[...controls,"function","decoratedFunction","decoratedExportedFunction",...values,"assignment","arrowAssignment","typedAssignment",...expressions,"importStatement","typeDef","listDef"],rootLevels=[...topLevels,"exported","exportedFunction"],lexerTokens=["if","else","fn","await","import","as","from","export","and","or","not","by","in","number","fmtStart","fmtEnd","strEscape","fmtExprStart","ender","fmtExprEnd","fmtStr","format","string","comment","outdent","indent","space","awaitAll","symbol","parameter","format","slicer","hash","ranger","dot","pike","lCurly","rCurly","lSquare","rSquare","lParen","ender","rParen","colon","arrow","subOp","addOp","gte","gt","lte","lt","eq","fatArrow","assign","divOp","modOp","powOp","mulOp","lineBreak","groupOpen","groupClose","type","is"],_wrap=wrap,_ignore=ignore,_topLevels=topLevels,_rootLevels=rootLevels,_expressions=expressions,_arrayLike=arrayLike,_ranges=ranges$1,_values=values,_lexerTokens=lexerTokens;var _await={await:{...map_1([..._values,"call","parallelFn","method"],_wrap(((e,t)=>({type:"awaited",await:e,value:t})),.4))},awaitAll:{...map_1([..._values,"call","parallelFn","method"],_wrap(((e,t)=>({type:"awaited",all:!0,await:e,value:t})),.4))}},_exports={export:{function:_wrap(((e,t)=>({type:"exportedFunction",name:t.name,value:t,export:e}))),symbol:_wrap(((e,t)=>({type:"exported",name:t,value:t,export:e}))),assignment:_wrap(((e,t)=>({type:"exported",name:t.name,value:t,export:e}))),typedAssignment:_wrap(((e,t)=>({type:"exported",name:t.assignment.name,value:t,export:e}))),typeDef:_wrap(((e,t)=>({type:"exported",name:t.name,value:t,export:e}))),listDef:_wrap(((e,t)=>({type:"exported",name:t.name,value:t,export:e})))}},_in={...map_1([..._expressions,..._values],{in:_wrap(((e,t)=>({type:"inCheckOpen",lhs:e,start:t})),.1)}),inCheckOpen:{...map_1([..._expressions,..._values],_wrap(((e,t)=>(e.type="inCheck",e.rhs=t,e))))}},arrays={lSquare:{..._ignore("lineBreak"),...map_1([..._values,..._expressions],_wrap(((e,t)=>({type:"arrayOpen",start:e,items:[t]})),4.1)),rSquare:_wrap(((e,t)=>({type:"array",start:e,end:t,items:[]})))},arrayOpen:{..._ignore("lineBreak"),...map_1([..._values,..._expressions],_wrap(((e,t)=>(e.items.push(t),e)),4.1)),rSquare:_wrap(((e,t)=>(e.type="array",e.end=t,e)))}},assignments=merge_1({...map_1(["symbol","propertyAccess","slice"],{assign:_wrap(((e,t)=>({type:"assignOpen",name:e,assign:t})),10)}),assignOpen:{...map_1([..._values,..._expressions],_wrap(((e,t)=>(e.type="assignment",e.value=t,e)),.001))}},{...map_1(["symbol","propertyAccess"],{assignment:_wrap(((e,t)=>({type:"typedAssignment",assignment:t,valueType:e})))})});const forbidden=["decoratedExportedFunction","importStatement"],blockLevels=_topLevels.filter((e=>!forbidden.includes(e)));var blocks={lineBreak:{indent:_wrap(((e,t)=>t),99)},indent:{...map_1(blockLevels,_wrap(((e,t)=>({type:"blockOpen",content:[t]})),0))},blockOpen:{..._ignore("lineBreak"),...map_1(blockLevels,_wrap(((e,t)=>(e.content.push(t),e)),0)),outdent:_wrap((e=>(e.type="block",e)))}},boosters=merge_1({...map_1(["symbol","propertyAccess","wrapped","slice","range","parallelFn","decorator","decoratorAccess"],{...map_1(["groupStart"],_wrap((()=>{}),.5))})},{...map_1(["symbol","propertyAccess","wrapped","slice","parallelFn","decorator","decoratorAccess"],{...map_1(["hash"],_wrap((()=>{}),.05))})}),calls=merge_1({...map_1(["symbol","parallelFn","propertyAccess","method","wrapped","parameter","decorator","decoratorAccess"],{...map_1([..._values,..._expressions],_wrap(((e,t)=>(e.isFn=!0,{type:"callOpen",fn:e,args:[t]})),3))}),callOpen:{...map_1([..._values,..._expressions],_wrap(((e,t)=>(e.args.push(t),e)),4)),...map_1(["lineBreak","ender"],_wrap((e=>{const t="decorator"===e.fn.type||"decoratorAccess"===e.fn.type;return e.type=t?"decoratorCall":"call",e}),1))},pipeOpen:{...map_1(["call","decoratorCall"],_wrap(((e,t)=>(t.args.unshift(e.data),t.isMap=e.isMap,t.isFlow=!0,t)))),...map_1(["symbol","parallelFn","method","propertyAccess","wrapped","parameter"],_wrap(((e,t)=>(t.isFn=!0,{type:"callOpen",fn:t,args:[e.data],isMap:e.isMap,isFlow:!0})),1)),awaited:_wrap(((e,t)=>{const{data:r,isMap:n}=e;return t.value.type.startsWith("call")?(t.value.args.unshift(r),t.value.isMap=n,t.value.awaited=!0,t.value.await=t.await,t.value.all=t.all,t.value.isFlow=!0,t.value):{type:"call",fn:t.value,args:[r],isMap:n,awaited:!0,all:t.all,await:t.await,isFlow:!0}}))},arrow:{mulOp:_wrap(((e,t)=>({type:"mapArrow",arrow:e,map:t})),4)}},{...map_1([..._values,..._expressions,"data"],{arrow:_wrap((e=>({type:"pipeOpen",data:e})),.31),mapArrow:_wrap((e=>({type:"pipeOpen",data:e,isMap:!0})),.31)})}),clio$1={...map_1(_rootLevels,{eof:_wrap((e=>({type:"clio",content:[e]})),0),clio:_wrap(((e,t)=>(t.content.unshift(e),t)),0)}),lineBreak:{clio:_wrap(((e,t)=>t),0),eof:_wrap((()=>({type:"clio",content:[]})))}},comparisons={...map_1([..._values,..._expressions],{...map_1(["eq","gt","lt","gte","lte"],_wrap(((e,t)=>({type:"comparisonOpen",lhs:e,op:t,comparisons:[]})),5))}),comparisonOpen:{..._ignore("lineBreak"),...map_1([..._values,..._expressions],_wrap(((e,t)=>({type:"comparison",lhs:e.lhs,comparisons:[...e.comparisons,{op:e.op,rhs:t}]})),6))},comparison:{..._ignore("lineBreak"),...map_1(["eq","gt","lt","gte","lte"],_wrap(((e,t)=>({type:"comparisonOpen",lhs:e.lhs,op:t,comparisons:e.comparisons}))))}},conditionals$1={if:{...map_1(_expressions,_wrap(((e,t)=>({type:"ifOpen",start:e,condition:t})),.05)),...map_1(_values,_wrap(((e,t)=>({type:"ifOpen",start:e,condition:t})),0))},ifOpen:{colon:_wrap((e=>(e.type="ifTail",e)))},ifTail:{..._ignore("lineBreak"),block:_wrap(((e,t)=>({type:"conditional",elseIfs:[],if:{...e,type:"ifBlock",body:t}}))),...map_1([..._expressions,..._values],_wrap(((e,t)=>({type:"conditional",elseIfs:[],if:{...e,type:"ifBlock",body:{type:"block",content:[t]}}})),0))},conditional:{lineBreak:_wrap((e=>e),100),else:_wrap(((e,t)=>({type:"ifElseOpen",if:e.if,elseIfs:e.elseIfs,open:{start:t}})))},ifElseOpen:{colon:_wrap((e=>(e.type="ifElseTail",e))),if:_wrap(((e,t)=>(e.open.if=t,e.type="ifElseIfNoCondition",e)))},ifElseIfNoCondition:{...map_1([..._expressions,..._values],_wrap(((e,t)=>(e.type="ifElseIfOpen",e.open.condition=t,e)),0))},ifElseIfOpen:{colon:_wrap((e=>(e.type="ifElseIfTail",e)))},ifElseIfTail:{..._ignore("lineBreak"),block:_wrap(((e,t)=>({type:"conditional",if:e.if,elseIfs:[...e.elseIfs,{...e.open,type:"elseIfBlock",body:t}],else:e.else}))),...map_1([..._expressions,..._values],_wrap(((e,t)=>{const r={type:"block",content:[t]};return{type:"conditional",if:e.if,elseIfs:[...e.elseIfs,{...e.open,type:"elseIfBlock",body:r}],else:e.else}}),0))},ifElseTail:{..._ignore("lineBreak"),block:_wrap(((e,t)=>({type:"fullConditional",if:e.if,elseIfs:[...e.elseIfs],else:{...e.open,type:"elseBlock",body:t}}))),...map_1([..._expressions,..._values],_wrap(((e,t)=>{const r={type:"block",content:[t]};return{type:"fullConditional",if:e.if,elseIfs:[...e.elseIfs],else:{...e.open,type:"elseBlock",body:r}}}),0))}},decorators={decoratorCall:{..._ignore("lineBreak"),function:_wrap(((e,t)=>(t.type="decoratedFunction",t.decorators=[e],t))),exportedFunction:_wrap(((e,t)=>(t.type="decoratedExportedFunction",t.value.decorators=[e],t))),...map_1(["decoratorCall","decorator","decoratorAccess"],_wrap(((e,t)=>({type:"decorators",decorators:[t,e]})),0))},...map_1(["decorator","decoratorAccess"],{..._ignore("lineBreak"),function:_wrap(((e,t)=>(t.type="decoratedFunction",t.decorators=[e],t))),exportedFunction:_wrap(((e,t)=>(t.type="decoratedExportedFunction",t.value.decorators=[e],t))),...map_1(["decoratorCall","decorator","decoratorAccess"],_wrap(((e,t)=>({type:"decorators",decorators:[t,e]})),0))}),decorators:{..._ignore("lineBreak"),function:_wrap(((e,t)=>(t.type="decoratedFunction",t.decorators=e.decorators,t))),exportedFunction:_wrap(((e,t)=>(t.type="decoratedExportedFunction",t.value.decorators=e.decorators,t))),...map_1(["decoratorCall","decorator","decoratorAccess"],_wrap(((e,t)=>(e.decorators.unshift(t),e)),0))}},fatAssignments={...map_1([..._values,..._expressions],{ender:rule_1((e=>e),.5),fatArrow:_wrap(((e,t)=>({type:"fatArrowOpen",arrow:t,value:e})),.31)}),fatArrowOpen:{...map_1(["symbol","propertyAccess","slice"],_wrap(((e,t)=>(e.type="arrowAssignment",e.name=t,e)),.31))},arrowAssignment:{..._ignore("lineBreak"),arrow:_wrap((e=>({type:"pipeOpen",data:e})))}},formattedStrings={...map_1(["symbol","propertyAccess","slice"],{format:_wrap((e=>({type:"fmtStrFn",fn:e,args:[]})),99)}),fmtStrFn:{fmtStart:_wrap((e=>(e.type="fmtOpen",e)),99)},fmtOpen:{...map_1(["fmtExpr","strEscape","fmtStr"],_wrap(((e,t)=>(e.args.push(t),e)),99)),fmtEnd:_wrap((e=>(e.type="formattedString",e)))},fmtExprStart:{...map_1(["lineBreak"],rule_1(lPluck_1,10)),...map_1([..._values,..._expressions],_wrap(((e,t)=>({type:"fmtExprOpen",start:e,content:t})),.11)),fmtExprEnd:_wrap((()=>({type:"fmtExpr",content:null}))),ender:_wrap((e=>e),100)},fmtExprOpen:{..._ignore("lineBreak"),fmtExprEnd:_wrap(((e,t)=>(e.type="fmtExpr",e.end=t,e)))}},functions={fn:{symbol:_wrap(((e,t)=>({start:e,type:"fnOpen",params:[],name:t})),10)},fnOpen:{symbol:_wrap(((e,t)=>(e.params.push(t),e)),10),colon:_wrap((e=>(e.type="fnTail",e)))},fnTail:{..._ignore("lineBreak"),block:_wrap(((e,t)=>(e.type="function",t.type="return",t.recursefn=e,e.body=t,e)),10),...map_1([..._expressions,..._values],_wrap(((e,t)=>(e.type="function",e.body={type:"return",content:[t]},e)),0))}},hashmaps={hash:{symbol:_wrap(((e,t)=>({type:"hashOpen",key:t,start:e,keyValues:[]})),4.1),indent:_wrap((e=>({type:"hashmapIndent",start:e,keyValues:[],isTopLevel:!0}))),ender:_wrap((e=>({type:"hashmap",start:e,keyValues:[]})))},hashOpen:{colon:_wrap((e=>(e.type="hashOpenColon",e)),4.1)},hashOpenColon:{...map_1(_values,_wrap(((e,t)=>(e.type="hashmap",e.keyValues.push({type:"keyValue",key:e.key,value:t}),e)),4.1)),indent:_wrap(((e,t)=>({type:"hashmapIndent",parent:e,keyValues:[],start:t})))},hashmap:{symbol:_wrap(((e,t)=>(e.key=t,e.type="hashOpen",e)),4.1),indent:_wrap((e=>(e.type="hashmapIndent",e.isTopLevel=!0,e)))},hashIndentOpen:{colon:_wrap((e=>(e.type="hashIndentOpenColon",e)),4.1)},hashIndentOpenColon:{...map_1(["lineBreak"],_wrap(lPluck_1,3)),...map_1(_values,_wrap(((e,t)=>(e.type="hashmapIndent",e.keyValues.push({type:"keyValue",key:e.key,value:t}),e)),4.1)),indent:_wrap(((e,t)=>({type:"hashmapIndent",parent:e,start:t,keyValues:[]})))},hashmapIndent:{...map_1(["lineBreak"],_wrap(lPluck_1,3)),symbol:_wrap(((e,t)=>(e.key=t,e.type="hashIndentOpen",e)),4.1),outdent:_wrap((e=>{const{parent:t,isTopLevel:r}=e;return r?(e.type="hashmap",e):(e.type="hashmap",t.type="hashOpenColon"==t.type?"hashmap":"hashmapIndent",t.keyValues.push({type:"keyValue",key:t.key,value:e}),t)}))}},imports={import:{string:_wrap(((e,t)=>({type:"importStatement",import:e,path:t}))),stringAsClause:_wrap(((e,t)=>({...t,import:e,type:"importStatement"})),99)},from:{string:_wrap(((e,t)=>({type:"fromPath",path:t,from:e,items:[]})),30)},fromPath:{import:_wrap(((e,t)=>({...e,import:t,type:"importFromOpen"})),29)},importFromOpen:{...map_1(["asClause","symbol"],_wrap(((e,t)=>({...e,items:[t],type:"importFromTail"})),31)),indent:_wrap((e=>(e.type="importFromIndented",e.items=[],e)),80)},importFromIndented:{...map_1(["asClause","symbol"],_wrap(((e,t)=>({...e,items:[...e.items,t]})),31)),outdent:_wrap((e=>({...e,type:"importStatement"}))),..._ignore("lineBreak")},importFromTail:{...map_1(["asClause","symbol"],_wrap(((e,t)=>(e.items.push(t),e)),31)),lineBreak:_wrap((e=>({...e,type:"importStatement"})),99)},...map_1(["symbol","mulOp"],{as:_wrap(((e,t)=>({type:"asOpen",lhs:e,as:t})),32)}),asOpen:{symbol:_wrap(((e,t)=>(e.rhs=t,e.type="asClause",e)),33)},string:{as:_wrap(((e,t)=>({type:"stringAsOpen",path:e,as:t})),32)},stringAsOpen:{symbol:_wrap(((e,t)=>({type:"stringAsClause",path:e.path,items:[{type:"asClause",as:e.as,rhs:t,lhs:{type:"mulOp"}}]})),33)}},logicals={...map_1([..._values,..._expressions],{...map_1(["and","or"],_wrap(((e,t)=>({type:"logicalOpen",lhs:e,op:t,logicals:[]})),2))}),logicalOpen:{..._ignore("lineBreak"),...map_1([..._values,..._expressions],_wrap(((e,t)=>({type:"logical",lhs:e.lhs,logicals:[...e.logicals,{op:e.op,rhs:t}]})),3))},logical:{..._ignore("lineBreak"),...map_1(["and","or"],_wrap(((e,t)=>({type:"logicalOpen",lhs:e.lhs,op:t,logicals:e.logicals}))))},not:{..._ignore("lineBreak"),...map_1([..._values,..._expressions],_wrap(((e,t)=>({type:"logicalNot",op:e,rhs:t})),3.5))}},math={...map_1([..._values,"math"],{powOp:_wrap(((e,t)=>({type:"powLhs",lhs:e,op:t})),9),mulOp:_wrap(((e,t)=>({type:"mulLhs",lhs:e,op:t})),8),divOp:_wrap(((e,t)=>({type:"divLhs",lhs:e,op:t})),8),addOp:_wrap(((e,t)=>({type:"addLhs",lhs:e,op:t})),7),subOp:_wrap(((e,t)=>({type:"subLhs",lhs:e,op:t})),7),modOp:_wrap(((e,t)=>({type:"modLhs",lhs:e,op:t})),7)}),...mapfn_1(["add","sub","mul","div","pow","mod"],(e=>[`${e}Lhs`,{..._ignore("lineBreak"),...map_1(_values,_wrap(((t,r)=>({type:"math",value:{type:e,op:t.op,lhs:t.lhs,rhs:r}})),10))}]))},methods={dot:{...map_1(["symbol","propertyAccess","slice"],_wrap(((e,t)=>({type:"method",dot:e,property:t})),11))}},parallelFns={pike:{symbol:_wrap(((e,t)=>({type:"pikeOpen",fn:t,start:e})))},pikeOpen:{pike:_wrap((e=>({type:"parallelFn",fn:e.fn,start:e.start})))}},properties={...map_1(["symbol","propertyAccess","slice","parameter"],{dot:_wrap(((e,t)=>({type:"propertyAccessOpen",lhs:e,dot:t})),912)}),propertyAccessOpen:{symbol:_wrap(((e,t)=>({...e,type:"propertyAccess",rhs:t})),913)},...map_1(["decorator","decoratorAccess"],{dot:_wrap(((e,t)=>({type:"decoratorAccessOpen",lhs:e,dot:t})),912)}),decoratorAccessOpen:{symbol:_wrap(((e,t)=>({...e,type:"decoratorAccess",rhs:t})),913)}},ranges={ranger:{...map_1(_values.filter((e=>!_ranges.includes(e))),_wrap(((e,t)=>({type:"range",location:e,end:t})),43)),by:_wrap(((e,t)=>({location:e,step:t.step,type:"rangeByOpen"})),99)},...map_1(_values.filter((e=>!_ranges.includes(e))),{ranger:_wrap(((e,t)=>({type:"range",start:e,location:t})),99.9)}),range:{...map_1(_values.filter((e=>!_ranges.includes(e))),_wrap(((e,t)=>(e.type="rangeFull",e.end=t,e)),45)),by:_wrap(((e,t)=>({...e,step:t.step,type:"rangeByOpen"})),99)},rangeFull:{by:_wrap(((e,t)=>({...e,step:t.step,type:"rangeByOpen"})),99)},by:{...map_1(_values.filter((e=>!_ranges.includes(e))),_wrap(((e,t)=>({type:"byRange",step:t,location:e})),47))},rangeByOpen:{...map_1(_values.filter((e=>!_ranges.includes(e))),_wrap(((e,t)=>({...e,type:"byRange",step:t,location:e})),47))}},sets={lCurly:{..._ignore("lineBreak"),...map_1([..._values,..._expressions],_wrap(((e,t)=>({type:"setOpen",start:e,items:[t]})))),rCurly:_wrap(((e,t)=>({type:"set",start:e,end:t,items:[]})))},setOpen:{..._ignore("lineBreak"),...map_1([..._values,..._expressions],_wrap(((e,t)=>(e.items.push(t),e)))),rCurly:_wrap(((e,t)=>(e.type="set",e.end=t,e)))}},slices={sliceOpen:{array:_wrap(((e,t)=>(e.type="slice",e.slicer=t,e)),100)},...map_1(_arrayLike,{slicer:_wrap((e=>({type:"sliceOpen",slicee:e})),99)})},wrapped={lParen:{...map_1(["lineBreak"],rule_1(lPluck_1,10)),...map_1([..._values,..._expressions],_wrap(((e,t)=>({type:"wrappedOpen",start:e,content:t})),.1)),rParen:_wrap((()=>({type:"wrapped",content:null}))),ender:_wrap((e=>e),100)},wrappedOpen:{..._ignore("lineBreak"),rParen:_wrap(((e,t)=>(e.type="wrapped",e.end=t,e)))}};const rules$1=merge_1(calls,blocks,parallelFns,functions,math,comparisons,logicals,conditionals$1,arrays,hashmaps,properties,methods,ranges,slices,sets,wrapped,formattedStrings,assignments,fatAssignments,_await,_exports,imports,_in,clio$1,boosters);var groups={groupStart:{...map_1(_lexerTokens,_wrap(((e,t)=>({type:"groupOpen",content:list_1([t]),open:1})),9999))},groupOpen:{...map_1(_lexerTokens,_wrap(((e,t)=>(e.content.push(t),e)),9999)),groupStart:_wrap((e=>(e.open++,e)),9999),groupEnd:_wrap(((e,t)=>(e.open--,e.open?e:bean_1(e.content,rules$1,!0,t).first.item)),9999)}},list={list:{symbol:_wrap(((e,t)=>({start:e,type:"listOpen",members:[],name:t})),10)},listOpen:{colon:_wrap((e=>(e.type="listTail",e)),10)},listTail:{indent:_wrap((e=>(e.type="listTailIndent",e)),10),...map_1(["symbol","propertyAccess"],_wrap(((e,t)=>(e.memberType=t,e.type="listTailSingle",e)),10))},listTailSingle:{lineBreak:_wrap((e=>(e.type="listDef",e)),10)},listTailIndent:{..._ignore("lineBreak"),...map_1(["symbol","propertyAccess"],_wrap(((e,t)=>(e.memberType=t,e.type="listTailIndentComplete",e)),10))},listTailIndentComplete:{..._ignore("lineBreak"),outdent:_wrap((e=>(e.type="listDef",e)),10)}},types$1={type:{symbol:_wrap(((e,t)=>({start:e,type:"typeOpen",members:[],name:t})),10)},typeOpen:{is:_wrap((e=>(e.type="typeOpenIsOpen",e))),colon:_wrap((e=>(e.type="typeTail",e)),10)},typeOpenIsOpen:{...map_1(["symbol","propertyAccess"],_wrap(((e,t)=>(e.extends=t,e.type="typeOpenIs",e))))},typeOpenIs:{colon:_wrap((e=>(e.type="typeTail",e)),10)},typeTail:{indent:_wrap((e=>(e.type="typeTailIndent",e)),10),...map_1(["symbol","propertyAccess"],_wrap(((e,t)=>(e.members.push({type:{type:"symbol",value:"Any"},name:t}),e.type="typeTailSingle",e)),10))},typeTailSingle:{lineBreak:_wrap((e=>(e.type="typeDef",e)),10),...map_1(["symbol","propertyAccess"],_wrap(((e,t)=>(e.members.push({type:{type:"symbol",value:"Any"},name:t}),e)),10))},typeTailIndent:{..._ignore("lineBreak"),outdent:_wrap((e=>(e.type="typeDef",e)),10),...map_1(["symbol","propertyAccess"],_wrap(((e,t)=>(e.curr=t,e.type="typeTailIndentCurr",e)),10))},typeTailIndentCurr:{lineBreak:_wrap((e=>(e.members.push({type:{type:"symbol",value:"Any"},name:e.curr}),e.curr=null,e.type="typeTailIndent",e))),...map_1(["symbol","propertyAccess"],_wrap(((e,t)=>(e.members.push({type:e.curr,name:t}),e.curr=null,e.type="typeTailIndent",e))))}};const rules=merge_1(_await,_exports,_in,arrays,assignments,blocks,boosters,calls,clio$1,comparisons,conditionals$1,decorators,fatAssignments,formattedStrings,functions,groups,hashmaps,imports,list,logicals,math,methods,parallelFns,properties,ranges,sets,slices,types$1,wrapped),{bold:bold,red:red}=source$1,unfinished=["blockOpen","addLhs","mulLhs","subLhs","divLhs","powLhs","comparisonOpen","logicalOpen","fnOpen","fnTail","export"],addLineNumber=(e,t)=>(r,n)=>" "+(n+e+1).toString().padStart(t," ")+" | "+r,getMessage=({file:e,line:t,start:r,column:n,source:o,expecting:s,rhs:i})=>{const a=colorize(o.split("\n").slice(r,t).join("\n")),l=red(getRuleName(i.item.type)),c=a.split("\n"),{length:u}=(r+1+c.length).toString(),p=`Expecting one of:\n\n${s}\n\nbut encountered ${l}`;return{message:[`Parsing error at ${e}[${t}:${n}]\n`,c.map(addLineNumber(r,u)).join("\n")," ".repeat(n+u+4)+"^",`${p}`].join("\n"),parseError:p}},wrapMessage=({name:e,file:t,line:r,start:n,column:o,source:s,message:i})=>{const a=colorize(s.split("\n").slice(n,r).join("\n")).split("\n"),{length:l}=(n+1+a.length).toString();return{message:[`${e} at ${t}[${r}:${o}]\n`,a.map(addLineNumber(n,l)).join("\n")," ".repeat(o+l+4)+"^",`${i}`].join("\n")}},getImportErrorMessage=e=>wrapMessage({name:"Import error",...e}),getTypeErrorMessage=e=>wrapMessage({name:"Type error",...e});class ParsingError extends Error{constructor(e){const{message:t,parseError:r}=getMessage(e);super(t),this.meta=e,this.meta.message=t,this.meta.parseError=r}}class ImportError extends Error{constructor(e){const{message:t}=getImportErrorMessage(e);super(t),this.meta=e,this.meta.importError=e.message,this.meta.message=t}}class TypeError$1 extends Error{constructor(e){const{message:t}=getTypeErrorMessage(e);super(t),this.meta=e,this.meta.typeError=e.message,this.meta.message=t}}class LexingError extends Error{constructor(e){super(e.message),this.meta=e}}const isUnfinished=e=>unfinished.includes(e.item.type),findFirstUnfinished=e=>{let t=e.first,r=e.first.next;for(;r.next&&!isUnfinished(t)||isUnfinished(r);)t=r,r=t.next;if("clio"===r.item.type&&r.item.content[0]){const{meta:e}=r.item;r={meta:e,item:r.item.content[0]}}return{lhs:t,rhs:r}},ignoreRules=["lineBreak","outdent"],ruleNames={ranger:"Range",rangeFull:"Range",rangeBy:"Range",byRange:"Range",formattedString:"String",hashmap:"Hash Map",propertyAccess:"Property",inCheck:"In Check",parallelFn:"Parallel Function",typedAssignment:"Assignment",arrowAssignment:"Assignment",decoratedExportedFunction:"Export",decoratedFunction:"Function",fullConditional:"Conditional",logicalNot:"Logical",listDef:"List",typeDef:"Type",parameterCall:"Call"},ruleGroups={true:"Built-ins",false:"Built-ins",null:"Built-ins",string:"Primitives",formattedString:"Primitives",number:"Primitives",array:"Structural",set:"Structural",hashmap:"Structural",slice:"Structural",range:"Structural",ranger:"Structural",rangeFull:"Structural",rangeBy:"Structural",byRange:"Structural",symbol:"Names",propertyAccess:"Names",parameter:"Names",logical:"Control",logicalNot:"Control",fullConditional:"Control",conditional:"Control",comparison:"Control",inCheck:"Control",wrapped:"Structural"},titleCase=e=>e[0].toUpperCase()+e.slice(1),getRuleName=e=>ruleNames[e]||titleCase(e),formatExpectedRules=e=>{const t={};for(const r of e){if(ignoreRules.includes(r))continue;const e=getRuleName(r),n=ruleGroups[r]||"Other";t[n]?t[n].includes(e)||t[n].push(e):t[n]=[e]}return Object.entries(t).sort((([e],[t])=>"Other"===t?-1/0:e.localeCompare(t))).map((([e,t])=>`  ${bold(e)}:\t${t.sort().join(", ")}`)).join("\n")},parsingError=(e,t,r)=>{const{lhs:n,rhs:o}=findFirstUnfinished(r),s=Object.keys(rules[n.item.type]||{}),i=formatExpectedRules(s),a=Math.max(0,o.item.line-3),l=o.item.meta?.location||o.item,{line:c,column:u}=l;return new ParsingError({file:t,line:c,start:a,column:u,source:e,expecting:i,rhs:o})},importError=({source:e,file:t,message:r,line:n,column:o})=>{const s=Math.max(0,n-3);return new ImportError({source:e,file:t,line:n,column:o,message:r,start:s})},typeError=({source:e,file:t,message:r,line:n,column:o})=>{const s=Math.max(0,n-3);return new TypeError$1({source:e,file:t,line:n,column:o,message:r,start:s})},compileImport=(e,t,r)=>{if(r.sourceDir){const n=!e.match(/^(\.{1,2})?\//),o=t.source,{root:s,compileFile:i,config:a,configPath:l,modulesDir:c,modulesDestDir:u,srcPrefix:p,destPrefix:f,cacheDir:h,configs:d={},npmDeps:g={},npmDevDeps:m={},imports:y=[]}=r;if(n){const t=e.split("/").shift(),n=join$1(s,c,t,"clio.toml"),a=d[t]||getPackageConfig(n);d[t]=a,r.configs=d;const l=join$1(c,t),p=join$1(u,t);g[t]||(g[t]=getParsedNpmDependencies(n),r.npmDeps=g),m[t]||(m[t]=getParsedNpmDevDependencies(n),r.npmDevDeps=m);const{scope:f,destFile:w,srcFile:b}=i(o,a,n,c,u,s||dirname(n),l,p,h,{npmDeps:g,npmDevDeps:m,configs:d});return y.push({module:t,src:b,dest:w}),r.imports=y,f}{const{scope:e,destFile:t,srcFile:n}=i(o,a,l,c,u,s,p,f,h,{npmDeps:g,npmDevDeps:m,configs:d});return y.push({module:"",src:n,dest:t}),r.imports=y,e}}return{}},ensureClioExtension=e=>e.endsWith(".clio")?e:e+".clio",toRelative=e=>e.match(/^\.{1,2}\//)?e:"./"+e,resolveRelativeModule=(e,t,r,n)=>{const o=dirname(join$1(e.root,e.srcPrefix,e.sourceDir,e.file)),s=[],i=resolve(o,t);i.endsWith(".clio")?s.push(i):s.push(i+".clio"),s.push(join$1(i,"main.clio"));for(const e of s)if(existsSync(e)){if(e.match(/^\.{1,2}\//))return{source:e,require:e+".js"};const t=relative(o,e);return{source:t,require:toRelative(t+".js")}}throw importError({file:e.file,source:e.source,message:[`Cannot find module "${t}" in any of the following locations:\n`,...s.map((t=>`  - ${relative(e.srcPrefix,t)}`))].join("\n"),line:r,column:n})},resolveAbsoluteModule=(e,t,r,n)=>{const o=dirname(join$1(e.root,e.srcPrefix,e.sourceDir,e.file)),s=[],i=resolve(e.root,e.srcPrefix,e.sourceDir,t.slice(1));i.endsWith(".clio")?s.push(i):s.push(i+".clio"),s.push(join$1(i,"main.clio"));for(const e of s)if(existsSync(e)){if(e.match(/^\.{1,2}\//))return{source:e,require:e+".js"};const t=relative(o,e);return{source:t,require:toRelative(t+".js")}}throw importError({file:e.file,source:e.source,message:[`Cannot find module "${t}" in any of the following locations:\n`,...s.map((t=>`  - ${relative(e.root,t)}`))].join("\n"),line:r,column:n})},resolveModule=(e,t,r,n)=>{const[o,s=""]=t.match(/(.*?)(?:$|\/(.*))/).slice(1),i=join$1(e.root,e.modulesDir,o);if(!existsSync(i))throw importError({file:e.file,source:e.source,message:[`Cannot find module "${o}" in your project.`,"Are you sure it is installed?"].join("\n"),line:r,column:n});const{source:a,destination:l}=e.config.build,c=resolve(e.root,e.modulesDir,o,a),u=[],p=t=>({source:resolve(c,t),destination:resolve(e.modulesDestDir,o,l,t)});s.endsWith(".clio")?u.push(p(s)):u.push(p(s+".clio")),u.push(p(join$1(s,"main.clio")));for(const t of u)if(existsSync(t.source)){if(t.destination.match(/^\.{1,2}\//))return{source:t.source,require:t.destination+".js"};const r=toRelative(relative(dirname(e.destFile),t.destination)+".js");return{source:relative(c,t.source),require:r}}throw importError({file:e.file,source:e.source,message:[`Cannot find module "${t}" in any of the following locations:\n`,...u.map((t=>`  - ${relative(e.root,t.source)}`))].join("\n"),line:r,column:n})},getImportPath=(e,t,r,n)=>{if(!e.sourceDir){const e=ensureClioExtension(t);return{source:e,require:e+".js"}}return t.match(/^\.{1,2}\//)?resolveRelativeModule(e,t,r,n):t.match(/^\//)?resolveAbsoluteModule(e,t,r,n):resolveModule(e,t,r,n)},cjs=(e,t,r)=>{const n=e.path.value.slice(1,-1).replace(/^[^:]*:/,""),o=n.split("/").pop().replace(/\.[^.]*$/,"").split("/").pop().replace(/@.*$/,"").split(/[-._]+/).filter(Boolean).map(((e,t)=>t>0?e[0].toUpperCase()+e.slice(1):e)).join(""),s="default"+o[0].toUpperCase()+o.slice(1),i=new SourceNode(e.import.line,e.import.column,e.import.file,["import ",e.items?s:o," from ",'"',n,'"']);let a=new SourceNode(null,null,null,"");if(e.items){let n,o=[];for(const s of e.items)if("symbol"===s.type){const e=r(s,t);o.push(e)}else if("symbol"===s.lhs.type){const e=r(s.lhs,t),n=r(s.rhs,t);o.push(new SourceNode(s.as.line,s.as.column,s.as.file,[e,":",n]))}else{const e=r(s.rhs,t);n=new SourceNode(s.as.line,s.as.column,s.as.file,["...",e]),n.name=e}n&&o.push(n),a=n&&1==o.length?new SourceNode(null,null,null,["const ",n.name,"=",s]):new SourceNode(null,null,null,["const{",new SourceNode(null,null,null,o).join(","),"}=",s])}return a.topLevel=i,a},esm=(e,t,r)=>{if(e.items?.length>1&&1===e.items.filter((e=>"mulOp"===e.lhs.type)).length)return cjs(e,t,r);const n=e.path.value.slice(1,-1).replace(/^[^:]*:/,""),o=n.split("/").pop().replace(/\.[^.]*$/,"").split("/").pop().replace(/@.*$/,"").split(/[-._]+/).filter(Boolean).map(((e,t)=>t>0?e[0].toUpperCase()+e.slice(1):e)).join(""),s=new SourceNode(e.import.line,e.import.column,e.import.file,["from ",'"',n,'"']);let i;if(e.items){let n,o=[];for(const s of e.items)if("symbol"===s.type){const e=r(s,t);o.push(e)}else if("symbol"===s.lhs.type){const e=r(s.lhs,t),n=r(s.rhs,t);o.push(new SourceNode(s.as.line,s.as.column,s.as.file,[e," as ",n]))}else{const e=r(s.rhs,t);n=new SourceNode(s.as.line,s.as.column,s.as.file,["* as ",e]),n.name=e}i=new SourceNode(null,null,null,n?["import ",n," ",s]:["import{",new SourceNode(null,null,null,o).join(","),"}",s])}else i=new SourceNode(null,null,null,["import ",o," ",s]);const a=new SourceNode(null,null,null,"");return a.topLevel=i,a},clio=(e,t,r)=>{const n=e.path.value.slice(1,-1),o=n.split("/").pop().replace(/\.[^.]*$/,"").split("/").pop().replace(/@.*$/,"").split(/[-._]+/).filter(Boolean).map(((e,t)=>t>0?e[0].toUpperCase()+e.slice(1):e)).join(""),s="default"+o[0].toUpperCase()+o.slice(1),{line:i,column:a}=e.path,l=getImportPath(t,n,i,a),c=compileImport(n,l,t),u=new SourceNode(e.import.line,e.import.column,e.import.file,["import ",s," from ",'"',l.require,'"']);let p;if(e.items){let n,o=[];for(const s of e.items)if("symbol"===s.type){const e=r(s,t);o.push(e),c[e]&&(t.scope[e]=c[e])}else if("symbol"===s.lhs.type){const e=r(s.lhs,t),n=r(s.rhs,t);o.push(new SourceNode(s.as.line,s.as.column,s.as.file,[e,":",n])),c[e]&&(t.scope[n]=c[e])}else{const o=r(s.rhs,t);n=new SourceNode(s.as.line,s.as.column,s.as.file,["...",o]),n.name=o;const i=e.items.filter((e=>"symbol"===e.type||"symbol"===e.lhs?.type)).map((e=>"symbol"===e.type?r(e,t).toString():r(e.rhs,t).toString()));for(const e of Object.keys(c))i.includes(e)||(t.scope[`${o}.${e}`]=c[e])}n&&o.push(n),p=n&&1==o.length?new SourceNode(null,null,null,["const ",n.name,"=await ",s,"(clio)"]):new SourceNode(null,null,null,["const{",new SourceNode(null,null,null,o).join(","),"}=await ",s,"(clio)"])}else{p=new SourceNode(null,null,null,["const ",o,"=await ",s,"(clio)"]);for(const e of Object.keys(c))t.scope[`${o}.${e}`]=c[e]}return p.topLevel=u,p},remote=(e,t,r,n)=>{const o=t.path.value.slice(1,-1).replace(/^[^:]*:/,""),s=o.split("/").pop().replace(/\.[^.]*$/,"").split("/").pop().replace(/@.*$/,"").split(/[-._]+/).filter(Boolean).map(((e,t)=>t>0?e[0].toUpperCase()+e.slice(1):e)).join(""),i=new SourceNode(t.import.line,t.import.column,t.import.file,["await remote(clio,",'"',e+"://"+o,'")']);let a;if(t.items){let e,o=[];for(const s of t.items)if("symbol"===s.type){const e=n(s,r);o.push(e)}else if("symbol"===s.lhs.type){const e=n(s.lhs,r),t=n(s.rhs,r);o.push(new SourceNode(s.as.line,s.as.column,s.as.file,[e,":",t]))}else{const t=n(s.rhs,r);e=new SourceNode(s.as.line,s.as.column,s.as.file,["...",t]),e.name=t}e&&o.push(e),a=e&&1==o.length?new SourceNode(null,null,null,["const ",e.name,"="]):new SourceNode(null,null,null,["const{",new SourceNode(null,null,null,o).join(","),"}="])}else a=new SourceNode(null,null,null,["const ",s,"="]);return new SourceNode(null,null,null,[a,i])},join=(e,t)=>new SourceNode(null,null,null,e).join(t),asIs=e=>new SourceNode(e.line,e.column,e.file,e.value),conditionals=["fullConditional","conditional"],checkLambda=(e,t,r,n,o)=>e.lambda?.length?get({type:"lambda",body:o?get(t,r):t,params:e.lambda},r):n?get(e,r):e,getFnName=(e,t)=>{let r=e;return"wrapped"===e.type&&(r=e.content),"function"===r.type?get(r.name,t).toString():get(r,t).toString()},getCallFn=(e,t)=>{if("method"===e.fn.type){if(!e.isMap)return{type:"propertyAccess",lhs:e.args.shift(),dot:e.fn.dot,rhs:e.fn.property};if(e.args.length>1)return{type:"propertyAccess",lhs:{type:"symbol",value:"$item"},dot:e.fn.dot,rhs:e.fn.property,dropData:!0,dropMeta:!0};const r={type:"propertyAccess",lhs:{type:"symbol",value:"$item"},dot:e.fn.dot,rhs:e.fn.property};return{type:"wrapped",start:{value:"("},end:{value:")"},content:{type:"function",start:e.fn,noParallel:!0,name:{type:"symbol",value:""},needsAsync:e.needsAsync,params:[{type:"symbol",value:"$item"}],body:{type:"return",returnType:t[get(r)]?.returns,content:[{type:"call",fn:r,args:[]}]}}}}return e.fn},checkRecursive=(e,t)=>{const r=e.content[e.content.length-1];if(conditionals.includes(r.type)){return[r.if.body,...r.elseIfs.map((e=>e.body)),r.else?.body].filter(Boolean).map((t=>({...t,recursefn:e.recursefn}))).some((e=>checkRecursive(e,t)))}if("call"===r.type){const n="symbol"===r.fn.type&&get(r.fn,t).toString(),o=e.recursefn?.name&&get(e.recursefn.name,t).toString();return n&&n===o}return!1},getTypeById=(e,t)=>{for(const r in t)if(e===t[r].id)return t[r]},getListTypesOf=(e,t)=>{const r=[];for(const n in t){const o=t[n];"ListType"===o.type&&o.accepts[0].id===e&&r.push(o)}return r.length?r:"Any"},getTypeOf=(e,t)=>{const{scope:r}=t;if("number"===e.type)return"Number";if("string"===e.type)return"String";if("array"===e.type)return"Array";if("hashmap"===e.type)return"Object";if("parameter"===e.type)return"Parameter";if("symbol"===e.type)return r[get(e,t)]?.type;if("propertyAccess"===e.type&&"call"!==e.lhs.type)return r[get(e,t)]?.type;if("wrapped"===e.type)return e.lambda?.length?"Function":getTypeOf(e.content,t);if("call"===e.type&&"symbol"===e.fn.type)return r[get(e.fn,t)]?.returns;if("call"===e.type&&"propertyAccess"===e.fn.type)return r[get(e.fn,t)]?.returns;if("call"===e.type&&"wrapped"===e.fn.type)return get(e.fn,t)?.returns;if("mapCall"===e.type&&"symbol"===e.fn.type){const n=r[get(e.fn,t)]?.returns;return getListTypesOf(n,r)}if("mapCall"===e.type&&"propertyAccess"===e.fn.type){const n=r[get(e.fn,t)]?.returns;return getListTypesOf(n,r)}if("math"===e.type){const{lhs:r,rhs:n}=e.value,o=getTypeOf(r,t)||"Any",s=getTypeOf(n,t)||"Any";if("Parameter"===o)return r.typeInfo="Parameter"===s.type?"Any":s.type,n.typeInfo="Parameter"===s.type?"Any":s.type,r.typeInfo;if("Parameter"===s)return n.typeInfo=o.type,n.typeInfo;if("Any"===o||"Any"===s)return"Any";if("add"===e.value.type){if(o!==s||!["Number","String"].includes(o))throw typeError({source:t.source,file:t.file,line:e.value.op.line,column:e.value.op.column,message:`Cannot add ${o} and ${s}.`})}else if(o!==s||"Number"!==o)throw"pow"===e.value.type?typeError({source:t.source,file:t.file,line:e.value.op.line,column:e.value.op.column,message:`Cannot calculate ${o} to the power of ${s}.`}):"mul"===e.value.type?typeError({source:t.source,file:t.file,line:e.value.op.line,column:e.value.op.column,message:`Cannot multiply ${o} by ${s}.`}):"div"===e.value.type?typeError({source:t.source,file:t.file,line:e.value.op.line,column:e.value.op.column,message:`Cannot divide ${o} by ${s}.`}):"sub"===e.value.type?typeError({source:t.source,file:t.file,line:e.value.op.line,column:e.value.op.column,message:`Cannot subtract ${s} from ${o}.`}):typeError({source:t.source,file:t.file,line:e.value.op.line,column:e.value.op.column,message:`Applying "${e.value.op}" is not allowed on ${o} and ${s}`});return o}},toProperCall=(e,t)=>{const r=e.content[e.content.length-1];if(conditionals.includes(r.type)){[r.if.body,...r.elseIfs.map((e=>e.body)),r.else?.body].filter(Boolean).map((t=>(t.recursefn=e.recursefn,t))).map((e=>toProperCall(e,t)))}else if("call"===r.type){const n="symbol"===r.fn.type&&get(r.fn,t).toString(),o=e.recursefn?.name&&get(e.recursefn.name,t).toString();n&&n===o&&(r.type="properCall",r.paramNames=e.recursefn.params.map((e=>get(e,t).toString())),r.optimized=!0,e.optimized=!0)}return e},types={symbol:e=>asIs(e),number:e=>new SourceNode(e.line,e.column,e.file,e.value.replace(/_/g,"")),awaited(e,t){const r=e.all?["Promise.all(",get(e.value,t),")"]:[get(e.value,t)];e.await.value.startsWith("[")&&(e.await.value=e.await.value.slice(1,-1));const n=new SourceNode(e.await.line,e.await.column,e.await.file,["(",asIs(e.await)," ",...r,")"]);return n.needsAsync=!0,n},mapCall(e,t){const{awaited:r,all:n}=e,o=getCallFn(e,t.scope),s=getFnName(o,t),i=getTypeOf(o,t);if(i&&!["Function","Any","Type"].includes(i))throw typeError({source:t.source,file:t.file,line:o.line,column:o.column,message:`Value ${get(o,t)} is of type ${i} and is not callable.`});const{accepts:a}=t.scope[s]||{};if(a){const r=e.args[0],n=getTypeOf(r,t)||"Any",o=getTypeById(n,t.scope),s=o?.type;if("Any"!==n&&"Array"!==n&&"ListType"!==s){const e=n.split("/").pop();throw typeError({source:t.source,file:t.file,line:r.line,column:r.column,message:`Cannot map a function to an argument of type ${e}`})}if("Array"===n)for(let e=0;e<r.items.length;e++){const n=r.items[e],o=getTypeOf(n,t)||"Any";if(o!==a[0]){const r=o.split("/").pop(),s=a[0].split("/").pop();throw typeError({source:t.source,file:t.file,line:n.line,column:n.column,message:`Element ${e} of type ${r} does not satisfy parameter of type ${s}`})}}else if("ListType"===s){const e=o.accepts[0].id;if(e!==a[0]){const n=e.split("/").pop(),o=a[0].split("/").pop();throw typeError({source:t.source,file:t.file,line:r.line,column:r.column,message:`Items in array of type ${n} do not satisfry parameter of type ${o}`})}}for(let r=1;r<e.args.length;r++){const n=e.args[r],o=getTypeOf(n,t)||"Any";if(!(o===a[r]||"Any"===a[r]||"Parameter"===o)){const e=o.split("/").pop(),s=a[r].split("/").pop();throw typeError({source:t.source,file:t.file,line:n.line,column:n.column,message:`Argument of type ${e} at position ${r} does not satisfy parameter of type ${s}`})}"Parameter"===o&&(n.typeInfo=a[r]||t.scope.Any)}}const l="Type"===i,c=e.args.map((e=>get(e,t))),u=c.map((e=>e.insertBefore)).filter(Boolean);o.insertBefore&&u.unshift(o.insertBefore);const p=c.shift(),f=p.needsAsync||c.some((e=>e.needsAsync));let h;h=c.length?new SourceNode(null,null,null,[f?"async ":"","($item",o.dropMeta?")=>":", $index, $iterator)=>",l?"new ":"",get(o,t),o.dropData?"(":"($item,",join(c,","),o.dropMeta?")":",$index,$iterator)"]):l?new SourceNode(null,null,null,["((...args) => new ",get(o,t),"(...args))"]):get(o,t),h.insertBefore&&u.unshift(h.insertBefore);let d=new SourceNode(o.line,o.column,o.file,[p,".","map","(",h,")"]);if(r){const t=n?["Promise.all(",d,")"]:[d];e.await.value.startsWith("[")&&(e.await.value=e.await.value.slice(1,-1)),d=new SourceNode(e.await.line,e.await.column,e.await.file,["(",asIs(e.await)," ",...t,")"])}return u.length&&(d.insertBefore=u),d.needsAsync=r||p.needsAsync||c.some((e=>e.needsAsync))||h.needsAsync,d},properCall(e,t){const r=e.paramNames,n=r.map(((r,n)=>{let o="undefined";if(e.args[n]){const r=get(e.args[n],t);r.toString()&&(o=r)}return new SourceNode(null,null,null,[`__${r}=`,o,";"])})),o=r.map((e=>`${e}=__${e};`));return new SourceNode(null,null,null,[n,o,"__recurse=true;","continue __",get(e.fn,t),";"])},parameterCall:(e,t)=>get({...e,type:"call"},t),call(e,t){if(e.isMap)return e.type="mapCall",get(e,t);const{awaited:r,all:n}=e,o=getCallFn(e,t.scope),s=getTypeOf(o,t);if(s&&!["Function","Any","Type"].includes(s))throw typeError({source:t.source,file:t.file,line:o.line,column:o.column,message:`Value ${get(o,t)} is of type ${s} and is not callable.`});const i=e.args.map((e=>get(e,t))),a=i.map((e=>e.insertBefore)).filter(Boolean),l=get(o,t),{accepts:c}=t.scope[l]||{};if(c)for(let r=0;r<e.args.length;r++){const n=e.args[r],o=getTypeOf(n,t);if(!(o===c[r]||"Any"===c[r]||"Parameter"===o)){const e=o.split("/").pop(),s=c[r].split("/").pop();throw typeError({source:t.source,file:t.file,line:n.line,column:n.column,message:`Argument of type ${e} at position ${r} does not satisfy parameter of type ${s}`})}"Parameter"===o&&(n.typeInfo=c[r]||t.scope.Any)}l.insertBefore&&a.unshift(l.insertBefore);let u=new SourceNode(o.line,o.column,o.file,[..."Type"===s?["new "]:[],l,"(",join(i,","),")"]);if(r){const t=n?["Promise.all(",u,")"]:[u];e.await.value.startsWith("[")&&(e.await.value=e.await.value.slice(1,-1)),u=new SourceNode(e.await.line,e.await.column,e.await.file,["(",asIs(e.await)," ",...t,")"])}return a.length&&(u.insertBefore=a),u.needsAsync=r||i.some((e=>e.needsAsync))||l.needsAsync,u},...mapfn_1(["add","mul","div","sub","mod","pow"],(e=>[e,(e,t)=>{const{op:r}=e,n=get(e.lhs,t),o=get(e.rhs,t),s=new SourceNode(null,null,null,[n,new SourceNode(r.line,r.column,r.file,r.value),o]);return s.needsAsync=n.needsAsync||o.needsAsync,(n.insertBefore||o.insertBefore)&&(s.insertBefore=[...n.insertBefore,...o.insertBefore]),s}])),math:(e,t)=>(getTypeOf(e,t),get(e.value,t)),block(e,t){const r=e.content.map((e=>get(e,t))).map((e=>[e.insertBefore,e])).flat().filter(Boolean),n=new SourceNode(null,null,null,[new SourceNode(null,null,null,r).join(";")]);return n.needsAsync=r.some((e=>e.needsAsync)),n},recursiveReturn(e,t){const r=e.recursefn.params.map((e=>get(e,t).toString())),n=r.length?"let "+r.map((e=>`__${e}`)).join(",")+";":"",o=toProperCall(e,t);o.type="return",o.returnType=e.returnType,o.optimized=!0;const s=get(o,t),i=get(e.recursefn.name,t),a=new SourceNode(null,null,null,[`${n}let __recurse = true;`,`__${i}: while(__recurse) {`,"__recurse = false;",s,"}"]);return a.needsAsync=s.needsAsync,a},return(e,t){if(!e.optimized&&checkRecursive(e,t))return e.type="recursiveReturn",get(e,t);let r=e.content[e.content.length-1],n=!e.optimized&&!r.optimized;const o=e.content.slice(0,-1).map((e=>get(e,t))).map((e=>[e.insertBefore,e])).flat().filter(Boolean);if(conditionals.includes(r.type))r.if.body.optimized||(r.if.body.type="return",r.if.body.returnType=e.returnType),r.elseIfs.forEach((t=>{t.body.optimized||(t.body.type="return",t.body.returnType=e.returnType)})),r.else&&!r.else.body.optimized&&(r.else.body.type="return",r.else.body.returnType=e.returnType),n=!1;else if("assignment"===r.type){const e=get(r,t);e.insertBefore&&o.push(e.insertBefore),o.push(e),r=r.name}else if("typedAssignment"===r.type){const e=get(r,t);e.insertBefore&&o.push(e.insertBefore),o.push(get(r,t)),r=r.assignment.name}if(n&&e.returnType){const n=getTypeOf(r,t);if(e.returnType!==n){const o=n?n.split("/").pop():"Any",s=e.returnType.split("/").pop();throw typeError({source:t.source,file:t.file,line:r.line,column:r.column,message:`Cannot return value of type ${o} from a function of type ${s}`})}}let s=get(r,t);s.returnAs&&(s=s.returnAs);const i=new SourceNode(null,null,null,[new SourceNode(null,null,null,o).join(";"),...o.length?[";"]:[],...s.insertBefore?[s.insertBefore,";"]:[],...n?["return "]:[],s]);return i.needsAsync=s.needsAsync||o.some((e=>e.needsAsync)),i},decoratedExportedFunction(e,t){e.value.type="decoratedFunction";const r=get(e.value,t),n=get(e.name,t),o=new SourceNode(e.export.line,e.export.column,e.export.file,["clio.exports.",n,"=",n]);return o.insertBefore=[r.insertBefore,r].filter(Boolean),o.fn=r.fn,o},decoratedFunction(e,t){const{start:r}=e,n=get(e.name,t),o=[];for(const r of e.decorators)if("decoratorCall"===r.type){const{fn:e,args:s}=r;switch(e.value){case"@describe":const e=s.filter((e=>["string","number"].includes(e.type))).map((e=>{const r=get(e,t).toString();return"string"===e.type?r.slice(1,-1):r})).join(" ");e&&o.push(e);break;case"@returns":const r=get(s[0],t).toString(),i=t.scope[r];if(!i)throw typeError({source:t.source,file:t.file,line:s[0].line,column:s[0].column,message:`Identifier ${r} is not defined.`});t.scope[n]={...t.scope[n],returns:i.id};break;case"@params":for(const e of s){const r=get(e,t);if(!t.scope[r])throw typeError({source:t.source,file:t.file,line:e.line,column:e.column,message:`Identifier ${r} is not defined.`})}const a=s.map((e=>get(e,t).toString())).map((e=>t.scope[e].id));t.scope[n]={...t.scope[n],accepts:a}}}const s=o.join("\n");t.scope[n]={...t.scope[n],description:s};let i=get({...e,type:"function",skipName:!0},t);for(const r of e.decorators)if("decorator"===r.type){const e={...r,type:"symbol",value:r.value.slice(1)};i=new SourceNode(null,null,null,[get(e,t),"(",i,")"])}else if("decoratorAccess"===r.type){const{lhs:e}=r,n={...e,type:"symbol",value:e.value.slice(1)};r.lhs=n,r.type="propertyAccess",i=new SourceNode(null,null,null,[get(r,t),"(",i,")"])}else if("decoratorCall"===r.type)if("decorator"===r.fn.type){const e=r.fn,n={...e,type:"symbol",value:e.value.slice(1)};r.fn=n,r.type="call",r.args.push({type:"asIs",value:i}),i=get(r,t)}else{const{lhs:e}=r.fn,n={...e,type:"symbol",value:e.value.slice(1)};r.fn.lhs=n,r.fn.type="propertyAccess",r.type="call",r.args.push({type:"asIs",value:i}),i=get(r,t)}const a=new SourceNode(r.line,r.column,r.file,["const ",n,"=",i]);return a.fn={doc:s,name:n},a},asIs:e=>e.value,function(e,t){const r={...t.scope},{start:n}=e,o=get(e.name,t),s=e.params.map((e=>get(e,t))),i=t.scope[o]?.accepts;if(i)for(let e=0;e<s.length;e++){const r=s[e],n=t.scope[i[e]].id;t.scope[r]={type:n}}const a=t.scope[o]?.returns;e.body.returnType=a;const l=get(e.body,t),c=new SourceNode(n.line,n.column,n.file,[...!e.skipName&&o.toString()?["const ",o,"="]:[],...!e.skipName&&o.toString()?["register"]:[],"(",...!e.skipName&&o.toString()?["`",t.rpcPrefix,"/",n.file,"/",o,"`,"]:[],l.needsAsync?"async":"","(",new SourceNode(null,null,null,s).join(","),")=>","{",l,"})"]);return c.needsAsync=!1,c.returnAs=new SourceNode(null,null,null,o),c.returnAs.insertBefore=c,c.fn={name:o},t.scope=r,o.toString()&&(t.scope[o]={...t.scope[o],type:"Function",id:[t.rpcPrefix,n.file,o.toString()].join("/"),params:s.map((e=>e.toString()))}),c},exportedFunction(e,t){const r=get(e.value,t),n=get(e.value.name,t),o=new SourceNode(e.export.line,e.export.column,e.export.file,["clio.exports.",n,"=",n]);return o.insertBefore=[r.insertBefore,r].filter(Boolean),o.fn=r.fn,o},exported(e,t){const r=get(e.value,t),n=e.name instanceof SourceNode?e.name:get(e.name,t),{line:o,column:s,file:i}=e.export,a=new SourceNode(o,s,i,["clio.exports.",n,"=",n]);return a.insertBefore=[r.insertBefore,"symbol"===e.value.type?null:r].filter(Boolean),a},importStatement(e,t){const r=e.path.value.slice(1,-1).match(/^[^:]*(?=:)/)?.[0]||"clio";return"cjs"===r?cjs(e,t,get):"esm"===r?esm(e,t,get):"clio"===r?clio(e,t,get):remote(r,e,t,get)},lambda(e,t){const{body:r}=e,n=[],o=new Set,s=[];for(const r of e.params)o.has(r.value)||(o.add(r.value),n.push(get(r,t)),s.push(r.typeInfo||"Any"));const i=e.params[0],a=new SourceNode(i.line,i.column,i.file,[r.needsAsync?"async ":"","(",new SourceNode(null,null,null,n).join(","),")","=>",r]);return a.accepts=s,a.returns=getTypeOf(r.node,t),a},parallelFn(e,t){const{start:r,fn:n}=e;return new SourceNode(r.line,r.column,r.file,[get(n,t),".parallel"])},comparison(e,t){const r=[];for(const{op:t}of e.comparisons)"=="===t.value&&(t.value="===");const n=e.comparisons.shift(),o=get(e.lhs,t);let s=o.needsAsync,i=get(n.rhs,t);r.push("(",o,new SourceNode(n.op.line,n.op.column,n.op.file,n.op.value),i,")");let a=i;for(const{op:n,rhs:o}of e.comparisons){const e=get(o,t);s=s||o.needsAsync,r.push("&&","(",a,new SourceNode(n.line,n.column,n.file,n.value),e,")"),a=e}const l=new SourceNode(null,null,null,r);return l.needsAsync=s,l.lambda=e.lambda,l},logicalNot(e,t){const{op:r}=e,n=get(e.rhs,t),o=new SourceNode(r.line,r.column,r.file,[new SourceNode(r.line,r.column,r.file,"!"),"(",n,")"]);return o.needsAsync=n.needsAsync,o},logical(e,t){const r=e.logicals.map((e=>({...e,rhs:get(e.rhs,t)}))),n=get(e.lhs,t),o=["(",n,")",...r.map((({op:e,rhs:t})=>[new SourceNode(e.line,e.column,e.file,"and"===e.value?"&&":"||"),"(",t,")"])).flat()],s=new SourceNode(null,null,null,o);return s.needsAsync=n.needsAsync||r.some((({rhs:e})=>e.needsAsync)),s},ifBlock(e,t){const{start:r,condition:n}=e,o=get(e.body,t),s=new SourceNode(null,null,null,[asIs(r),"(",get(n,t),")","{",o,"}"]);return s.needsAsync=o.needsAsync,s},elseIfBlock(e,t){const{start:r,condition:n}=e,o=get(e.body,t),s=new SourceNode(null,null,null,[asIs(r)," ",asIs(e.if),"(",get(n,t),")","{",o,"}"]);return s.needsAsync=o.needsAsync,s},elseBlock(e,t){const r=get(e.body,t),n=new SourceNode(null,null,null,[asIs(e.start),"{",r,"}"]);return n.needsAsync=r.needsAsync,n},conditional(e,t){const r=get(e.if,t),n=e.elseIfs.map((e=>get(e,t))),o=new SourceNode(null,null,null,[r,...n]);return o.needsAsync=r.needsAsync||n.some((e=>e.needsAsync)),o},fullConditional(e,t){const r=get(e.if,t),n=e.elseIfs.map((e=>get(e,t))),o=get(e.else,t),s=new SourceNode(null,null,null,[r,...n,o]);return s.needsAsync=r.needsAsync||o.needsAsync||n.some((e=>e.needsAsync)),s},array(e,t){const{start:r,end:n}=e,o=e.items.map((e=>get(e,t))),s=new SourceNode(null,null,null,[asIs(r),new SourceNode(null,null,null,o).join(","),asIs(n)]),i=o.map((e=>e.insertBefore)).filter(Boolean);return i.length&&(s.insertBefore=new SourceNode(null,null,null,i).join(";")),s.needsAsync=o.some((e=>e.needsAsync)),s},keyValue(e,t){const r=get(e.key,t),n=get(e.value,t),o=new SourceNode(null,null,null,[r,":",n]);return o.needsAsync=n.needsAsync,o},string:e=>(e.value=e.value.slice(1,-1).replace(/`/g,"\\`").replace(/\\"/,'"'),e.value="`"+e.value+"`",asIs(e)),hashmap(e,t){const r=e.keyValues.map((e=>get(e,t))),n=new SourceNode(e.start.line,e.start.column,e.start.file,["{",new SourceNode(null,null,null,r).join(","),"}"]);return n.needsAsync=r.some((e=>e.needsAsync)),n},propertyAccess(e,t){const r=get(e.lhs,t),n=get(e.rhs,t),o=new SourceNode(null,null,null,[r,asIs(e.dot),n]);return o.insertBefore=[r.insertBefore,n.insertBefore].filter(Boolean),o.insertBefore=o.insertBefore.length?o.insertBefore:null,o.needsAsync=r.needsAsync||n.needsAsync,o},range(e,t){const r=e.start?get(e.start,t):"0",n=e.end?get(e.end,t):"Infinity",o=e.step?get(e.step,t):"null",{location:s}=e,i=new SourceNode(s.line,s.column,s.file,["range","(",r,",",n,",",o,")"]);return i.needsAsync=e.start?.needsAsync||e.end?.needsAsync||e.step?.needsAsync,i},...map_1(["rangeFull","byRange","rangeBy"],((e,t)=>(e.type="range",get(e,t)))),ranger:(e,t)=>get({type:"range",location:e},t),slice(e,t){const r=get(e.slicer,t),n=get(e.slicee,t),o=new SourceNode(null,null,null,[n,r]);return o.needsAsync=r.needsAsync||n.needsAsync,o},set(e,t){const{start:r}=e,n=e.items.map((e=>get(e,t))),o=new SourceNode(r.line,r.column,r.file,["new"," ","Set","(","[",new SourceNode(null,null,null,n).join(","),"]",")"]);return o.needsAsync=n.some((e=>e.needsAsync)),o},wrapped(e,t){if(!e.content)return new SourceNode(null,null,null,"");e.isFn&&"call"===e.content.type&&e.content.args.map((e=>e.lambda=[]));const r=checkLambda(e.content,e.content,t,!0,!0),n=new SourceNode(null,null,null,[asIs(e.start),r,asIs(e.end)]);return n.insertBefore=r.insertBefore,n.needsAsync=r.needsAsync,n.accepts=r.accepts,n.returns=r.returns,n},assignment(e,t){const r=get(e.name,t),n=get(e.value,t),o=new SourceNode(null,null,null,[..."symbol"===e.name.type?["const"," "]:[],r,asIs(e.assign),n]);return o.insertBefore=n.insertBefore,o.needsAsync=n.needsAsync,o.name=r,"wrapped"===e.value.type&&n.accepts&&(t.scope[r]={returns:n.returns,accepts:n.accepts}),o},typedAssignment(e,t){const r=get(e.assignment,t),n=get(e.valueType,t).toString(),o=t.scope[n];if(!o)throw typeError({source:t.source,file:t.file,line:e.valueType.line,column:e.valueType.column,message:`Identifier ${o} is not defined.`});const s=getTypeOf(e.valueType,t)||"Any";if(!["Type","ListType"].includes(s))throw typeError({source:t.source,file:t.file,line:e.valueType.line,column:e.valueType.column,message:`Identifier ${n} is of type ${s} and cannot be used as a Type.`});const i=getTypeOf(e.assignment.value,t);if("ListType"===s&&"Array"===i){const s=o.accepts[0].id;for(const o of e.assignment.value.items){const e=getTypeOf(o,t)||"Any";if(e!==s){const s=e.split("/").pop();throw typeError({source:t.source,file:t.file,line:o.line,column:o.column,message:`Cannot add item of type ${s} to array ${r.name} of type ${n}`})}}}else if("ListType"===s&&Array.isArray(i)){if(!i.map((e=>e.id)).includes(o.id)){const o=i.map((e=>e.id.split("/").pop())).join(" | ");throw typeError({source:t.source,file:t.file,line:e.assignment.assign.line,column:e.assignment.assign.column,message:`Cannot assign array of type ${o} to identifier ${r.name} of type ${n}`})}}else if(i!==o.id){const n=i?i.split("/").pop():"Any",s=o.id.split("/").pop();throw typeError({source:t.source,file:t.file,line:e.assignment.assign.line,column:e.assignment.assign.column,message:`Cannot assign value of type ${n} to identifier ${r.name} of type ${s}`})}const{rpcPrefix:a,file:l}=t;return t.scope[r.name]={type:o.id,id:[a,l,r.name].join("/")},r},arrowAssignment(e,t){const r=get(e.name,t),n=get(e.value,t),o=new SourceNode(null,null,null,[..."symbol"===e.name.type?["const"," "]:[],r,new SourceNode(e.arrow.line,e.arrow.column,e.arrow.file,"="),n]),s=new SourceNode(null,null,null,[n.insertBefore,o].filter(Boolean)).join(";");return r.insertBefore=s,r.needsAsync=n.needsAsync,r},parameter:e=>new SourceNode(e.line,e.column,e.file,e.value.slice(1)),inCheck:(e,t)=>new SourceNode(e.start.line,e.start.column,e.start.file,["includes(",get(e.lhs,t),",",get(e.rhs,t),")"]),formattedString(e,t){const r=get(e.fn,t),n=new SourceNode(null,null,null,e.args.map((e=>get(e,t))));return new SourceNode(null,null,null,[r,"(",n.join(","),")"])},fmtStr:e=>new SourceNode(e.line,e.column,e.file,["`",e.value,"`"]),fmtExpr:(e,t)=>e.content?get(e.content,t):new SourceNode(null,null,null,"null"),strEscape(e){e.value=e.value.slice(1);const t=asIs(e);return"{}".includes(t.toString())?new SourceNode(null,null,null,["`",asIs(e),"`"]):new SourceNode(null,null,null,["`\\",asIs(e),"`"])},typeDef(e,t){if(e.extends)return e.type="typeDefExtends",get(e,t);for(const r of e.members){const e=get(r.type,t);if(!t.scope[e])throw typeError({source:t.source,file:t.file,line:r.line,column:r.column,message:`Identifier ${e} is not defined.`})}const{line:r,column:n,file:o}=e.start,{rpcPrefix:s}=t,i=get(e.name,t),a=[s,o,i].join("/");return t.scope[i]={type:"Type",id:a,returns:a,accepts:e.members.map((e=>t.scope[get(e.type,t)].id))},new SourceNode(r,n,o,["const ",i,"=class ",i,"{constructor(",new SourceNode(null,null,null,e.members.map((e=>get(e.name,t)))).join(","),"){",...e.members.map((e=>{const r=get(e.name,t);return new SourceNode(null,null,null,["this.",r,"=",r,";"])})),"} static get members(){return ",e.members.length.toString(),"}}"])},typeDefExtends(e,t){for(const r of e.members){const e=get(r.type,t);if(!t.scope[e])throw typeError({source:t.source,file:t.file,line:r.line,column:r.column,message:`Identifier ${e} is not defined.`})}const{line:r,column:n,file:o}=e.start,{rpcPrefix:s}=t,i=get(e.name,t),a=get(e.extends,t);return t.scope[i]={type:"Type",id:[s,o,i].join("/")},new SourceNode(r,n,o,["const ",i,"=class ",i," extends ",a,"{constructor(...$args){","super(...","$args.slice(",e.members.length.toString(),"));","const [",new SourceNode(null,null,null,e.members.map((e=>get(e.name,t)))).join(","),"]=$args;",...e.members.map((e=>{const r=get(e.name,t);return new SourceNode(null,null,null,["this.",r,"=",r,";"])})),"}}"])},listDef(e,t){const{line:r,column:n,file:o}=e.start,{rpcPrefix:s}=t,i=get(e.name,t),a=get(e.memberType,t);if(!t.scope[a])throw typeError({source:t.source,file:t.file,line:a.line,column:a.column,message:`Identifier ${typeName} is not defined.`});const l=[s,o,i].join("/");return t.scope[i]={type:"ListType",id:l,returns:l,accepts:[t.scope[a]]},new SourceNode(r,n,o,["const ",i,"=[",a,"]"])},clio(e,t){const r=e.content.map((e=>get(e,t))),n=r.map((e=>[e.insertBefore,e])).flat().filter(Boolean),o=new SourceNode(null,null,null,n.filter((e=>e.toString().trim().length))).join(";"),s=r.map((e=>e.topLevel)).filter(Boolean),i=new SourceNode(null,null,null,s);return new SourceNode(null,null,null,[...s.length?[i.join(";"),";"]:[],"export default async(clio)=>{const{emitter,range,slice,remote,register,help,describe,returns,check,params,includes,f,Any}=clio;",...o.toString().trim().length?[o,";"]:[],"return clio.exports}"])}},get=(e,t)=>{const r=types[e.type](e,t);return r.node=e,r},strPattern=/^(?:"(?:[^"]|\\")*"|'(?:[^']|\\')*')/,numPattern=/^-?(?:[0-9][\d_]*)(?:\.[\d_]+)?(?:[eE][+-]?[\d_]+)?/,keywordPattern=/^(?:list|type|is|if|else|fn|await|import|as|from|export|and|or|not|by|in)(?=\s|$)|^else(?=:)|^await(?=])/,symbolPattern=/^(?:[a-z_$][0-9a-z_$]*)/i,parameterPattern=/^@(?:[a-z_$][0-9a-z_$]*)/i,commentPattern=/^--.*?(?=\r?\n|$)/,manPattern=/^ *(\r?\n)(fn |export fn )/,awaitAllPattern=/^\[await\]/,whites=["space","lineBreak","indent","outdent","slicer","format"],wraps=["lCurly","lSquare","lParen"],zsIgnore=[...whites,"dot","ranger",...wraps],lex=(e,{file:t,...r},n=1,o=0,s=!1)=>{const i=list_1([]),a=[0];let l=n,c=o,u=0,p=0,f=0;const h=(n,o="",s=o.length)=>{i.push({type:n,value:o,line:l,column:c,file:t,...r}),e=e.slice(s),c+=s},d=()=>{const t=e.match(numPattern);return t&&h("number",t[0]),!!t},g=()=>{if("format"==i.last?.item?.type)return(()=>{if(!e.match(strPattern))return!1;for(h("fmtStart",'"',1);e[0];){const r=e.match(/^("|([^\\{"])+|\\.|{)/);if('"'==r[0]){h("fmtEnd",'"',1);break}if("\\"==r[0][0])h("strEscape",r[0],2);else if("{"==r[0]){let r=0,n="";for(;e[0];){switch(e[0]){case"{":r++;break;case"}":r--}if(n+=e[0],e=e.slice(1),0===r)break}h("fmtExprStart","",0);const o=lex(n.slice(1,-1),t,l,c,!0);o.last?.prev?.prev&&(o.last=o.last.prev.prev,i.last.next=o.first,o.first.prev=i.last,i.last=o.last),h("ender","",0),h("fmtExprEnd","",0)}else h("fmtStr",r[0])}return!0})();const r=e.match(strPattern);return!!r&&(h("string",r[0]),!0)},m=()=>{const t=e.match(commentPattern);if(t){(e=e.slice(t[0].length)).match(manPattern)&&h("comment",t[0],0)}return!!t},y=()=>{if(u||p||f)return;if(e.match(/^ *(?=[\r\n])/))return;if(e.match(/^ *--/))return;const r=e.match(/^ */)[0].length,n=a[0];if(r==n)return;if(!e.match(/^ *([+*\/%=-]|and|or)/)||r<n){if(!i.last.prev?.item?.type?.endsWith?.("Op"))if(r<n){if(-1==a.indexOf(r))throw new LexingError({message:"Inconsistent indentation",line:l,file:t,column:c});for(;a[0]!=r;)a.shift(),h("outdent")}else a.unshift(r),i.last.prev&&(i.last=i.last.prev),h("indent")}else i.last.prev&&(i.last=i.last.prev)},w=()=>{const t=e.match(/ +/);return!!t&&(h("space",t[0]),!0)},b=()=>{const t=e.match(keywordPattern);return t&&h(t[0],t[0]),!!t},_=()=>{const t=e.match(awaitAllPattern);return t&&h("awaitAll",t[0]),!!t},v=()=>{const t=e.match(symbolPattern);return t&&h("symbol",t[0]),!!t},S=()=>{if(s||u||p||f)return!1;const t=e.match(parameterPattern);return t&&h("decorator",t[0]),!!t},$=()=>{const t=e.match(parameterPattern);return t&&h("parameter",t[0]),!!t};for(;e.length;){const r=e[0];switch(r){case"#":h("hash",r,1),e.match(/^ *(?:[a-z_$][0-9a-z_$]*) *: *\r?\n/)&&(a.unshift(a[0]+2),h("indent"));break;case".":"."==e[1]?h("ranger","..",2):h("dot",r,1);break;case"|":h("pike",r,1);break;case"{":h("groupStart","",0),h("lCurly",r,1),p++;break;case"}":if(h("rCurly",r,1),h("groupEnd","",0),p--,p<0)throw new LexingError({message:"Imbalanced curly braces",file:t,line:l,column:c});break;case"[":_()||(h("groupStart","",0),h("lSquare",r,1),u++);break;case"]":if(h("rSquare",r,1),h("groupEnd","",0),u--,u<0)throw new LexingError({message:"Imbalanced square braces",file:t,line:l,column:c});break;case"(":h("groupStart","",0),h("lParen",r,1),f++;break;case")":if(h("ender","",0),h("rParen",r,1),h("groupEnd","",0),f--,f<0)throw new LexingError({message:"Imbalanced parentheses",file:t,line:l,column:c});break;case":":h("colon",r,1);break;case'"':g();break;case"-":">"==e[1]?(h("ender","",0),h("arrow","->",2)):d()||m()||h("subOp",r,1);break;case"+":h("addOp",r,1);break;case">":"="==e[1]?h("gte",">=",2):h("gt",r,1);break;case"<":"="==e[1]?h("lte","<=",2):h("lt",r,1);break;case"=":">"==e[1]?(h("ender","",0),h("fatArrow","=>",2)):"="==e[1]?h("eq","==",2):h("assign",r,1);break;case"/":h("divOp",r,1);break;case"%":h("modOp",r,1);break;case"*":"*"==e[1]?h("powOp","**",2):h("mulOp","*",1);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d();break;case" ":w();break;case"\r":e=e.slice(1),c++;break;case"\n":h("lineBreak","\n",1),l++,c=0,y();break;case"@":S()||$();break;default:if(!b()&&!v())throw new LexingError({message:`Unsupported character ${r}!`,file:t,line:l,column:c})}zsIgnore.includes(i.last?.item?.type)||('"'==e[0]?h("format","",0):"["==e[0]&&h("slicer","",0))}for(;a.shift();)h("lineBreak","",0),h("outdent","",0);h("lineBreak","",0),h("eof","",0);const{current:E}=i;let k=E;for(;k;)"space"==k.item.type?(k.unlink(),k=k.prev||k.next):k=k.next;return i},parse=(e,t)=>bean_1(e,rules,!0,t),defaultScope={Number:{id:"Number",type:"Type"},String:{id:"String",type:"Type"},Array:{id:"Array",type:"Type"},Any:{id:"Any",type:"Type"},Function:{id:"Function",type:"Type"},Type:{id:"Type",type:"Type"},ListType:{id:"ListType",type:"Type"}},compile=(e,t,{debug:r=!1,...n})=>{const o={compile:compile,compileFile:compileFile,scope:{...defaultScope},source:e,...n},s=lex(e,{file:t});r&&console.dir(s.current,{depth:null});const i=parse(s,o);if(r&&console.dir(i,{depth:null}),"clio"==i.first.item.type){const r=get(i.current.item,o),{code:n,map:s}=r.toStringWithSourceMap();return s.setSourceContent(t,e),{code:n+`//# sourceMappingURL=${t}.js.map`,map:s.toString(),context:o}}throw parsingError(e,t,i)},mkdir=e=>{existsSync(e)||mkdirSync(e,{recursive:!0})},isFileModified=(e,t,r,n)=>{if(!existsSync(t))return!0;if(!existsSync(r))return!0;if(!existsSync(n))return!0;const o=statSync(e,{bigint:!0}).mtimeMs,s=statSync(t,{bigint:!0}).mtimeMs;return[statSync(r,{bigint:!0}).mtimeMs,s,statSync(n,{bigint:!0}).mtimeMs].map((e=>e<=o)).every(Boolean)},compileFile=(e,t,r,n,o,s,i,a,l,c)=>{const u=getDestinationFromConfig(r,t),p=getSourceFromConfig(r,t),f=a?join$1(s,a,u):join$1(s,u),h=i?join$1(s,i,p):join$1(s,p),d=join$1(h,e),g=`${t.title}@${t.version}`,m=`${join$1(f,e)}.js`,y=`${m}.map`,w=join$1(s,l,`${m}.json`);if(!isFileModified(d,m,y,w)){const e=readFileSync(y).toString(),t=readFileSync(m).toString(),{scope:r,imports:i=[]}=JSON.parse(readFileSync(w).toString()),a=[...i];for(;a.length;){const{src:e,dest:t,module:r}=a.pop(),u=r?join$1(s,n,r,"clio.toml"):join$1(s,"clio.toml");c.npmDeps[r]||(c.npmDeps[r]=getParsedNpmDependencies(u)),c.npmDevDeps[r]||(c.npmDevDeps[r]=getParsedNpmDevDependencies(u));const p=`${t}.map`,f=join$1(s,l,`${t}.json`);if(isFileModified(e,t,p,f)){c.configs[r]||(c.configs[r]=getPackageConfig(u));const h=c.configs[r],d=readFileSync(e,"utf8"),g=getDestinationFromConfig(u,h),m=getSourceFromConfig(u,h),y=relative(join$1(dirname(u),m),e),w=`${h.title}@${h.version}`,{code:b,map:_,context:v}=compile(d,y,{root:s,file:y,config:h,sourceDir:m,modulesDir:n,modulesDestDir:o,rpcPrefix:w,destFile:t,destination:g,configPath:u,srcPrefix:r?join$1(n,r,m):"src",destPrefix:r?join$1(o,r,g):"dest",cacheDir:l,...c});mkdir(dirname(t)),mkdir(dirname(f)),writeFileSync(f,JSON.stringify({scope:v.scope,imports:v.imports||[]}),"utf8"),writeFileSync(t,b,"utf8"),writeFileSync(p,_,"utf8"),a.push(...i)}else{const{imports:e=[]}=JSON.parse(readFileSync(f).toString());a.push(...e)}}return{npmDeps:c.npmDeps||{},npmDevDeps:c.npmDevDeps||{},code:t,map:e,scope:r,imports:i,destFile:m,srcFile:d}}const b=readFileSync(d,"utf8"),{code:_,map:v,context:S}=compile(b,e,{root:s,file:e,config:t,sourceDir:p,modulesDir:n,modulesDestDir:o,rpcPrefix:g,destFile:m,destination:u,configPath:r,srcPrefix:i,destPrefix:a,cacheDir:l,...c});return mkdir(dirname(m)),mkdir(dirname(w)),writeFileSync(w,JSON.stringify({scope:S.scope,imports:S.imports||[]}),"utf8"),writeFileSync(m,_,"utf8"),writeFileSync(y,v,"utf8"),{npmDeps:S.npmDeps||{},npmDevDeps:S.npmDevDeps||{},code:_,map:v,scope:S.scope,imports:S.imports,destFile:m,srcFile:d}},exec=async(e,t)=>{const r=await getCPUCount(),n=await getModule(e),o=encodeURIComponent(e.replace(/%/g,"~~mod~~")),s=new Dispatcher,i=new Server$3;for(let e=0;e<r;e++){const e=new Worker(`${t}?src=${o}`);i.addWorker(e)}return s.addTransport(i),s.expectWorkers(r).then((()=>{const e=i.getTransport(),t=new Executor(e);return{main:()=>run(n,{executor:t},{noExit:!0}),dispatcher:s}}))},compileAndRun=(e,t="./build/worker.js")=>{(async()=>{try{const{code:r}=compile(e,"main.clio",{sourceDir:null,config:{},rpcPrefix:"playground",file:"<Playground>"}),{main:n}=await exec(r,t);await n()}catch(e){console.trace(e),console.error(e.message)}})()};return exports.compileAndRun=compileAndRun,Object.defineProperty(exports,"__esModule",{value:!0}),exports}({},toml);
//# sourceMappingURL=bundle.js.map
